actor BulletTracer : FastProjectile
{
	Projectile
	Radius 2
	Height 2
	Speed 232
	RenderStyle Add
	Alpha 1.0
	+NOGRAVITY
	+THRUGHOST
	States
	{
		Spawn:
			PUFF A 1 BRIGHT
			loop
		Crash:
		Death:
			TNT1 A 0
			TNT1 A 1
			stop
	}
}

actor PIPSSpark
{
	Height 1
	Radius 1
	Damage 1
	Speed 10
	Projectile
	-NOGRAVITY
	+DONTSPLASH
	+FORCEXYBILLBOARD
	+STRIFEDAMAGE
	BounceType Hexen
	RenderStyle Add
	Scale 0.03
	Alpha 0.9
	States
	{
		Spawn:
			GEMB A 4 BRIGHT
			GEMB A 1 BRIGHT A_FadeOut(0.1)
			goto Spawn+1
		XDeath:
			TNT1 A 0
			TNT1 A 0 A_GiveToTarget("HitConfirmation", 1)
			goto Death	
		Death:
			TNT1 AA 1
			stop
	}
}

ACTOR PIPSHit
{
	Radius 16
	Height 8
	Scale 0.5
	Alpha 1.0
	Renderstyle Add
	obituary "%o was singed by %k!"
	+NOGRAVITY
	+FIXMAPTHINGPOS
	+FORCEXYBILLBOARD
	+FORCERADIUSDMG
	States
	{
	Spawn:
	  PIPH A 0
	  PIPH A 0 A_PlaySoundEx("RepeaterHit", "auto", 0)
	  PIPH ABCDEF 1 BRIGHT
	  Stop
	}
}

actor PIPS_Shot : FastProjectile
{
	Projectile
	Radius 2
	Height 2
	Speed 200
	Damage 1
	RenderStyle Add
	Alpha 1.0
	Scale 0.25
	+NOGRAVITY
	States
	{
		Spawn:
			PIPH A 1 BRIGHT
			loop
		XDeath:
			TNT1 A 0
			TNT1 A 0 A_GiveToTarget("HitConfirmation", 1)
			goto Death
		Death:
			TNT1 A 0
			TNT1 AAAAAA 0 A_CustomMissile("PIPSSpark", 0, 0, random(-180,180), CMF_AIMDIRECTION | CMF_TRACKOWNER, random(-90,90))
			TNT1 A 1 A_SpawnItemEx("PIPSHit", 0, 0, 0, 0, 0, 0, 0, 0, 0)
			stop
	}
}

actor NeedlerCrystal
{
  Decal Needler
  Projectile
  Height 5
  Radius 5
  Speed 78
  Damage 3
  Scale 0.5
  RenderStyle Add
  Alpha 0.8
  seesound "NeedlerFire"
  deathsound "NeedlerHit"
  +BLOODSPLATTER
  -BLOODLESSIMPACT
  +FORCEXYBILLBOARD
  States
  {
  Spawn:
  	GLSS A 0
  	GLSS A 0 ThrustThingZ(0, random(0, 8), random(0,1), 1)
	GLSS A 1 BRIGHT
	goto Spawn+2
  XDeath:
	TNT1 A 0
	TNT1 A 0 A_GiveToTarget("HitConfirmation", 1)
	goto Death
  Death:
	TNT1 A 0
	TNT1 A 0 A_Scream
	TNT1 AA 0 A_CustomMissile ("NeedlerShard", 0, 0, Random(-360, 360), 6, Random(-360, 360))
	TNT1 AA 1
	stop
  }
}

actor NeedlerShard
{
  Projectile
  Height 2
  Radius 2
  Scale 0.5
  Speed 3
  Damage 2
  BounceCount 2
  BounceFactor 0.8
  RenderStyle Add
  Alpha 0.8
  ReactionTime 200
  +DOOMBOUNCE
  +BLOODSPLATTER
  +FORCEXYBILLBOARD
  -BLOODLESSIMPACT
  -NOGRAVITY
  States
  {
  Spawn:
	BSHD ABCDEF 1 BRIGHT A_CountDown
	loop
  Death:
	BSHD F 2 BRIGHT A_FadeOut
	loop
  }
}

actor EnemyNeedlerCrystal : NeedlerCrystal
{
	decal Needler
	OBITUARY "%o was spiked by a Needler Troop."
	Speed 60
	Damage 2
	+FORCEXYBILLBOARD
}