actor BaseCheck : Inventory
{
	inventory.amount 1
	inventory.maxamount 1
	-INVBAR
	+INVENTORY.UNDROPPABLE
	states
	{
		Spawn:
			TNT1 A 1
			loop
	}
}

actor BaseClassCheck : Inventory
{
	inventory.amount 1
	inventory.maxamount 1
	-INVBAR
	-INTERHUBSTRIP
	+INVENTORY.UNDROPPABLE
	+INVENTORY.HUBPOWER
	states
	{
		Spawn:
			TNT1 A 1
			loop
	}
}

actor IsDeathmatch : BaseCheck
{
}

actor UsingSaber : BaseCheck
{
}

actor SaberGuard : BaseCheck
{
}

actor Firing : BaseCheck
{
}

actor IsCensoredMode : BaseCheck
{
}

actor ActivationPrevention : BaseCheck
{
}

actor TauntSpamProtection : BaseCheck
{
}

actor MysteryPowerupInUse : BaseCheck
{
}

actor NukeTrigger 17462
{
	Health 99999
	Radius 16
	Height 32
	Mass 999999
	DamageFactor "Nuke", 999
	-SOLID
	+NOGRAVITY
	+SHOOTABLE
	+NOBLOOD
	states
	{
		Spawn:
			TNT1 A -1
			stop
		Death:
			TNT1 AA 1
			stop
	}
}

actor HitConfirmation : CustomInventory
{
	inventory.maxamount 1
	-INVENTORY.INVBAR
	+INVENTORY.AUTOACTIVATE
	+INVENTORY.ALWAYSPICKUP
	States
	{
		Spawn:
			TNT1 A -1
			stop
		Use:
			TNT1 A 1 ACS_ExecuteAlways(HITCROSS, 0)
			stop
	}
}

actor GenericTimer : Inventory
{
	inventory.amount 1
	inventory.maxamount 9999
	-INVENTORY.INVBAR
	+INVENTORY.UNDROPPABLE
	+INVENTORY.HUBPOWER
	States
	{
		Spawn:
			TNT1 A -1
			stop
	}
}

actor MusicSwitchBack : CustomInventory
{
 inventory.maxamount 1
 -INVENTORY.INVBAR
 +INVENTORY.AUTOACTIVATE
 +INVENTORY.ALWAYSPICKUP
 States
 {
 	Spawn:
 		TNT1 A -1
 		stop
 	Use:
 		TNT1 A 1 ACS_ExecuteAlways(146, 0)
 		stop
 }
}

actor UnfreezePlayerArcade : CustomInventory
{
 inventory.maxamount 1
 -INVENTORY.INVBAR
 +INVENTORY.AUTOACTIVATE
 +INVENTORY.ALWAYSPICKUP
 States
 {
 	Spawn:
 		TNT1 A -1
 		stop
 	Use:
 		TNT1 A 1 ACS_ExecuteAlways(151, 0)
 		stop
 }
}

actor NoLightningSound : BaseCheck
{
}

actor LightningSound : CustomInventory
{
 inventory.maxamount 0
 -INVENTORY.INVBAR
 +INVENTORY.AUTOACTIVATE
 +INVENTORY.ALWAYSPICKUP
 States
 {
 	Spawn:
 		TNT1 A -1
 		stop
 	Use:
 		TNT1 A 0
 		TNT1 A 0 A_JumpIfInventory("NoLightningSound", 1, "GoDie")
 		TNT1 A 1 ACS_ExecuteAlways(LIGHTNINGSOUND, 0)
 		stop
 	GoDie:
 		TNT1 A 1
 		stop
 }
}

actor KnockoutTrigger : CustomInventory
{
	inventory.maxamount 1
	-INVENTORY.INVBAR
	+INVENTORY.AUTOACTIVATE
	+INVENTORY.ALWAYSPICKUP
	States
	{
	Spawn:
		TNT1 A -1
		stop
	Use:
		TNT1 A 0
		TNT1 A 1 ACS_Execute(KNOCKOUT, 0)
		stop
	}
}

actor DemonicChargerCheck : BaseCheck
{
}

actor DemonicChargerCheck2 : BaseCheck
{
}

actor DemonicChargeEffect : CustomInventory
{
 inventory.maxamount 1
 -INVENTORY.INVBAR
 +INVENTORY.AUTOACTIVATE
 +INVENTORY.ALWAYSPICKUP
 States
 {
 	Spawn:
 		TNT1 A -1
 		stop
 	Use:
 		TNT1 A 0
 		TNT1 A 0 A_PlaySoundEx("demonpowerpickup", "auto", 0)
 		TNT1 AAAAAAAA 0 A_SpawnItemEx("DemonicChargeEffectPiece", 0, 0, 32, Random(-2,2), Random(-2,2), Random(-2,2), 0, 128, 0)
 		TNT1 A 1
 		stop
 }
}

actor SpeakOneLiner : CustomInventory
{
 	inventory.maxamount 1
 	-INVENTORY.INVBAR
 	+INVENTORY.AUTOACTIVATE
 	+INVENTORY.ALWAYSPICKUP
 	States
 	{
 	Spawn:
 		TNT1 A -1
 		stop
 	Use:
 		TNT1 A 0
 		TNT1 A 1 A_JumpIfInventory("DukeClassCheck", 1, "IsDuke")
 		TNT1 A 0 A_TakeInventory("SpeakOneLiner", 1)
 		stop
 	IsDuke:
 		TNT1 A 0
 		TNT1 A 0 A_JumpIfHealthLower(1, "Cancel")
 		TNT1 A 1 A_Jump(88, "Speak")
 		TNT1 A 0 A_TakeInventory("SpeakOneLiner", 1)
 		stop
 	Speak:
 		TNT1 A 0
 		TNT1 A 0 A_JumpIfHealthLower(1, "Cancel")
 		TNT1 A 1 A_PlaySoundEx("DukeOneLiner", "SoundSlot5", 0, 0.3)
 		TNT1 A 0 A_TakeInventory("SpeakOneLiner", 1)
 		stop
 	Cancel:
 		TNT1 A 0
 		TNT1 A 1 A_TakeInventory("SpeakOneLiner", 1)
 		TNT1 A 0
 		stop
 	}
}

actor SpeakRespawn : CustomInventory
{
 	inventory.maxamount 1
 	-INVENTORY.INVBAR
 	+INVENTORY.AUTOACTIVATE
 	+INVENTORY.ALWAYSPICKUP
 	States
 	{
 	Spawn:
 		TNT1 A -1
 		stop
 	Use:
 		TNT1 A 0
 		TNT1 A 1 A_JumpIfInventory("DukeClassCheck", 1, "IsDuke")
 		TNT1 A 0 A_TakeInventory("SpeakRespawn", 1)
 		stop
 	IsDuke:
 		TNT1 A 0
 		TNT1 A 0 A_JumpIfHealthLower(1, "Cancel")
 		TNT1 A 1 A_Jump(76, "Speak")
 		TNT1 A 0 A_TakeInventory("SpeakRespawn", 1)
 		stop
 	Speak:
 		TNT1 A 0
 		TNT1 A 0 A_JumpIfHealthLower(1, "Cancel")
 		TNT1 A 1 A_PlaySoundEx("DukeRespawn", "SoundSlot5", 0, 0.3)
 		TNT1 A 0 A_TakeInventory("SpeakRespawn", 1)
 		stop
 	Cancel:
 		TNT1 A 0
 		TNT1 A 1 A_TakeInventory("SpeakRespawn", 1)
 		TNT1 A 0
 		stop
 	}
}

actor SpeakEntry : CustomInventory
{
 	inventory.maxamount 1
 	-INVENTORY.INVBAR
 	+INVENTORY.AUTOACTIVATE
 	+INVENTORY.ALWAYSPICKUP
 	States
 	{
 	Spawn:
 		TNT1 A -1
 		stop
 	Use:
 		TNT1 A 0
 		TNT1 A 1 A_JumpIfInventory("DukeClassCheck", 1, "IsDuke")
 		TNT1 A 0 A_TakeInventory("SpeakEntry", 1)
 		stop
 	IsDuke:
 		TNT1 A 0
 		TNT1 A 0 A_JumpIfHealthLower(1, "Cancel")
 		TNT1 A 1 A_Jump(200, "Speak")
 		TNT1 A 0 A_TakeInventory("SpeakEntry", 1)
 		stop
 	Speak:
 		TNT1 A 0
 		TNT1 A 0 A_JumpIfHealthLower(1, "Cancel")
 		TNT1 A 1 A_PlaySoundEx("DukeEntry", "SoundSlot5", 0, 0.3)
 		TNT1 A 0 A_TakeInventory("SpeakEntry", 1)
 		stop
 	Cancel:
 		TNT1 A 0
 		TNT1 A 1 A_TakeInventory("SpeakEntry", 1)
 		TNT1 A 0
 		stop
 	}
}

actor TailsFlightCheck : Inventory
{
	inventory.amount 1
	inventory.maxamount 100
	inventory.icon "STTPRCNT"
	-INVBAR
	-INTERHUBSTRIP
	+INVENTORY.UNDROPPABLE
	+INVENTORY.HUBPOWER
	states
	{
		Spawn:
			TNT1 A 1
			loop
	}
}

actor FlareCheck : Inventory
{
  inventory.amount 1
  inventory.maxamount 100
  inventory.icon "STTPRCNT"
  -INVBAR
  -INTERHUBSTRIP
  +INVENTORY.UNDROPPABLE
  +INVENTORY.HUBPOWER
  states
  {
  Spawn:
	TNT1 A 1
	loop
  }
}

actor CannotUse : Inventory
{
  inventory.amount 1
  inventory.maxamount 1
  -INVBAR
  -INTERHUBSTRIP
  +INVENTORY.UNDROPPABLE
  +INVENTORY.HUBPOWER
  states
  {
  Spawn:
	TNT1 A 1
	loop
  }
}

actor CannotSpin : Inventory
{
  inventory.amount 1
  inventory.maxamount 1
  -INVBAR
  -INTERHUBSTRIP
  +INVENTORY.UNDROPPABLE
  +INVENTORY.HUBPOWER
  states
  {
  Spawn:
	TNT1 A 1
	loop
  }
}

actor SpecialMove : CustomInventory
{
  inventory.pickupmessage "Special Move! \cc*\cgYou Shouldn't have been able to pick this up asshole!\cc*"
  inventory.pickupsound "misc/p_pkup"
  inventory.icon BLUDC0
  inventory.amount 2
  inventory.maxamount 2
  +COUNTITEM
  +INVENTORY.UNDROPPABLE
  -INVBAR
  states
  {
  Spawn:
	TNT1 A -1
	stop
  Use:
	TNT1 A 0
	TNT1 A 0 A_JumpIfInventory("CannotUse", 1, "DontUse")
	TNT1 A 0 A_JumpIfInventory("CannotSpin", 1, "DontUse")
	TNT1 A 0 A_JumpIfInventory("PowerPossessionArtifact", 1, "DontUse")
	TNT1 A 0 A_JumpIfInventory("ValkrieCannons", 1, "DontUse")
	TNT1 A 0 A_JumpIfInventory("DeathbringerCannons", 1, "DontUse")
	TNT1 A 0 A_JumpIfInventory("PowerFlight", 1, "DontUse")
	TNT1 A 0 A_JumpIfInventory("RedFlag", 1, "DontUse")
	TNT1 A 0 A_JumpIfInventory("BlueFlag", 1, "DontUse")
	TNT1 A 0 A_JumpIfInventory("WhiteFlag", 1, "DontUse")
	TNT1 A 0 A_JumpIfInventory("BlueSkullST", 1, "DontUse")
	TNT1 A 0 A_JumpIfInventory("RedSkullST", 1, "DontUse")
	TNT1 A 0 A_JumpIfInventory("MarineClassCheck", 1, "MarineCheck")
	TNT1 A 0 A_JumpIfInventory("TailsClassCheck", 1, "TailsWorking")
	TNT1 A 0 A_JumpIfInventory("LinkClassCheck", 1, "LinkWorking")
	stop
  MarineCheck:
  	TNT1 A 0 A_JumpIfInventory("FlareCheck", 100, "MarineWorking")
  	stop
  MarineWorking:
  	TNT1 A 0 A_TakeInventory("FlareCheck", 100)
  	TNT1 A 0 ACS_ExecuteAlways(FLARECHECK,0)
	
  	TNT1 A 0 A_SpawnItemEx("Flare", cos(-pitch)*1, 0, 50+(sin(pitch)*1),cos(-pitch)*50,0,(sin(-pitch)*50)+3, 0, 0, 0)
  	TNT1 A 0 A_GiveInventory("SpecialMove", 1)
  	stop
  LinkWorking:
    TNT1 A 0 ACS_ExecuteAlways(DOWALLJUMP,0)
    TNT1 A 0 A_GiveInventory("SpecialMove", 1)
    stop
  TailsWorking:
	TNT1 A 0 A_PlayWeaponSound("SpinDash")
	TNT1 A 0 ACS_Execute(SPINATTACK,0,1)
	TNT1 A 0 A_GiveInventory("SpecialMove", 1)
	stop
  DontUse:
	TNT1 A 0
	stop
  }
}

actor SaberGreen : BaseCheck
{
}

actor SaberBlue : BaseCheck
{
}

actor SaberRed : BaseCheck
{
}

actor ChaseCam2
{
	height 0
	radius 0
	+NOGRAVITY
	states
	{
		Spawn:
			TNT1 A -1
			stop
	}
}
