// ******************************************************************************
// | With the increasing amount of wads taking SMMP code without permission 	|
// | or credit, I'm forced to add this to the start of this lump.				|
// |																			|
// | If I catch you stealing code, I'll make your life a living hell.			|
// | by that, I mean I'll be bringing the offending wad to the attention		|
// | of the public, and I'll be DAMN sure to make clear as day what was 		|
// | stolen, where from, and who did it. You do not want to be put on the		|
// | spotlight like that, believe me.											|
// |																			|
// | Don't be a lazy bastard. Make something original instead of				|
// | just yanking whatever the fuck you want from the code I've spent			|
// | countless hours, days, and weeks on. DECORATE isn't that hard folks.		|
// | Feel free to learn from the code, just to get a better understanding		|
// | of it, but, for the love of god, don't just steal it for your own mods.	|
// |																			|
// | I want to keep this Mod's status as being unique, and it doesn't help		|
// | it when everyone and their grandmother's fuckin shitty HQ wads have my 	|
// | stuff poorly shoehorned in by lazy inconsiterate bastards. 				|
// | Ruins the novelty and experience, in my honest opinion.					|
// ******************************************************************************

#include "actors/checksandtriggers.txt"
#include "actors/ammotypes.txt"
#include "actors/projectiles.txt"
#include "actors/gore.txt"
#include "actors/effects.txt"
#include "actors/health.txt"
#include "actors/powerups.txt"
#include "actors/bulletpuffs.txt"
#include "actors/decorations.txt"
#include "actors/splashes.txt"
#include "actors/monsters.txt"
#include "actors/heretic_compat.txt"

actor DemonicChargeEffectPiece
{
	Radius 1
	Height 1
	Speed 0
	Scale 0.08
	RenderStyle Add
	Alpha 0.9
	PROJECTILE
	+CORPSE
	+FORCEXYBILLBOARD
	States
	{
	Spawn:
		WRAT A 1 BRIGHT A_FadeOut(0.1)
		loop
	Death:
		TNT1 A 1
		Stop
	}
}

actor DemonicChargerBall 14721
{
	Radius 16
	Height 16
	-SOLID
	+NOBLOCKMAP
	+DROPOFF
	+NOGRAVITY
	+FLOATBOB
	States
	{
		Spawn:
			TNT1 A 0 A_SpawnItemEx("DemonicChargeEffectPiece", 0, 0, 0, Random(-3,3), Random(-3,3), Random(-3,3), 0, 128, 0)
			TNT1 A 0 A_SpawnItemEx("PlasmaMist", Random(-10,10), Random(-10,10), Random(-10,10), random(-1,1), Random(-1,1), Random(-1,1), 0, 128, 0)
			TNT1 A 1 A_SpawnItemEx("PlasmaMist", Random(-10,10), Random(-10,10), Random(-10,10), random(-1,1), Random(-1,1), Random(-1,1), 0, 128, 0)
			loop
		Death:
			TNT1 A 1
			stop
	}
}

actor Etherealmist
{
	Radius 1
	Height 1
	Speed 2
	Scale 0.6
	RenderStyle Add
	Alpha 0.5
	Translation "176:191=112:127", "32:47=112:127"
	PROJECTILE
	+CORPSE
	+FORCEXYBILLBOARD
	States
	{
	Spawn:
		EPF4 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 BRIGHT
		EPF5 AB 1 BRIGHT
		Stop
	Death:
		NADA A 1
		Stop
	}
}

actor DukeKickCheck : Inventory
{
  inventory.amount 1
  inventory.maxamount 1
  -INVBAR
  -INTERHUBSTRIP
  +INVENTORY.UNDROPPABLE
  +INVENTORY.HUBPOWER
  states
  {
  Spawn:
	TNT1 A 1
	loop
  }
}

actor Melee : Weapon
{
  obituary "%o was beaten to a pulp by %k."
  weapon.selectionorder 3700
  AttackSound "*fist"
  weapon.kickback 100
  +WEAPON.WIMPY_WEAPON
  +WEAPON.MELEEWEAPON
  +WEAPON.ALLOW_WITH_RESPAWN_INVUL
  +WEAPON.CHEATNOTWEAPON
  +WEAPON.NOALERT
  +WEAPON.AMMO_OPTIONAL
  states
  {
  Ready:
	PUNG A 0 A_JumpIfInventory("TailsClassCheck", 1, "TailsReady")
	PUNG A 0 A_JumpIfInventory("LinkClassCheck", 1, "LinkReady")
	PUNG A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeReady")
	PUNG A 1 A_WeaponReady
	goto Ready+3
  Deselect:
	PUNG A 0 A_JumpIfInventory("TailsClassCheck", 1, "TailsDeselect")
	PUNG A 0 A_JumpIfInventory("LinkClassCheck", 1, "LinkDeselect")
	PUNG A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeDeselect")
	PUNG A 1 A_Lower
	goto Deselect+3
  Select:
	PUNG A 0 A_JumpIfInventory("TailsClassCheck", 1, "TailsSelect")
	PUNG A 0 A_JumpIfInventory("LinkClassCheck", 1, "LinkSelect")
	PUNG A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeSelect")
	PUNG A 1 A_Raise
	goto Select+3
  Hold:
  Fire:
	PUNG A 0 A_JumpIfInventory("TailsClassCheck", 1, "TailsFire")
	PUNG A 0 A_JumpIfInventory("LinkClassCheck", 1, "LinkFire")
	PUNG A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeFire")
	PUNG A 0 A_JumpIfInventory("PowerStrength", 1, "BerserkFire")
	PUNG A 0 A_Jump(56, "Fire3")
	PUNG A 0 A_Jump(120, "Fire2")
	PUNG B 1
	PUNG C 2 A_CustomPunch(5, 0, 0, "FistPuff")
	PUNG D 5
	PUNG C 2
	PUNG B 2
	TNT1 A 1
	TNT1 A 3 A_ReFire
	goto Ready
  Fire2:
  	PUN2 A 1
	PUN2 B 1 A_CustomPunch(6, 0, 0, "FistPuff")
	PUN2 C 1
	PUN2 D 5
	PUN2 C 2
	PUN2 B 1
	PUN2 A 1
	TNT1 A 1
	TNT1 A 3 A_ReFire
	goto Ready
  Fire3:
  	PUN2 A 1 A_PlaySoundEx("skeleton/swing", "auto", 0)
	PUN2 B 1
	PUN2 C 1 A_CustomPunch(10, 0, 0, "FistPuff3")
	PUN2 DEFG 1
	TNT1 A 9
	TNT1 A 3 A_ReFire
	goto Ready
  BerserkFire:
  	PUNG A 0 A_Jump(56, "BerserkFire3")
	PUNG A 0 A_Jump(120, "BerserkFire2")
	PUNG B 1
	PUNG C 2 A_CustomPunch(25, 0, 0, "FistPuff")
	PUNG D 5
	PUNG C 2
	PUNG B 2
	TNT1 A 1
	TNT1 A 3 A_ReFire
	goto Ready
  BerserkFire2:
  	PUN2 A 1
	PUN2 B 1 A_CustomPunch(26, 0, 0, "FistPuff")
	PUN2 C 1
	PUN2 D 5
	PUN2 C 2
	PUN2 B 1
	PUN2 A 1
	TNT1 A 1
	TNT1 A 3 A_ReFire
	goto Ready
  BerserkFire3:
  	PUN2 A 1 A_PlaySoundEx("skeleton/swing", "auto", 0)
	PUN2 B 1
	PUN2 C 1 A_CustomPunch(32, 0, 0, "FistPuff3")
	PUN2 DEFG 1
	TNT1 A 9
	TNT1 A 3 A_ReFire
	goto Ready

// **** Tails ****

  TailsReady:
	PUNT A 1 A_WeaponReady
	loop
  TailsDeselect:
	PUNT A 1 A_Lower
	loop
  TailsSelect:
	PUNT A 1 A_Raise
	loop
  TailsFire:
	PUNT A 0 A_JumpIfInventory("PowerStrength", 1, "TailsBerserkFire")
	PUNT B 1
	PUNT C 1
	PUNT D 1 A_CustomPunch(10, 0, 0, "FistPuff")
	PUNT EFGH 1
	TNT1 A 9
	PUNT A 3 A_ReFire
	goto TailsReady
  TailsBerserkFire:
	PUNT B 1
	PUNT C 1
	PUNT D 1 A_CustomPunch(50, 0, 0, "FistPuff2")
	PUNT EFGH 1
	TNT1 A 9
	PUNT A 3 A_ReFire
	goto TailsReady

// **** Link ****

  LinkReady:
	MSWD A 1 BRIGHT A_WeaponReady
	loop

  LinkDeselect:
	MSWD A 1 BRIGHT A_Lower
	loop

  LinkSelect:
	MSWD A 1 BRIGHT A_Raise
	loop

  LinkFire:
	MSW1 A 0 A_PlaySound("LinkAttack")
	MSW1 A 0 A_PlayWeaponSound("LinkSwordSwing")
	MSW1 A 0 A_Jump(136, "LinkFire2", "LinkFire3", "LinkFire4", "LinkFire5", "LinkFire6")
	MSW1 A 0 A_Recoil(-4)
	MSW1 AB 1 BRIGHT
	MSW1 A 0 BRIGHT A_CustomPunch(11, 0, 0, "MasterSwordHit", 76)
	MSW1 CDE 1 BRIGHT
	TNT1 A 10 BRIGHT
	MSWD A 2 BRIGHT
	TNT1 A 0 A_Refire
	goto LinkReady

  LinkFire2:
	MSW2 A 0 A_Recoil(-6)
	MSW2 AB 1 BRIGHT
	MSW2 A 0 BRIGHT A_CustomPunch(16, 0, 0, "MasterSwordHit", 86)
	MSW2 CDE 1 BRIGHT
	TNT1 A 10 BRIGHT
	MSWD A 2 BRIGHT
	TNT1 A 0 A_Refire
	goto LinkReady

  LinkFire3:
	MSW3 A 0 A_Recoil(-3)
	MSW3 AB 1 BRIGHT
	MSW3 A 0 BRIGHT A_CustomPunch(14, 0, 0, "MasterSwordHit", 76)
	MSW3 CDE 1 BRIGHT
	TNT1 A 10 BRIGHT
	MSWD A 2 BRIGHT
	TNT1 A 0 A_Refire
	goto LinkReady

  LinkFire4:
	MSW4 A 0 A_Recoil(-3)
	MSW4 AB 1 BRIGHT
	MSW4 A 0 BRIGHT A_CustomPunch(14, 0, 0, "MasterSwordHit", 76)
	MSW4 CDE 1 BRIGHT
	TNT1 A 10 BRIGHT
	MSWD A 2 BRIGHT
	TNT1 A 0 A_Refire
	goto LinkReady

  LinkFire5:
	MSW5 A 0 A_Recoil(-6)
	MSW5 AB 1 BRIGHT
	MSW5 A 0 BRIGHT A_CustomPunch(16, 0, 0, "MasterSwordHit", 86)
	MSW5 CDE 1 BRIGHT
	TNT1 A 10 BRIGHT
	MSWD A 2 BRIGHT
	TNT1 A 0 A_Refire
	goto LinkReady

  LinkFire6:
	MSW6 A 0 A_Recoil(-12)
	MSW6 AB 1 BRIGHT
	MSW6 C 1 BRIGHT
	MSW6 D 1 BRIGHT A_CustomPunch(24, 0, 0, "MasterSwordHit", 100)
	MSW6 E 10 BRIGHT
	MSW6 D 2 BRIGHT A_CustomPunch(8, 0, 0, "MasterSwordHit", 76)
	MSW6 CBA 2 BRIGHT
	TNT1 A 5 BRIGHT
	MSWD A 2 BRIGHT
	TNT1 A 0 A_Refire
	goto LinkReady

// **** Duke ****

  DukeReady:
	TNT1 A 0 A_TakeInventory("DukeKickCheck", 1)
	TNT1 A 1 A_WeaponReady
	goto DukeReady+1
  DukeDeselect:
	TNT1 A 0 A_TakeInventory("DukeKickCheck", 1)
	TNT1 A 1 A_Lower
	goto DukeDeselect+1
  DukeSelect:
	TNT1 A 1 A_Raise
	loop
  DukeFire:
	DKIK A 0 A_GiveInventory("DukeKickCheck", 1)
	DKIK A 0 A_JumpIfInventory("PowerStrength", 1, "DukeBerserkFire")
	DKIK A 7
	DKIK B 5 A_CustomPunch(6, 0, 0, "KickPuff")
	DKIK A 8 A_ReFire
	goto DukeReady
  DukeBerserkFire:
	DKIK A 7
	DKIK B 5 A_CustomPunch(25, 0, 0, "KickPuff2")
	DKIK A 8 A_ReFire
	goto DukeReady
  }
}

actor ProtonTrail
{
	Radius 1
	Height 1
	RenderStyle Add
	Alpha 0.9
	Projectile
	+CORPSE
	+FORCEXYBILLBOARD
	States
	{
		Spawn:
			TNT1 A 2
			MISL A 1 BRIGHT A_FadeOut(0.1)
			goto Spawn+1
		Death:
			TNT1 A 1
			stop
	}
}

actor ProtonTorpedo : Rocket Replaces Rocket
{
	obituary "%o was gored by %k's proton torpedoes!"
	-NOTELEPORT
	-ROCKETTRAIL
	+EXTREMEDEATH
	-FIREDAMAGE
	-DEHEXPLOSION
	+FORCEXYBILLBOARD
	Speed 25
	DeathSound "ProtonExplosion"
	RenderStyle Add
	Alpha 0.9
	Decal Scorch
	States
	{
		Spawn:
			MISL A 1 BRIGHT A_SpawnItemEX("ProtonTrail", 0, 0, 0, Random(-1,1), Random(-1,1), Random(-1,1), 0, 128, 0)
			loop
		XDeath:
			TNT1 A 0
			TNT1 A 0 A_GiveToTarget("HitConfirmation", 1)
			goto Death
		Death:
			64P1 A 0 bright A_Explode
			64P1 A 0 bright radius_quake(3, 16, 0, 3, 0)
			64P1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("RPGSpark", 0, 0, 0, Random(-16,16), Random(-16,16), Random(-16,16), random(-180,180), SXF_CLIENTSIDE, 0)
			64P1 AA 0 A_SpawnItemEX("RocketFire", Random(-8, 8), Random(-8, 8), Random(-8, 8), Random(-4, 4), Random(-4, 4), Random(-4, 4), Random(-360, 360), 128, 0)
			64P1 ABCDEFGHIJK 1 BRIGHT A_SpawnItemEX("RocketFire", Random(-8, 8), Random(-8, 8), Random(-8, 8), Random(-3, 3), Random(-3, 3), Random(-3, 3), Random(-360, 360), 128, 0)
			64P1 LMNOPQRSTUVWXYZ 1 bright
			stop
	}
}

actor MiniDukeExplode
{
  Height 1
  Radius 1
  Speed 0
  RenderStyle Add
  Alpha 1.0
  Scale 0.2
  Projectile
  -MISSILE
  +FORCEXYBILLBOARD
  States
  {
   Spawn:
	DEXP ABCDEFGHIJKLMNOPQRSTU 1 BRIGHT
	stop
  }
}


actor DukeDevastatorRocket : ProtonTorpedo
{
	Speed 50
	Damage 5
	Radius 8
	Height 8
	obituary "%o was devastated by %k"
	SeeSound ""
	DeathSound ""
	RenderStyle Normal
	Decal "PlasmaScorchLower"
	Alpha 1.0
	Scale 0.3
	+EXTREMEDEATH
	+BLOODSPLATTER
	States
	{
		Spawn:
			RPGM A 0 BRIGHT
			RPGM A 0 ThrustThingZ(0, Random(0,5), Random(0,1), 1)
			RPGM A 1 BRIGHT
			goto Spawn+2
		XDeath:
			TNT1 A 0
			TNT1 A 0 A_GiveToTarget("HitConfirmation", 1)
			goto Death
		Death:
			NULL A 0
			NULL A 0 radius_quake(2, 8, 0, 1, 0)
			NULL A 0 A_PlaySoundEx ("TechPlasmaSuperBoom", "Auto", 0, 0.4)
			NULL A 0 A_Explode(18, 32)
			NULL AAAAAAAAA 0 A_SpawnItemEx("RPGSpark", Random(-4,8), Random(-4,8), Random(-4,8), Random(-6,6), Random(-6,6), Random(-6,6), random(-180,180), 128, 0)
			NULL A 1 A_SpawnItemEx("MiniDukeExplode", 0, 0, -8, 0, 0, 0, 0, 128, 0)
			NULL A 4
			NULL A 3
			stop
	}
}

actor DevastatorCheck : Inventory
{
  inventory.amount 1
  inventory.maxamount 1
  -INVBAR
  -INTERHUBSTRIP
  +INVENTORY.UNDROPPABLE
  +INVENTORY.HUBPOWER
  states
  {
  Spawn:
	TNT1 A 1
	loop
  }
}

ACTOR HellFireCannon : FighterWeapon 21002
{
   Inventory.PickUpSound "misc/w_pkup"
   Inventory.PickupMessage "You got the Hellfire Cannon!"
   Weapon.AmmoType "HellFireAmmo"
   Weapon.AmmoGive 16
   Weapon.AmmoUse 1
   Weapon.Kickback 200
   Scale 0.72
   States
   {
   Spawn:
	  HLLP A 1
	  Loop
   Ready:
	  HELG A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeReady")
	  HELG A 1 A_WeaponReady
	  goto Ready+1
   Deselect:
	  HELG A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeDeselect")
	  HELG A 1 A_Lower
	  goto Deselect+1
   Select:
	  HELG A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeSelect")
	  HELG A 1 A_Raise
	  goto Select+1
   Fire:
	  HELG A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeFire")
	  HELG A 0 A_Playsound("Hellfire")
	  HELG A 12
	  HELG B 1 BRIGHT A_FireCustomMissile("HellFireRocketHi",20, 1, 0, -3)
	  HELG B 1 BRIGHT A_FireCustomMissile("HellFireRocketHiLo",12, 1, 0, -3)
	  HELG C 1 BRIGHT A_FireCustomMissile("HellFireRocketMid",5, 1, 0, -3)
	  HELG C 1 BRIGHT A_FireCustomMissile("HellFireRocketMidLo",-5, 1, 0, -3)
	  HELG D 1 BRIGHT A_FireCustomMissile("HellFireRocketLow",-12, 1, 0, -3)
	  HELG D 1 BRIGHT A_FireCustomMissile("HellFireRocketLowLo",-20, 1, 0, -3)
	  HELG A 18
	  HELG A 4 A_Refire
	  Goto Ready
   DukeSelect:
	  DEVS A 1 A_Raise
	  loop
   DukeDeselect:
	  DEVS A 1 A_Lower
	  loop
   DukeReady:
	  DEVS A 1 A_WeaponReady
	  loop
   DukeFire:
	 DEVS B 0 A_JumpIfInventory("DevastatorCheck", 1, "DukeFire2")
	 DEVS B 0 Radius_Quake(2, 3, 0, 1, 0)
	 DEVS B 0 BRIGHT A_PlayWeaponSound("DevastatorRight")
	 DEVS B 1 BRIGHT A_FireCustomMissile("DukeDevastatorRocket",random(4,-4),1,12,0)
	 DEVS C 2 BRIGHT A_FireCustomMissile("DukeDevastatorRocket",random(4,-4),1,12,0)
	 DEVS A 5 A_GiveInventory("DevastatorCheck", 1)
	 DEVS A 0 A_ReFire
	 goto DukeReady
   DukeFire2:
	 DEVS D 0 Radius_Quake(2, 3, 0, 1, 0)
	 DEVS D 0 BRIGHT A_PlayWeaponSound("DevastatorLeft")
	 DEVS D 1 BRIGHT A_FireCustomMissile("DukeDevastatorRocket",random(4,-4),1,-12,0)
	 DEVS E 2 BRIGHT A_FireCustomMissile("DukeDevastatorRocket",random(4,-4),1,-12,0)
	 DEVS A 5 A_TakeInventory("DevastatorCheck", 999)
	 DEVS A 0 A_ReFire
	 Goto DukeReady
   }
}

actor HellfireRocketFire
{
 Height 1
 Radius 1
 Speed 3
 RenderStyle Add
 Scale 0.42
 Alpha 0.9
 +NOGRAVITY
 +FORCEXYBILLBOARD
 States
 {
 Spawn:
 64PE A 1 BRIGHT
 64PE B 1 BRIGHT
 64PE CDE 1 BRIGHT A_FadeOut
 stop
 }
}

actor HellFireRocketHi
{
  radius 11
  height 8
  speed 17
  damage 4
  Scale 0.5
  Seesound "IpodLaunch"
  deathsound "TechPlasmaSuperBoom"
  Obituary "%o couldn't hide from %k's hellfire mini-rockets!"
  PROJECTILE
  +SEEKERMISSILE
  +RANDOMIZE
  +FORCEXYBILLBOARD
  states
  {
  Spawn:
	DEVM A 0
	DEVM A 0 ThrustThingZ(0, random(0,6), random(0,1), 1)
	DEVM A 10 Bright A_PlaySoundEx("HellFly", SoundSlot7, 1)
	DEVM A 0 Bright A_PlaySoundEx("HellFly", SoundSlot7, 1)
	DEVM AAAAAAAAAAAAAAAAAAAAAAA 2 bright A_Tracer2
	goto Spawn+3
  XDeath:
	TNT1 A 0
	TNT1 A 0 A_GiveToTarget("HitConfirmation", 1)
	goto Death
  Death:
	MISL B 0 A_StopSoundEx("SoundSlot7")
	MISL B 0 A_SetTranslucent(0.9, 1)
	MISL BBBBBBBB 0 A_SpawnItemEx("HellfireRocketFire", Random(-10,10), Random(-10,10), Random(-10,10), Random(-6,6), Random(-6,6), Random(-6,6), random(-360,360), 128, 0)
	MISL B 1 bright A_Explode(4,64,1)
	MISL C 1 bright
	MISL D 1 bright
	stop
  }
}

actor HellFireRocketHiLo : HellfireRocketHi
{
  speed 16
  damage 5
  states
  {
  Death:
	MISL B 0 A_StopSoundEx("SoundSlot7")
	MISL B 0 A_SetTranslucent(0.9, 1)
	MISL BBBBBBBB 0 A_SpawnItemEx("HellfireRocketFire", Random(-10,10), Random(-10,10), Random(-10,10), Random(-6,6), Random(-6,6), Random(-6,6), random(-360,360), 128, 0)
	MISL B 1 bright A_Explode(5,64,1)
	MISL C 1 bright
	MISL D 1 bright
	stop
  }
}


actor HellFireRocketMid : HellfireRocketHi
{
  speed 15
  damage 6
  states
  {
  Death:
	MISL B 0 A_StopSoundEx("SoundSlot7")
	MISL B 0 A_SetTranslucent(0.9, 1)
	MISL BBBBBBBB 0 A_SpawnItemEx("HellfireRocketFire", Random(-10,10), Random(-10,10), Random(-10,10), Random(-6,6), Random(-6,6), Random(-6,6), random(-360,360), 128, 0)
	MISL B 1 bright A_Explode(6,64,1)
	MISL C 1 bright
	MISL D 1 bright
	stop
  }
}

actor HellFireRocketMidLo : HellfireRocketHi
{
  speed 14
  damage 8
  states
  {
  Death:
	MISL B 0 A_StopSoundEx("SoundSlot7")
	MISL B 0 A_SetTranslucent(0.9, 1)
	MISL BBBBBBBB 0 A_SpawnItemEx("HellfireRocketFire", Random(-10,10), Random(-10,10), Random(-10,10), Random(-6,6), Random(-6,6), Random(-6,6), random(-360,360), 128, 0)
	MISL B 1 bright A_Explode(8,64,1)
	MISL C 1 bright
	MISL D 1 bright
	stop
  }
}

actor HellFireRocketLow : HellfireRocketHi
{
  speed 13
  damage 10
  states
  {
  Death:
	MISL B 0 A_StopSoundEx("SoundSlot7")
	MISL B 0 A_SetTranslucent(0.9, 1)
	MISL BBBBBBBB 0 A_SpawnItemEx("HellfireRocketFire", Random(-10,10), Random(-10,10), Random(-10,10), Random(-6,6), Random(-6,6), Random(-6,6), random(-360,360), 128, 0)
	MISL B 1 bright A_Explode(12,66,1)
	MISL C 1 bright
	MISL D 1 bright
	stop
  }
}

actor HellFireRocketLowLo : HellfireRocketHi
{
  speed 12
  damage 12
  states
  {
  Death:
	MISL B 0 A_StopSoundEx("SoundSlot7")
	MISL B 0 A_SetTranslucent(0.9, 1)
	MISL BBBBBBBB 0 A_SpawnItemEx("HellfireRocketFire", Random(-10,10), Random(-10,10), Random(-10,10), Random(-6,6), Random(-6,6), Random(-6,6), random(-360,360), 128, 0)
	MISL B 1 bright A_Explode(7,68,1)
	MISL C 1 bright
	MISL D 1 bright
	stop
  }
}

actor IPod : PlasmaBall
{
	renderstyle Normal
	-NOGRAVITY
	+LOWGRAVITY
	+HEXENBOUNCE
	obituary "%o swallowed %k's IPod."
	Damage 6
	Seesound "IpodBounce"
	Scale 0.08
	ReactionTime 80
	BounceCount 6
	States
	{
	Spawn:
		IPOD ABCDEFGHIJKLMNOP 2 A_CountDown
		loop
	XDeath:
		TNT1 A 0
		TNT1 A 0 A_GiveToTarget("HitConfirmation", 1)
		goto Death
	Death:
		TNT1 A 0
		TNT1 A 1 A_SpawnItemEx("IpodExplosion", 0, 0, 0, 0, 0, 0, 0, 128, 0)
		stop
	}
}

actor IPodExplosion
{
	renderstyle Add
	Alpha 0.9
	Projectile
	Scale 0.5
	+NOCLIP
	+NOGRAVITY
	+FORCEXYBILLBOARD
	States
	{
	Spawn:
		IPE1 ABCDEF 3 BRIGHT
		stop
	}
}

actor IpodExplosionBig : IPodExplosion
{
	scale 1.0
	+FORCEXYBILLBOARD
	States
	{
	Spawn:
		IPE1 ABCDEF 5 BRIGHT
		stop
	}
}

actor GiantIpod : PlasmaBall
{
	renderstyle Normal
	-NOGRAVITY
	+LOWGRAVITY
	+FORCEXYBILLBOARD
	obituary "%k squashed %o with a Giant Ipod."
	Damage 30
	Speed 10
	Seesound "IpodBounce"
	Deathsound "IPodExplosion"
	Scale 0.2
	States
	{
	Spawn:
		IPOD A 0
		IPOD A 0 ThrustThingZ(0, 10, 0, 1)
		IPOD ABCDEFGHIJKLMNOP 2
		goto Spawn+2
	XDeath:
		TNT1 A 0
		TNT1 A 0 A_GiveToTarget("HitConfirmation", 1)
		goto Death
	Death:
		TNT1 A 0
		TNT1 A 1 A_SpawnItemEx("IpodExplosionBig", 0, 0, 0, 0, 0, 0, 0, 128, 0)
		TNT1 A 2
		TNT1 A 0 BRIGHT A_SpawnItemEx("Ipod", 46, 0, 32, Random(2, 8), 0, Random(1, 10), 0, 0, 0)
		TNT1 A 0 BRIGHT A_SpawnItemEx("Ipod", 0, 46, 32, 0, Random(2, 8), Random(1, 10), 0, 0, 0)
		TNT1 A 0 BRIGHT A_SpawnItemEx("Ipod", -46, 0, 32, Random(-2, -8), 0, Random(1, 10), 0, 0, 0)
		TNT1 A 0 BRIGHT A_SpawnItemEx("Ipod", 0, -46, 32, 0, Random(-2, -8), Random(1, 10), 0, 0, 0)
		TNT1 A 0 BRIGHT A_SpawnItemEx("Ipod", 46, 0, 32, Random(2, 8), 0, Random(1, 10), 0, 0, 0)
		TNT1 A 0 BRIGHT A_SpawnItemEx("Ipod", 0, 46, 32, 0, Random(2, 8), Random(1, 10), 0, 0, 0)
		stop
	}
}

ACTOR BulletCasing
{
   +NOTELEPORT
   +DONTSPLASH
   -NOBLOCKMAP
   Height 12
   Radius 9
   Speed 5
   Gravity 0.6
   Scale 0.08
   Reactiontime 600
   BounceCount 4
   +DOOMBOUNCE
   +MISSILE
   -NOGRAVITY
   -NOLIFTDROP
   -ACTIVATEPCROSS
   -ACTIVATEIMPACT
   +FORCEXYBILLBOARD
   SeeSound "BulletCasing"
   States
   {
   Spawn:
	  TNT1 A 0
	  TNT1 A 0 A_StopSound
	  PBUL A 0 ThrustThingZ(0, Random(6, 16), 0, 1)
	  PBUL ABCDEF 1 A_CountDown
	  Goto Spawn+3
   Death:
	  PBUL A 0 A_Jump(32,8)
	  PBUL A 0 A_Jump(37,8)
	  PBUL A 0 A_Jump(43,8)
	  PBUL A 0 A_Jump(51,8)
	  PBUL A 0 A_Jump(64,8)
	  PBUL A 0 A_Jump(85,8)
	  PBUL A 0 A_Jump(128,8)
	  PBUL A 110
	  Stop
	  PBUL B 160
	  Stop
	  PBUL D 100
	  Stop
	  PBUL B 320
	  Stop
	  PBUL D 128
	  Stop
	  PBUL D 100
	  Stop
	  PBUL D 200
	  Stop
	  PBUL B 300
	  Stop
   }
}

ACTOR SilverBulletCasing
{
   +NOTELEPORT
   +DONTSPLASH
   -NOBLOCKMAP
   Height 12
   Radius 9
   Speed 5
   Gravity 0.6
   Scale 0.08
   Reactiontime 600
   BounceCount 4
   +DOOMBOUNCE
   +MISSILE
   -NOGRAVITY
   -NOLIFTDROP
   -ACTIVATEPCROSS
   -ACTIVATEIMPACT
   +FORCEXYBILLBOARD
   SeeSound "BulletCasing"
   States
   {
   Spawn:
	  TNT1 A 0
	  TNT1 A 0 A_StopSound
	  MBUL A 0 ThrustThingZ(0, Random(6, 16), 0, 1)
	  MBUL ABCDEF 1 A_CountDown
	  Goto Spawn+3
   Death:
	  MBUL A 0 A_Jump(32,8)
	  MBUL A 0 A_Jump(37,8)
	  MBUL A 0 A_Jump(43,8)
	  MBUL A 0 A_Jump(51,8)
	  MBUL A 0 A_Jump(64,8)
	  MBUL A 0 A_Jump(85,8)
	  MBUL A 0 A_Jump(128,8)
	  MBUL A 110
	  Stop
	  MBUL B 160
	  Stop
	  MBUL D 100
	  Stop
	  MBUL B 320
	  Stop
	  MBUL D 128
	  Stop
	  MBUL D 100
	  Stop
	  MBUL D 200
	  Stop
	  MBUL B 300
	  Stop
   }
}

actor RepeaterCasingSmoke
{
  Height 1
  Radius 1
  Speed 0
  Damage 0
  RenderStyle Add
  Alpha 0.7
  Scale 0.2
  +NOGRAVITY
  +NOBLOCKMAP
  +CLIENTSIDEONLY
  +FORCEXYBILLBOARD
  +DONTSPLASH
  +NOCLIP
  States
  {
   Death:
   Spawn:
	SMK2 A 1 BRIGHT
	SMK2 A 1 BRIGHT A_FadeOut(0.04)
	goto Spawn+1
  }
}

actor RepeaterCasing : SilverBulletCasing
{
	SeeSound ""
	DeathSound "RepeaterCasing"
	-DOOMBOUNCE
	Translation "80:111=176:191"
	States
	{
	Spawn:
	  TNT1 A 0
	  MBUL A 0 ThrustThingZ(0, Random(6, 20), 0, 1)
	  MBUL ABCDEF 1 BRIGHT
	  Goto Spawn+2
   Death:
	  TNT1 AAAAA 0 A_SpawnItemEx("RepeaterCasingSmoke", 0, 0, 0, Random(-1,1), Random(-1,1), Random(-1,1), 0, 128, 0)
	  TNT1 A 1
	  stop
	}
}

ACTOR PistolClip : Ammo
{
	Inventory.MaxAmount 14 // size of the clip
	Ammo.BackpackAmount 0
	Ammo.BackpackMaxAmount 14 //MUST be the same as Inventory.MaxAmmount
	Inventory.Icon "MAGICON2"
	+IGNORESKILL
}

ACTOR PistolAccuracy : Inventory
{
   Inventory.Amount 1
   Inventory.MaxAmount 8
   -INVBAR
}

actor UnSilenced : Inventory
{
  inventory.amount 1
  inventory.maxamount 1
  -INVBAR
  -INTERHUBSTRIP
  +INVENTORY.UNDROPPABLE
  +INVENTORY.HUBPOWER
  states
  {
  Spawn:
	TNT1 A 1
	loop
  }
}

actor Silenced : Inventory
{
  inventory.amount 1
  inventory.maxamount 1
  -INVBAR
  -INTERHUBSTRIP
  +INVENTORY.UNDROPPABLE
  +INVENTORY.HUBPOWER
  states
  {
  Spawn:
	TNT1 A 1
	loop
  }
}

actor Silencer : CustomInventory
{
  inventory.pickupmessage "Silencer (Shouldn't have been able to pick this up asshole!)"
  inventory.pickupsound "misc/p_pkup"
  inventory.icon ARTISILE
  inventory.amount 2
  inventory.maxamount 2
  inventory.usesound "SilencerToggle"
  +COUNTITEM
  +INVENTORY.UNDROPPABLE
  -INVENTORY.INTERHUBSTRIP
  +INVBAR
  states
  {
  Spawn:
	TNT1 A -1
	stop
  Use:
	TNT1 A 0 A_Jumpifinventory("Silenced", 1, "SilencerOFF")
	TNT1 A 0
	goto SilencerON
  SilencerON:
	TNT1 A 0 A_TakeInventory("UnSilenced", 255)
	TNT1 A 0 A_GiveInventory ("Silenced", 1)
	TNT1 A 0 A_GiveInventory("Silencer", 1)
	TNT1 A 0 A_Print("Silencer ON")
	stop
  SilencerOFF:
	TNT1 A 0 A_TakeInventory("Silenced", 255)
	TNT1 A 0 A_GiveInventory("UnSilenced",1)
	TNT1 A 0 A_GiveInventory("Silencer", 1)
	TNT1 A 0 A_Print("Silencer OFF")
	stop
  }
}

ACTOR ShellCasing
{
   +NOTELEPORT
   +DONTSPLASH
   -NOBLOCKMAP
   Height 12
   Radius 9
   Speed 4
   Gravity 0.5
   Scale 0.20
   BounceCount 4
   SeeSound "ShellCasing"
   PROJECTILE
   ReactionTime 25
   +DOOMBOUNCE
   +CLIENTSIDEONLY
   -NOGRAVITY
   -NOLIFTDROP
   -ACTIVATEPCROSS
   -ACTIVATEIMPACT
   +FORCEXYBILLBOARD
   States
   {
   Spawn:
	  12CA A 0
	  12CA A 1 A_StopSound
	  12CA A 0 ThrustThingZ(0, Random(6, 16), 0, 1)
	  12CA A 3 A_CountDown
	  12CA ABCDEFGH 1
	  Goto Spawn+4
   Death:
	  12CA A 0 A_Jump(50,3)
	  12CA A 0 A_Jump(50,3)
	  12CA A 100
	  Stop
	  12CA G 200
	  Stop
	  12CA E 200
	  Stop
   }
}

actor BulletCasingSpawnerLeft
{
	Projectile
	+NOGRAVITY
	+NOCLIP
	+CLIENTSIDEONLY
	Speed 5
	States
	{
		Spawn:
		TNT1 A 0
		TNT1 A 1 A_SpawnItemEx("BulletCasing", 0, 6, 0, momx, momy, momz, 0, SXF_CLIENTSIDE | SXF_ABSOLUTEMOMENTUM, 0)
		stop
	}
}

actor SilverBulletCasingSpawnerLeft : BulletCasingSpawnerLeft
{
	States
	{
		Spawn:
		TNT1 A 0
		TNT1 A 1 A_SpawnItemEx("SilverBulletCasing", 0, 6, 0, momx, momy, momz, 0, SXF_CLIENTSIDE | SXF_ABSOLUTEMOMENTUM, 0)
		stop
	}
}

actor ShellCasingSpawnerLeft : BulletCasingSpawnerLeft
{
	Speed 4
	States
	{
		Spawn:
		TNT1 A 0
		TNT1 A 1 A_SpawnItemEx("ShellCasing", 0, 6, 0, momx, momy, momz, 0, SXF_CLIENTSIDE | SXF_ABSOLUTEMOMENTUM, 0)
		stop
	}
}

actor RepeaterCasingSpawnerLeft : BulletCasingSpawnerLeft
{
	Speed 4
	States
	{
		Spawn:
		TNT1 A 0
		TNT1 A 1 A_SpawnItemEx("RepeaterCasing", 0, 6, 0, momx, momy, momz, 0, SXF_CLIENTSIDE | SXF_ABSOLUTEMOMENTUM, 0)
		stop
	}
}

actor BulletCasingSpawnerRight : BulletCasingSpawnerLeft
{
	States
	{
		Spawn:
		TNT1 A 0
		TNT1 A 1 A_SpawnItemEx("BulletCasing", 0, -6, 0, momx, momy, momz, 0, SXF_CLIENTSIDE | SXF_ABSOLUTEMOMENTUM, 0)
		stop
	}
}

actor SilverBulletCasingSpawnerRight : BulletCasingSpawnerLeft
{
	States
	{
		Spawn:
		TNT1 A 0
		TNT1 A 1 A_SpawnItemEx("SilverBulletCasing", 0, -6, 0, momx, momy, momz, 0, SXF_CLIENTSIDE | SXF_ABSOLUTEMOMENTUM, 0)
		stop
	}
}

actor ShellCasingSpawnerRight : BulletCasingSpawnerLeft
{
	Speed 4
	States
	{
		Spawn:
		TNT1 A 0
		TNT1 A 1 A_SpawnItemEx("ShellCasing", 0, -6, 0, momx, momy, momz, 0, SXF_CLIENTSIDE | SXF_ABSOLUTEMOMENTUM, 0)
		stop
	}
}

actor RepeaterCasingSpawnerRight : BulletCasingSpawnerLeft
{
	Speed 4
	States
	{
		Spawn:
		TNT1 A 0
		TNT1 A 1 A_SpawnItemEx("RepeaterCasing", 0, -6, 0, momx, momy, momz, 0, SXF_CLIENTSIDE | SXF_ABSOLUTEMOMENTUM, 0)
		stop
	}
}

Actor PistolSmoke
{
	Projectile
	Radius 1
	Height 1
	Speed  5
	RenderStyle Translucent
	Alpha 0.1
	Scale 0.07
	+DONTSPLASH
	-ACTIVATEPCROSS
	-ACTIVATEIMPACT
	+FORCEXYBILLBOARD
	+CANBOUNCEWATER
	+HEXENBOUNCE
	+CLIENTSIDEONLY
	+ALLOWCLIENTSPAWN
	+NOBLOCKMAP
	+NOGRAVITY
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 3 ThrustThingZ(0, Random(0, 1), Random(0,1), 1)
		SMO2 ABCDEFGHIJKLMNOPQ 2
		stop
	Death:
		TNT1 AA 1
		stop
	}
}

actor NewPistol : ClericWeapon Replaces Pistol
{
  Decal BulletChip
  obituary "%o was pistol-raped by %k."
  Inventory.PickupSound "misc/w_pkup"
  Inventory.PickupMessage "Picked up a 9mm!"
  Weapon.AmmoType1 "PistolClip"
  Weapon.AmmoType2 "MechAmmo"
  Weapon.AmmoGive1 0
  Weapon.AmmoGive2 0
  Weapon.AmmoUse1 1
  weapon.selectionorder 1900
  +WEAPON.WIMPY_WEAPON
  +WEAPON.NOAUTOFIRE
  +WEAPON.AMMO_OPTIONAL
  +WEAPON.NOALERT
  states
  {
  Ready:
	PISG A 0 A_WeaponReady
	goto ReloadCheck
	PISG A 0 A_JumpIfInventory("Silenced", 1, "SilReady")
	PISG AAA 1 A_WeaponReady
	PISG A 0 A_TakeInventory("PistolAccuracy", 1)
	goto Ready+1
   SilReady:
	PISS A 0 A_JumpIfInventory("UnSilenced", 1, "Ready")
	PISS AAA 1 A_WeaponReady
	PISS A 0 A_TakeInventory("PistolAccuracy", 1)
	loop
  Deselect:
	PISG A 0 A_TakeInventory("PistolAccuracy", 50)
	PISG A 0 A_JumpIfInventory("Silenced", 1, "SilDeselect")
	PISG A 1 A_Lower
	goto Deselect+2
  SilDeselect:
	PISS A 1 A_Lower
	loop
  Select:
	PISG A 0 A_JumpIfInventory("Silenced", 1, "SilSelect")
	PISG A 1 A_Raise
	goto Select+1
  SilSelect:
	PISS A 1 A_Raise
	loop
  Fire:
	PISG B 0 A_JumpIfInventory("Silenced", 1, "SilFire")
	PISG B 0 A_JumpIfNoAmmo("ReloadCheck")
	PISG B 0 Radius_Quake(2, 2, 0, 1, 0)
	PISG B 0 BRIGHT A_Gunflash
	PISG B 0 BRIGHT A_AlertMonsters
	PISG B 0 A_PlayWeaponSound("weapons/pistol")
	PISG BBBB 0 A_FireCustomMissile("PistolSmoke", Random(-3,3), 0, 3, 7)
	PISG BBBBBB 0 A_FireCustomMissile("GunSpark", Random(-6,6), 0, 3, 6)
	PISG B 0 A_JumpIfInventory("PistolAccuracy", 8, "FireAccuracy8")
	PISG B 0 A_JumpIfInventory("PistolAccuracy", 7, "FireAccuracy7")
	PISG B 0 A_JumpIfInventory("PistolAccuracy", 6, "FireAccuracy6")
	PISG B 0 A_JumpIfInventory("PistolAccuracy", 5, "FireAccuracy5")
	PISG B 0 A_JumpIfInventory("PistolAccuracy", 4, "FireAccuracy4")
	PISG B 0 A_JumpIfInventory("PistolAccuracy", 3, "FireAccuracy3")
	PISG B 0 A_JumpIfInventory("PistolAccuracy", 2, "FireAccuracy2")
	PISG B 0 A_JumpIfInventory("PistolAccuracy", 1, "FireAccuracy1")
	goto FireAccuracy0
  SilFire:
	PISS B 0 A_JumpIfNoAmmo("SilReloadCheck")
	PISG B 0 Radius_Quake(1, 2, 0, 1, 0)
	PISS B 0 BRIGHT
	PISS B 0 A_PlaySoundEX("SilencedPistol", "Weapon", 0, -1)
	PISS B 0 A_JumpIfInventory("PistolAccuracy", 8, "SilFireAccuracy8")
	PISS B 0 A_JumpIfInventory("PistolAccuracy", 7, "SilFireAccuracy7")
	PISS B 0 A_JumpIfInventory("PistolAccuracy", 6, "SilFireAccuracy6")
	PISS B 0 A_JumpIfInventory("PistolAccuracy", 5, "SilFireAccuracy5")
	PISS B 0 A_JumpIfInventory("PistolAccuracy", 4, "SilFireAccuracy4")
	PISS B 0 A_JumpIfInventory("PistolAccuracy", 3, "SilFireAccuracy3")
	PISS B 0 A_JumpIfInventory("PistolAccuracy", 2, "SilFireAccuracy2")
	PISS B 0 A_JumpIfInventory("PistolAccuracy", 1, "SilFireAccuracy1")
	goto SilFireAccuracy0

  FireAccuracy0:
	PISG B 2 BRIGHT A_FireBullets (1, 0, -1, 7, "NewBulletPuff")
	goto FireDone
  SilFireAccuracy0:
	PISS B 2 BRIGHT A_FireBullets (0, 0, -1, 6, "NewBulletPuff")
	goto SilFireDone

  FireAccuracy1:
	PISG B 2 BRIGHT A_FireBullets (1, 1.2, -1, 6, "NewBulletPuff")
	goto FireDone
  SilFireAccuracy1:
	PISS B 2 BRIGHT A_FireBullets (1, 1, -1, 5, "NewBulletPuff")
	goto SilFireDone

  FireAccuracy2:
	PISG B 2 BRIGHT A_FireBullets (2, 1.5, -1, 6, "NewBulletPuff")
	goto FireDone
  SilFireAccuracy2:
	PISS B 2 BRIGHT A_FireBullets (1, 1.5, -1, 5, "NewBulletPuff")
	goto SilFireDone

  FireAccuracy3:
	PISG B 2 BRIGHT A_FireBullets (2, 2, -1, 6, "NewBulletPuff")
	goto FireDone
  SilFireAccuracy3:
	PISS B 2 BRIGHT A_FireBullets (2, 1.5, -1, 5, "NewBulletPuff")
	goto SilFireDone

  FireAccuracy4:
	PISG B 2 BRIGHT A_FireBullets (2, 2.2, -1, 6, "NewBulletPuff")
	goto FireDone
  SilFireAccuracy4:
	PISS B 2 BRIGHT A_FireBullets (2, 1.8, -1, 5, "NewBulletPuff")
	goto SilFireDone

  FireAccuracy5:
	PISG B 2 BRIGHT A_FireBullets (2, 2.5, -1, 6, "NewBulletPuff")
	goto FireDone
  SilFireAccuracy5:
	PISS B 2 BRIGHT A_FireBullets (2, 2, -1, 5, "NewBulletPuff")
	goto SilFireDone

  FireAccuracy6:
	PISG B 2 BRIGHT A_FireBullets (3, 3, -1, 6, "NewBulletPuff")
	goto FireDone
  SilFireAccuracy6:
	PISS B 2 BRIGHT A_FireBullets (2.5, 2, -1, 5, "NewBulletPuff")
	goto SilFireDone

  FireAccuracy7:
	PISG B 2 BRIGHT A_FireBullets (3, 3.2, -1, 6, "NewBulletPuff")
	goto FireDone
  SilFireAccuracy7:
	PISS B 2 BRIGHT A_FireBullets (2.5, 2.5, -1, 5, "NewBulletPuff")
	goto SilFireDone

 FireAccuracy8:
	PISG B 2 BRIGHT A_FireBullets (3, 3.5, -1, 6, "NewBulletPuff")
	goto FireDone
 SilFireAccuracy8:
	PISS B 2 BRIGHT A_FireBullets (2.8, 2.8, -1, 5, "NewBulletPuff")
	goto SilFireDone

  FireDone:
  	PISG C 0 A_GiveInventory("PistolAccuracy", 1)
	PISG C 0 A_FireCustomMissile("BulletCasingSpawnerRight",-45+random(-8,8),0,4,7)
	PISG C 2 BRIGHT
	PISG A 3 A_WeaponReady
	PISG A 0 A_TakeInventory("PistolAccuracy", 1)
	PISG A 3 A_WeaponReady
	PISG A 0 A_TakeInventory("PistolAccuracy", 1)
	PISG A 3 A_WeaponReady
	PISG A 0 A_TakeInventory("PistolAccuracy", 2)
	PISG A 0 A_Refire
	goto Ready+1
  SilFireDone:
	PISS C 0 A_GiveInventory("PistolAccuracy", 1)
	PISS C 0 A_FireCustomMissile("BulletCasingSpawnerRight",-45+random(-8,8),0,4,7)
	PISS C 2 BRIGHT
	PISS A 3 A_WeaponReady
	PISS A 0 A_TakeInventory("PistolAccuracy", 1)
	PISS A 3 A_WeaponReady
	PISS A 0 A_TakeInventory("PistolAccuracy", 1)
	PISS A 3 A_WeaponReady
	PISS A 0 A_TakeInventory("PistolAccuracy", 2)
	PISS A 0 A_Refire
	goto Ready+1

  Altfire:
	PISG A 0 A_JumpIfInventory("Silenced", 1, "SilReloadCheck")
	PISG A 0
	goto ReloadCheck

  ReloadCheck:
	PISG D 0 A_JumpIfInventory("Silenced", 1, "SilReloadCheck")
	PISG D 0 A_JumpIfInventory("PistolClip",14,2)
	PISG D 0 A_JumpIfInventory("MechAmmo",1,"ReloadStart")
	PISG D 0
	goto Ready+1
  SilReloadCheck:
	PISS D 0 A_JumpIfInventory("PistolClip",14,2)
	PISS D 0 A_JumpIfInventory("MechAmmo",1,"SilReloadStart")
	PISS D 0
	goto Ready+1

  ReloadStart:
	PISG D 0 A_PlaySoundEx("9mmClipOut", "Auto", 0)
	PISG DEFGHIJK 3
	PISG L 3 A_PlayWeaponSound("9mmClipIn")
	PISG M 3 A_TakeInventory("PistolAccuracy", 2)
	goto ReloadAmmo
  SilReloadStart:
	PISS D 0 A_PlayWeaponSound("9mmClipOut")
	PISS DEFGHIJK 3
	PISS L 3 A_PlayWeaponSound("9mmClipIn")
	PISS M 3 A_TakeInventory("PistolAccuracy", 2)
	goto SilReloadAmmo

  ReloadAmmo:
	NULL A 0 A_TakeInventory("MechAmmo",1)
	NULL A 0 A_GiveInventory("PistolClip",1)
	NULL A 0 A_JumpIfInventory("PistolClip",14,"ReloadDone")
	NULL A 0 A_JumpIfInventory("MechAmmo",1,"ReloadAmmo")
	goto ReloadDone
  SilReloadAmmo:
	NULL A 0 A_TakeInventory("MechAmmo",1)
	NULL A 0 A_GiveInventory("PistolClip",1)
	NULL A 0 A_JumpIfInventory("PistolClip",14,"SilReloadDone")
	NULL A 0 A_JumpIfInventory("MechAmmo",1,"SilReloadAmmo")
	goto SilReloadDone

  ReloadDone:
	PISG NO 3
	PISG P 3 A_PlayWeaponSound("9mmSlide")
	PISG QR 3
	PISG STUV 2
	goto Ready+1
  SilReloadDone:
	PISS NO 3
	PISS P 3 A_PlayWeaponSound("9mmSlide")
	PISS QR 3
	PISS STUV 2
	goto SilReady

  Flash:
	PISF A 1 bright A_Light2
	PISF B 1 bright A_Light1
	TNT1 A 0 bright A_Light0
	stop
  }
}

actor Duke64BulletPuff : NewBulletPuff
{
	obituary "%k tore %o a new anus."
}

ACTOR Duke64Clip : Ammo
{
	Inventory.MaxAmount 14 // size of the clip
	Ammo.BackpackAmount 0
	Ammo.BackpackMaxAmount 14 //MUST be the same as Inventory.MaxAmmount
	Inventory.Icon "MAGICON2"
	+IGNORESKILL
}

actor Mp40 : Weapon 23403
{
  decal BulletChip
  obituary "%o was perforated by %k's MP40."
  Inventory.PickupSound "misc/w_pkup"
  Inventory.PickupMessage "Snagged an MP40!"
  weapon.selectionorder 1900
  weapon.kickback 100
  Weapon.AmmoType1 "Duke64Clip"
  Weapon.AmmoType2 "MechAmmo"
  Weapon.AmmoGive2 50
  Weapon.AmmoUse1 1
  Weapon.AmmoUse2 1
  +WEAPON.AMMO_OPTIONAL
  +WEAPON.ALT_AMMO_OPTIONAL
  Scale 0.5
  states
  {
  Spawn:
   MP4P A -1
   loop
  Ready:
	MP40 A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeReady")
	MP40 A 1 A_WeaponReady
	goto Ready+1
  Deselect:
	MP40 A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeDeselect")
	MP40 A 1 A_Lower
	goto Deselect+1
  Select:
	MP40 A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeSelect")
	MP40 A 1 A_Raise
	goto Select+1
  Empty:
	MP40 A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeEmpty")
	MP40 A 7 A_PlaySound("WeaponEmpty")
	MP40 A 1
	goto Ready
  Fire:
	MP40 A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeFire")
	MP40 A 0 A_JumpIfInventory("MechAmmo", 1, "Fire1")
	goto Empty
  Fire1:
	MP40 A 1
	MP40 B 0 A_PlayWeaponSound("mp40fire")
	MP40 B 0 A_FireBullets (1, 1, 1, 6, "NewBulletPuff", 0)
	MP40 B 0 A_TakeInventory("MechAmmo", 1)
	MP40 B 0 A_FireCustomMissile("BulletCasingSpawnerRight",-45+random(-8,8),0,6,6)
	MP40 B 0 radius_quake(1, 2, 0, 1, 0)
	MP40 B 0 A_Jump(127, "Fire1Alt")
	MP40 B 1 BRIGHT A_Gunflash
	goto Fire1Done
  Fire1Alt:
	MP40 C 1 BRIGHT A_Gunflash
	goto Fire1Done
  Fire1Done:
	MP40 D 1
	MP40 D 0 A_JumpIfInventory("MechAmmo", 1, "Fire2")
	goto Empty
  Fire2:
	MP40 A 1
	MP40 B 0 A_PlayWeaponSound("mp40fire")
	MP40 B 0 A_FireBullets (1, 1, 1, 6, "NewBulletPuff", 0)
	MP40 B 0 A_TakeInventory("MechAmmo", 1)
	MP40 B 0 A_FireCustomMissile("BulletCasingSpawnerRight",-45+random(-8,8),0,6,6)
	MP40 B 0 radius_quake(1, 2, 0, 1, 0)
	MP40 B 0 A_Jump(127, "Fire2Alt")
	MP40 B 1 BRIGHT A_Gunflash
	goto Fire2Done
  Fire2Alt:
	MP40 C 1 BRIGHT A_Gunflash
	goto Fire2Done
  Fire2Done:
	MP40 D 1
	MP40 D 0 A_JumpIfInventory("MechAmmo", 1, "Fire3")
	goto Empty
  Fire3:
	MP40 A 1
	MP40 B 0 A_PlayWeaponSound("mp40fire")
	MP40 B 0 A_FireBullets (1, 1, 1, 6, "NewBulletPuff", 0)
	MP40 B 0 A_TakeInventory("MechAmmo", 1)
	MP40 B 0 A_FireCustomMissile("BulletCasingSpawnerRight",-45+random(-8,8),0,6,6)
	MP40 B 0 radius_quake(1, 2, 0, 1, 0)
	MP40 B 0 A_Jump(127, "Fire3Alt")
	MP40 B 1 BRIGHT A_Gunflash
	goto Fire3Done
  Fire3Alt:
	MP40 C 1 BRIGHT A_Gunflash
	goto Fire3Done
  Fire3Done:
	MP40 D 1
	MP40 A 5
	MP40 A 1 A_ReFire
	goto Ready
  AltFire:
	MP40 A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeAltFire")
	MP40 A 0 A_JumpIfNoAmmo("Empty")
	MP40 B 0 A_PlayWeaponSound("mp40fire")
	MP40 B 0 A_FireBullets (3, 3, -1, 7, "NewBulletPuff", 0)
	MP40 B 0 A_TakeInventory("MechAmmo", 1)
	MP40 B 0 A_FireCustomMissile("BulletCasingSpawnerRight",-45+random(-8,8),0,6,6)
	MP40 B 0 radius_quake(1, 2, 0, 1, 0)
	MP40 B 0 A_Jump(127, "AltFire2")
	MP40 B 1 BRIGHT A_Gunflash
	goto AltFireDone
  AltFire2:
	MP40 C 1 BRIGHT A_Gunflash
	goto AltFireDone
  AltFireDone:
	MP40 D 2
	MP40 A 2
	MP40 A 1 A_ReFire
	goto Ready
  Flash:
	TNT1 A 1 bright A_Light1
	TNT1 A 0 bright A_Light0
	stop
  DukeReady:
	DN6P A 0 A_WeaponReady
	goto DukeAltfire
	DN6P A 1 A_WeaponReady
	goto DukeReady+1
  DukeSelect:
	DN6P A 0 A_PlayWeaponSound("Duke64ClipIn")
	DN6P A 1 A_Raise
	goto DukeSelect+1
  DukeDeselect:
	DN6P A 1 A_Lower
	loop
  DukeFire:
	DN6P B 0 A_JumpIfNoAmmo("Empty")
	DN6P B 0 A_PlayWeaponSound("Duke64PistolFire")
	DN6P B 0 A_FireBullets (2, 2, 1, 9, "Duke64BulletPuff")
	DN6P B 0 A_FireCustomMissile("BulletCasingSpawnerLeft",45+random(-8,8),0,0,6)
	DN6P B 1 BRIGHT A_Gunflash
	DN6P C 1
	DN6P A 4
	DN6P A 0 A_JumpIfNoAmmo("DukeAltFire")
	DN6P A 1 A_ReFire
	goto DukeReady+1
  DukeAltFire:
	DN6P A 0
	Goto DukeReloadCheck

  DukeReloadCheck:
	DN6P D 0 A_JumpIfInventory("Duke64Clip",14,2)
	DN6P D 0 A_JumpIfInventory("MechAmmo",1,"DukeReloadStart")
	DN6P A 0
	goto DukeReady+1

  DukeReloadStart:
	DN6P D 5 A_PlayWeaponSound("Duke64Slide")
	DN6P E 5 A_PlayWeaponSound("Duke64ClipOut")
	DN6P F 2
	DN6P E 5
	DN6P G 2
	DN6P H 2
	goto DukeReloadAmmo

  DukeReloadAmmo:
	TNT1 A 0 A_TakeInventory("MechAmmo",1)
	TNT1 A 0 A_GiveInventory("Duke64Clip",1)
	TNT1 A 0 A_JumpIfInventory("Duke64Clip",14,"DukeReloadDone")
	TNT1 A 0 A_JumpIfInventory("MechAmmo",1,"DukeReloadAmmo")
	goto DukeReloadDone

  DukeReloadDone:
	DN6P I 2 A_PlaySound("Duke64ClipIn")
	DN6P J 2 A_PlayWeaponSound("Duke64ClipLock")
	DN6P K 2
	DN6P E 2
	DN6P D 2
	goto DukeReady+1
  DukeEmpty:
	DN6P A 0
	DN6P A 7 A_PlaySound("WeaponEmpty")
	DN6P A 1
	goto Ready
  }
}

actor Piss
{
	projectile
	Radius 1
	Height 1
	Damage 0
	Speed 12
	Scale 0.5
	RenderStyle Add
	-NOGRAVITY
	+DONTSPLASH
	+FORCEXYBILLBOARD
	Translation "168:191=160:167"
	states
	{
	spawn:
		BLUD C 0
		BLUD C 0 ThrustThingZ(0, 10, 0, 1)
		BLUD CBA 5
		stop
	Death:
		TNT1 A 1
		stop
	}
}

actor E_Peen_Joke : Weapon
{
  obituary "%o was p'd on by %k"
  weapon.selectionorder 9999
  weapon.kickback 100
  Weapon.AmmoType1 "None"
  Weapon.AmmoGive 0
  Weapon.AmmoUse1 0
  +WEAPON.WIMPY_WEAPON
  +WEAPON.CHEATNOTWEAPON
  +WEAPON.NOLMS
  states
  {
  Ready:
	TNT1 A 1 A_WeaponReady
	loop
  Deselect:
	TNT1 A 1 A_Lower
	loop
  Select:
	TNT1 A 1 A_Raise
	loop
  Fire:
	TNT1 A 1 A_FireCustomMissile("Piss",Random(1,-1), 0, 0, -13)
	TNT1 A 0 A_Jump(18, 2)
	TNT1 A 1 A_ReFire
	goto Ready
	TNT1 A 0 A_Giveinventory("Health", 1)
	goto Fire+2
  Flash:
	TNT1 A 0 bright A_Light0
	stop
  }
}

ACTOR DisintegratingPlayer
{
	Radius 12
	Height 56
	Speed 0
	+NOBLOCKMAP
	+FLOORCLIP
	States
	{
	Death:
	Spawn:
		DISR ABCDEFGHIJ 6
		Stop
	}
}

actor Marine : DoomPlayer Replaces DoomPlayer
{
	Species "Player"
	-CANNOTPUSH
	+FORCERADIUSDMG
	Player.ScoreIcon "MARNICON"
	DamageFactor "Demonic", 0.5
	DamageFactor "Holy", 1.5
	DamageFactor "SpinDash", 2.25
	player.startitem "NewPistol"
	player.startitem "Melee"
	player.startitem "MechAmmo", 56
	player.startitem "PistolClip", 14
	player.startitem "Silencer", 2
	player.startitem "WrathoftheWickedSpirits"
	player.startitem "MarineClassCheck", 1
	player.startitem "SpecialMove", 2
	player.startitem "FlareCheck", 100
	States
	{
	COOPMode:
		NULL A 0
		NULL A 0 A_ChangeFlag("THRUSPECIES", 1)
		goto Spawn

	Burn:
		 BURN A 0 A_GiveToTarget("DemonicPower", 20)
		 BURN A 0 A_JumpIfInventory("Kamikaze", 1, "KamikazeDeath")
		 BURN A 0 A_Playsound("firedeath")
		 BURN A 0 A_Fall
		 BURN A 0 A_UnSetSolid
		 BURN A 0 A_UnSetShootable
		 BURN ABCDEFGHIJKLMNOPQRSTUV 4 BRIGHT
		 BURN V -1
		 stop
	Disintegrate:
		 NULL A 0 A_GiveToTarget("DemonicPower", 20)
		 NULL A 0 A_JumpIfInventory("Kamikaze", 1, "KamikazeDeath")
		 NULL A 0 A_Playsound("disintegrate")
		 NULL A 0 A_NoBlocking
		 NULL A 0 A_SpawnItemEx("DisintegratingPlayer", 0, 0, 0, 0, 0, 0, 0, 128, 0)
		 NULL A 3
		 NULL A -1
		 stop
	Missile:
		PLAY E 12
		Goto Spawn
	Melee:
		PLAY F 3 BRIGHT
		Goto Missile
	Pain:
		PLAY G 4
		PLAY G 4 A_Pain
		Goto Spawn
	Death.Fist:
		PLAY H 0 A_GiveToTarget("KnockoutTrigger", 1)
		goto Death
	Death.BlowBack:
		PLAY H 0
		PLAY H 0 ThrustThingZ(0, Random(28, 40), 0, 1)
	Death:
		PLAY H 0 A_GiveToTarget("DemonicPower", 20)
		PLAY H 0 A_JumpIfInventory("Kamikaze", 1, "KamikazeDeath")
		PLAY H 7
		PLAY I 7 A_PlayerScream
		PLAY J 7 A_NoBlocking
		PLAY KLM 7
		PLAY N -1
		Stop
	XDeath:
		PLAY O 0 A_GiveToTarget("DemonicPower", 20)
		PLAY O 0 A_GiveToTarget("SpeakOneLiner", 1)
		PLAY O 0 A_JumpIfInventory("Kamikaze", 1, "KamikazeDeath")
		PLAY O 5 A_SpawnItemEx("XDeathGibs", 0, 0, 6, MOMX, MOMY, MOMZ, 0, SXF_CLIENTSIDE | SXF_ABSOLUTEMOMENTUM, 0)
		PLAY P 5 A_XScream
		PLAY Q 5 A_NoBlocking
		PLAY RSTUV 5
		PLAY W -1
		Stop
	XDeath.Obliterate:
	Death.Obliterate:
		PLAY O 0 A_GiveToTarget("DemonicPower", 20)
		PLAY O 0 A_GiveToTarget("SpeakOneLiner", 1)
		PLAY O 0 A_JumpIfInventory("Kamikaze", 1, "KamikazeDeath")
		PLAY O 2 A_SpawnItemEx("ObliterateGibs", 0, 0, 6, MOMX, MOMY, MOMZ, 0, SXF_CLIENTSIDE | SXF_ABSOLUTEMOMENTUM, 0)
		PLAY P 2 A_XScream
		PLAY Q 2 A_NoBlocking
		PLAY RSTUV 2
		PLAY W -1
		stop
	 Death.ChaosFire:
		PLAY GG 0 A_Stop
		PLAY G 0 A_GiveToTarget("DemonicPower", 20)
		PLAY G 0 A_JumpIfInventory("Kamikaze", 1, "KamikazeDeath")
		PLAY G 5 A_PlayerScream
		PLAY G 0 A_NoBlocking
		PLAY G 0 A_SpawnItemEX("BlackFlameDeath", 0, 0, 0, 0, 0, 0, 0, 128, 0)
		PLAY GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		PLAY G 2 A_SetTranslucent(0.9, 1)
		PLAY GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		PLAY G 2 A_SetTranslucent(0.85, 1)
		PLAY GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		PLAY G 2 A_SetTranslucent(0.8, 1)
		PLAY GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		PLAY G 2 A_SetTranslucent(0.75, 1)
		PLAY GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		PLAY G 2 A_SetTranslucent(0.7, 1)
		PLAY GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		PLAY G 2 A_SetTranslucent(0.65, 1)
		PLAY GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		PLAY G 2 A_SetTranslucent(0.6, 1)
		PLAY GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		PLAY G 2 A_SetTranslucent(0.55, 1)
		PLAY GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		PLAY G 2 A_SetTranslucent(0.5, 1)
		PLAY GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		PLAY G 2 A_SetTranslucent(0.45, 1)
		PLAY GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		PLAY G 2 A_SetTranslucent(0.4, 1)
		PLAY GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		PLAY G 2 A_SetTranslucent(0.35, 1)
		PLAY GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		PLAY G 2 A_SetTranslucent(0.3, 1)
		PLAY GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		PLAY G 2 A_SetTranslucent(0.25, 1)
		PLAY GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		PLAY G 2 A_SetTranslucent(0.2, 1)
		PLAY GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		PLAY G 2 A_SetTranslucent(0.15, 1)
		PLAY GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		PLAY G 2 A_SetTranslucent(0.1, 1)
		PLAY GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		PLAY G 2 A_SetTranslucent(0.05, 1)
		PLAY GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		PLAY G 2 A_SetTranslucent(0.0, 1)
		PLAY N -1
		stop
	  Death.Ethereal:
		PLAY G 0 A_GiveToTarget("DemonicPower", 20)
		PLAY G 0 A_JumpIfInventory("Kamikaze", 1, "KamikazeDeath")
		PLAY G 1 A_PlayerScream
		PLAY G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		PLAY GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		PLAY G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		PLAY GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		PLAY G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		PLAY GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		PLAY G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		PLAY GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		PLAY G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		PLAY GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		PLAY G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		PLAY GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		PLAY G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		PLAY GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		PLAY G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		PLAY GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		PLAY G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		PLAY GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		PLAY G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		PLAY GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		PLAY G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		PLAY GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		PLAY G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		PLAY GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		PLAY G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		PLAY GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		PLAY G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		PLAY GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A -1
		stop
	  Ice:
		PLAY E 5 A_GenericFreezeDeath
		PLAY E 0 A_GiveToTarget("DemonicPower", 20)
		PLAY E 0 A_JumpIfInventory("Kamikaze", 1, "KamikazeDeath")
		PLAY E 1 A_FreezeDeathChunks
		Wait
	  Death.IceRod:
		PLAY E 1 A_GenericFreezeDeath
		PLAY E 0 A_GiveToTarget("DemonicPower", 20)
		PLAY E 0 A_JumpIfInventory("Kamikaze", 1, "KamikazeDeath")
		PLAY EEEEEE 0 A_SpawnItemEx("IceRodFog4", 0, 0, 0, random(-8,8), random(-8,8), random(-8,8), 0, 128, 0)
		PLAY E 0 A_SpawnItemEx("XDeathGibs", 0, 0, 6, MOMX, MOMY, MOMZ, 0, SXF_CLIENTSIDE | SXF_ABSOLUTEMOMENTUM, 0)
		PLAY E 1 A_IceGuyDie
		stop
	KamikazeDeath:
		PLAY O 0
		PLAY O 0 A_TakeInventory("Kamikaze", 1)
		PLAY O 0 A_SpawnItemEx("XDeathGibs", 0, 0, 6, MOMX, MOMY, MOMZ, 0, SXF_CLIENTSIDE | SXF_ABSOLUTEMOMENTUM, 0)
		PLAY O 5 A_SpawnItemEx("ScreamingKamikazeSoul", 0, 0, 8, 0, 0, 1, 0, 0, 0)
		PLAY O 5 A_SpawnItemEx("KamikazeExplode", 0, 0, 2, 0, 0, 0, 0, 0, 0)
		PLAY Q 5 A_XScream
		PLAY R 5 A_NoBlocking
		PLAY STUV 5
		PLAY W -1
		stop
	}
}

// **** Tails Class ****
// Tails sacrifices health for many powerful and
// Unique abilities. He is Resilient to Radius Damage
// And he can Fly.

// Being a Genius, He can also combine weapons
// and Integrate their technologies into his Primary Weapon.
// He is less affected by Gravity, similar to the physics in
// Sonic games. Tails is useful as a support class during
// COOP Games because of this.

// His primary weapon shoots bouncing plasma projectiles,
// and can be switched to rail mode once he picks up a
// Railgun Core. Once Upgraded to Super mode after
// Combining weapons, it fires powerful shots, while
// Still only using 1 ammo per shot, making him an efficient
// Attacker in long maps.

// During the demon attacks on mobius,
// Arch viles were constantly reviving defeated demons, so
// Tails developed a serum, called Vile's Bane, which could
// Kill an archvile instantly, without need of brute force.
// Tails starts with 5 of these at the beginning of each map
// Or, online, at each respawn. Throw them at an arch vile
// to kill them instantly. The syringes cause little damage to
// Other monsters.

// Sprites thanks to SSNTails, and the SRB2 Development Team.
// Scripting and Character Voice by StrikerMan780.

actor TailsWeaponUpgrade : CustomInventory
{
  Scale 0.80
  inventory.amount 1
  inventory.maxamount 1
  inventory.icon "TOOLICON"
  +INVBAR
  +FLOATBOB
  +NOGRAVITY
  -INTERHUBSTRIP
  +INVENTORY.UNDROPPABLE
  +INVENTORY.HUBPOWER
  states
  {
  Use:
	RCOR A 1 A_JumpIfInventory("PlasmaCannon", 1, "Check1")
	RCOR A 0 ACS_Execute(963, 0)
	stop
  Check1:
	RCOR A 1 A_JumpIfInventory("ProtonTorpedoLauncher", 1, "Check2")
	RCOR A 0 ACS_Execute(963, 0)
	stop
  Check2:
	RCOR A 1 A_JumpIfInventory("ProtonGrenadeLauncher", 1, "Working")
	RCOR A 0 ACS_Execute(963, 0)
	stop
  Working:
	RCOR A 1 ACS_Execute(962, 0)
	RCOR A 1 A_PlaySound("Upgrade")
	RCOR A 1 A_GiveInventory("PlasmaDebris", 1)
	RCOR A 1 A_GiveInventory("ProtonTorpedoDebris", 1)
	RCOR A 1 A_GiveInventory("ProtonGrenadeDebris", 1)
	stop
  }
}

actor DashDamager
{
 Projectile
 Radius 11
 Height 11
 Damage 5
 RenderStyle Translucent
 Alpha 0.6
 Speed 0
 DamageType "SpinDash"
 Scale 0.82
 Obituary "%o was spin-dashed by %k"
 +NOEXTREMEDEATH
 +NOCLIP
 States
 {
 Spawn:
  TNT1 A 0
  TNT1 A 1 A_Explode(28, 28, 0)
  TSPT A 1 A_FadeOut(0.1)
  goto Spawn+2
 Death:
  TNT1 A 1
  stop
 }
}

actor Tails : MagePlayer Replaces MagePlayer
{
	Species "Player"
	Health 100
	ReactionTime 0
	PainChance 255
	Radius 16
	Height 56
	Speed 1
	Scale 0.82
	Gravity 0.82
	+NOSKIN
	+FORCERADIUSDMG
	DamageFactor "Demonic", 1.5
	DamageFactor "ChaosFire", 0.5
	DamageFactor "SpinDash", 2.25
	RadiusDamageFactor 0.5
	Player.JumpZ 8
	Player.AttackZOffset 3
	Player.Viewheight 36
	Player.ColorRange 112, 127
	Player.SpawnClass "Any"
	Player.DisplayName "Tails"
	Player.SoundClass "tails"
	Player.ScoreIcon "TAILICON"
	Player.InvulnerabilityMode "Reflective"
	Player.HealRadiusType "Health"
	Player.Hexenarmor 10, 10, 25, 5, 20
	Player.StartItem "Tails_TechPistol"
	Player.StartItem "Melee"
	Player.StartItem "ChaosFlames"
	Player.StartItem "TailsFlightCheck", 50
	Player.StartItem "TailsWeaponUpgrade", 1
	Player.StartItem "VilesBane", 5
	Player.StartItem "TailsClassCheck", 1
	Player.StartItem "CellAmmo", 50
	Player.StartItem "MechAmmo", 50
	Player.StartItem "SpecialMove", 2
	Player.ForwardMove 1
	Player.SideMove 1
	States
	{
	COOPMode:
		NULL A 0
		NULL A 0 A_ChangeFlag("THRUSPECIES", 1)
		goto Spawn
	Spawn:
		TAIL A 0
		TAIL A 0 ACS_ExecuteAlways(965, 0)
		TAIL A 0 A_JumpIfInventory("PowerFlight", 1, "Fly")
		TAIL A 6 ACS_ExecuteAlways(921, 0)
		loop
	Fly:
		TAIF A 0 A_JumpIfInventory("RedFlag", 1, "TakeCarry")
		TAIF A 0 A_JumpIfInventory("BlueFlag", 1, "TakeCarry")
		TAIF A 0 A_JumpIfInventory("WhiteFlag", 1, "TakeCarry")
		TAIF A 0 A_JumpIfInventory("RedSkullST", 1, "TakeCarry")
		TAIF A 0 A_JumpIfInventory("BlueSkullST", 1, "TakeCarry")
		TAIF A 0 A_JumpIfInventory("PowerPossessionArtifact", 1, "TakeCarry")
		TAIF AB 3
		TAIF A 0 A_PlaySound("TailsFlying")
		TAIF A 0 A_JumpIfInventory("PowerFlight", 1, "Fly")
		goto Spawn
	TakeCarry:
		TAIF A 0 A_TakeInventory("PowerFlight", 1)
		goto Spawn
	FlyAttack:
		TAIF BCDEF 1
		TAIF A 0 A_PlaySound("TailsFlying")
		goto Fly
	See:
		TAIL A 0 A_JumpIfInventory("PowerFlight", 1, "Fly")
		TAIL ABCD 4
		TAIL A 0 ACS_ExecuteAlways(921, 0)
		Loop
	Burn:
		 BURN A 0 A_GiveToTarget("DemonicPower", 20)
		 BURN A 0 A_JumpIfInventory("Kamikaze", 1, "KamikazeDeath")
		 BURN A 0 A_Playsound("firedeath")
		 BURN A 0 A_Fall
		 BURN A 0 A_UnSetSolid
		 BURN A 0 A_UnSetShootable
		 BURN ABCDEFGHIJKLMNOPQRSTUV 4 BRIGHT
		 BURN V -1
		 stop
	Disintegrate:
		 NULL A 0 A_GiveToTarget("DemonicPower", 20)
		 NULL A 0 A_JumpIfInventory("Kamikaze", 1, "KamikazeDeath")
		 NULL A 0 A_Playsound("disintegrate")
		 NULL A 0 A_NoBlocking
		 NULL A 0 A_SpawnItemEx("DisintegratingPlayer", 0, 0, 0, 0, 0, 0, 0, 128, 0)
		 NULL A 3
		 NULL A -1
		 stop
	Missile:
		TAIL E 0 ACS_ExecuteAlways(965, 0)
		TAIL E 0 A_JumpIfInventory("PowerFlight", 1, "FlyAttack")
		TAIL E 12
		TAIL E 0 ACS_ExecuteAlways(965, 0)
		Goto Spawn
	Melee:
		TAIL F 0 ACS_ExecuteAlways(965, 0)
		TAIL F 0 A_JumpIfInventory("PowerFlight", 1, "FlyAttack")
		TAIL F 6 BRIGHT
		TAIL F 0 ACS_ExecuteAlways(965, 0)
		Goto Missile
	Pain:
		TAIL G 0
		TAIL G 0 ACS_ExecuteAlways(965, 0)
		TAIL G 4
		TAIL G 4 A_Pain
		TAIL A 0 A_JumpIfInventory("PowerFlight", 1, "Fly")
		Goto Spawn
	Death.Fist:
		TAIL H 0 A_GiveToTarget("KnockoutTrigger", 1)
		goto Death
	Death.BlowBack:
		TAIL H 0
		TAIL H 0 ThrustThingZ(0, Random(28, 40), 0, 1)
		goto Death
	Death:
		TAIL H 0 A_GiveToTarget("DemonicPower", 20)
		TAIL H 0 ACS_ExecuteAlways(965, 0)
		TAIL H 0 A_JumpIfInventory("Kamikaze", 1, "KamikazeDeath")
		TAIL H 7
		TAIL I 7 A_PlayerScream
		TAIL J 7 A_NoBlocking
		TAIL KLM 7
		TAIL N -1
		Stop
	XDeath:
		TAIL H 0 A_GiveToTarget("DemonicPower", 20)
		TAIL O 0 A_GiveToTarget("SpeakOneLiner", 1)
		TAIL O 0 ACS_ExecuteAlways(965, 0)
		TAIL O 0 A_JumpIfInventory("Kamikaze", 1, "KamikazeDeath")
		TAIL O 5 A_SpawnItemEx("XDeathGibs", 0, 0, 6, MOMX, MOMY, MOMZ, 0, SXF_CLIENTSIDE | SXF_ABSOLUTEMOMENTUM, 0)
		TAIL P 5 A_XScream
		TAIL Q 5 A_NoBlocking
		TAIL RSTUV 5
		TAIL W -1
		Stop
	XDeath.Obliterate:
	Death.Obliterate:
		TAIL H 0 A_GiveToTarget("DemonicPower", 20)
		TAIL O 0 ACS_ExecuteAlways(965, 0)
		TAIL O 0 A_GiveToTarget("SpeakOneLiner", 1)
		TAIL O 0 A_JumpIfInventory("Kamikaze", 1, "KamikazeDeath")
		TAIL O 2 A_SpawnItemEx("ObliterateGibs", 0, 0, 6, MOMX, MOMY, MOMZ, 0, SXF_CLIENTSIDE | SXF_ABSOLUTEMOMENTUM, 0)
		TAIL P 2 A_XScream
		TAIL Q 2 A_NoBlocking
		TAIL RSTUV 2
		TAIL W -1
		stop
	 Death.ChaosFire:
		TAIL GG 0 A_Stop
		TAIL G 0 ACS_ExecuteAlways(965, 0)
		TAIL G 0 A_GiveToTarget("DemonicPower", 20)
		TAIL G 0 A_JumpIfInventory("Kamikaze", 1, "KamikazeDeath")
		TAIL G 5 A_PlayerScream
		TAIL G 0 A_NoBlocking
		TAIL G 0 A_SpawnItemEX("BlackFlameDeath", 0, 0, 0, 0, 0, 0, 0, 128, 0)
		TAIL GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		TAIL G 2 A_SetTranslucent(0.9, 1)
		TAIL GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		TAIL G 2 A_SetTranslucent(0.85, 1)
		TAIL GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		TAIL G 2 A_SetTranslucent(0.8, 1)
		TAIL GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		TAIL G 2 A_SetTranslucent(0.75, 1)
		TAIL GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		TAIL G 2 A_SetTranslucent(0.7, 1)
		TAIL GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		TAIL G 2 A_SetTranslucent(0.65, 1)
		TAIL GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		TAIL G 2 A_SetTranslucent(0.6, 1)
		TAIL GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		TAIL G 2 A_SetTranslucent(0.55, 1)
		TAIL GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		TAIL G 2 A_SetTranslucent(0.5, 1)
		TAIL GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		TAIL G 2 A_SetTranslucent(0.45, 1)
		TAIL GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		TAIL G 2 A_SetTranslucent(0.4, 1)
		TAIL GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		TAIL G 2 A_SetTranslucent(0.35, 1)
		TAIL GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		TAIL G 2 A_SetTranslucent(0.3, 1)
		TAIL GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		TAIL G 2 A_SetTranslucent(0.25, 1)
		TAIL GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		TAIL G 2 A_SetTranslucent(0.2, 1)
		TAIL GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		TAIL G 2 A_SetTranslucent(0.15, 1)
		TAIL GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		TAIL G 2 A_SetTranslucent(0.1, 1)
		TAIL GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		TAIL G 2 A_SetTranslucent(0.05, 1)
		TAIL GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		TAIL G 2 A_SetTranslucent(0.0, 1)
		TAIL N -1
		stop
	 Death.Ethereal:
		TAIL G 0 A_GiveToTarget("DemonicPower", 20)
		TAIL G 0 A_JumpIfInventory("Kamikaze", 1, "KamikazeDeath")
		TAIL G 1 A_PlayerScream
		TAIL G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		TAIL GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		TAIL G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		TAIL GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		TAIL G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		TAIL GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		TAIL G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		TAIL GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		TAIL G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		TAIL GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		TAIL G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		TAIL GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		TAIL G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		TAIL GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		TAIL G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		TAIL GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		TAIL G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		TAIL GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		TAIL G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		TAIL GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		TAIL G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		TAIL GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		TAIL G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		TAIL GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		TAIL G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		TAIL GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		TAIL G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		TAIL GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A -1
		stop
	 Spin:
		TSPN A 0 A_Recoil(-10)
		TSPN AAA 1 A_SpawnItemEX("DashDamager", 0, 0, 0, 0, 0, 0, 0, 1, 0)
		TSPN A 0 A_Recoil(-9)
		TSPN BBB 1 A_SpawnItemEX("DashDamager", 0, 0, 0, 0, 0, 0, 0, 1, 0)
		TSPN B 0 A_Recoil(-8)
		TSPN CCC 1 A_SpawnItemEX("DashDamager", 0, 0, 0, 0, 0, 0, 0, 1, 0)
		TSPN C 0 A_Recoil(-8)
		TSPN AAA 1 A_SpawnItemEX("DashDamager", 0, 0, 0, 0, 0, 0, 0, 1, 0)
		TSPN A 0 A_Recoil(-8)
		TSPN BBB 1 A_SpawnItemEX("DashDamager", 0, 0, 0, 0, 0, 0, 0, 1, 0)
		TSPN B 0 A_Recoil(-8)
		TSPN CCC 1 A_SpawnItemEX("DashDamager", 0, 0, 0, 0, 0, 0, 0, 1, 0)
		TSPN AB 2
		TSPN C 3
		TNT1 A 0 ACS_ExecuteAlways(965, 0)
		goto See
	 Death.Microwave:
		TAIG A 0 A_GiveToTarget("DemonicPower", 20)
		TAIG A 0 A_JumpIfInventory("Kamikaze", 1, "KamikazeDeath")
		TAIG A 14 A_PlaySound("DukeGrow")
		TAIG B 10
		TAIG C 4
		TAIG D 4
		TAIG E 4
		TAIG F 4
		TAIG E 0 A_PlaySound("DukeExplosion")
		TAIG E 0 A_XScream
		TAIG E 0 A_Fall
		TAIG E 0 A_Explode
		TAIG E 0 A_GiveToTarget("SpeakOneLiner", 1)
		TAIG E 0 A_SpawnItemEx("DukeExplode", 0, 0, 0, 0, 0, 0, 0, 128, 0)
		TAIG E 0 A_SpawnItemEx("XDeathGibs", 0, 0, 6, MOMX, MOMY, MOMZ, 0, SXF_CLIENTSIDE | SXF_ABSOLUTEMOMENTUM, 0)
		TAIL PQRSTUV 6
		TAIL W -1
		stop
	 Ice:
		TAIL E 5 A_GenericFreezeDeath
		TAIL E 0 A_GiveToTarget("DemonicPower", 20)
		TAIL E 0 A_JumpIfInventory("Kamikaze", 1, "KamikazeDeath")
		TAIL E 1 A_FreezeDeathChunks
		Wait
	Death.IceRod:
		TAIL E 1 A_GenericFreezeDeath
		TAIL E 0 A_GiveToTarget("DemonicPower", 20)
		TAIL E 0 A_JumpIfInventory("Kamikaze", 1, "KamikazeDeath")
		TAIL EEEEEE 0 A_SpawnItemEx("IceRodFog4", 0, 0, 0, random(-8,8), random(-8,8), random(-8,8), 0, 128, 0)
		TAIL E 0 A_SpawnItemEx("XDeathGibs", 0, 0, 6, MOMX, MOMY, MOMZ, 0, SXF_CLIENTSIDE | SXF_ABSOLUTEMOMENTUM, 0)
		TAIL E 1 A_IceGuyDie
		stop
	KamikazeDeath:
		TAIL O 0
		TAIL O 0 A_TakeInventory("Kamikaze", 1)
		TAIL O 0 A_SpawnItemEx("XDeathGibs", 0, 0, 6, MOMX, MOMY, MOMZ, 0, SXF_CLIENTSIDE | SXF_ABSOLUTEMOMENTUM, 0)
		TAIL O 5 A_SpawnItemEx("ScreamingKamikazeSoul", 0, 0, 8, 0, 0, 1, 0, 0, 0)
		TAIL O 5 A_SpawnItemEx("KamikazeExplode", 0, 0, 2, 0, 0, 0, 0, 0, 0)
		TAIL Q 5 A_XScream
		TAIL R 5 A_NoBlocking
		TAIL STUV 5
		TAIL W -1
		stop
	}
}

// **************
// * LINK CLASS *
// **************

ACTOR FaroreTeleport : ArtiTeleport
{
+AUTOACTIVATE
}

actor FaroreMist : EtherealMist
{
	Scale 1.0
}

actor BrightLeaf
{
 Projectile
 Radius 10
 Height 10
 Speed 0
 Damage 0
 RenderStyle Add
 Alpha 0.9
 Gravity 0.06
 -NOGRAVITY
 +FORCEXYBILLBOARD
 States
 {
  Spawn:
	LEAF ABCDEFG 4 BRIGHT A_FadeOut(0.05)
	loop
  Death:
	TNT1 A 1
	stop
 }
}

actor FaroreAttack1
{
	Projectile
	Speed 0
	Radius 1
	Height 1
	Damagetype "Holy"
	obituary "%o fell for %k's disappearing Act."
	ReactionTime 112
	+NOCLIP
	+NODAMAGETHRUST
	+FORCERADIUSDMG
	States
	{
		Spawn:
		TNT1 A 0
		TNT1 A 0 A_PlaySoundEx("FaroresWind", "SoundSlot7", 1)
		TNT1 A 0 A_Explode(38, 256, 0)
		TNT1 AAAAAAAA 0 A_SpawnItemEx("BrightLeaf", Random(-156, 156), Random(-156, 156), Random(-156, 156), Random(-2,2), Random(-2,2), Random(-2,2), 0, 128, 0)
		TNT1 AAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("FaroreMist", Random(-156, 156), Random(-156, 156), Random(-156, 156), 0, 0, Random(-3, 3), 0, 128, 0)
		TNT1 AAAAAAAAA 1 A_SpawnItemEx("FaroreMist", Random(-156, 156), Random(-156, 156), Random(-156, 156), 0, 0, Random(-3, 3), 0, 128, 0)
		TNT1 A 0 A_CountDown
		loop
	}
}

actor FaroreAttack2 : FaroreAttack1
{
	obituary "%k re-appeared in %o's face."
	States
	{
		Spawn:
		TNT1 A 0
		TNT1 A 1 A_Explode(256, 128, 0)
		stop
	}
}

actor FaroresWind : FighterWeapon
{
  radius 20
  height 16
  inventory.pickupmessage "Farore's Wind"
  obituary "%o fell for %k's disappearing Act."
  weapon.selectionorder 1
  weapon.kickback 100
  weapon.ammotype "DemonicPower"
  weapon.ammouse 100
  weapon.ammogive 0
  +WEAPON.NOAUTOFIRE
  +WEAPON.EXPLOSIVE
  +WEAPON.NOLMS
  +WEAPON.CHEATNOTWEAPON
  states
  {
	  Select:
	  FARO A 1 A_Raise
	  loop
	  Deselect:
	  FARO A 1 A_Lower
	  loop
	  Ready:
	  FARO A 1 A_WeaponReady
	  loop
	  Fire:
	  FARO A 4 A_PlayWeaponSound("FaroreCharge")
	  FARO BCDE 4 BRIGHT
	  FARO F 2 BRIGHT
	  FARO F 0 A_SetBlend("64 FF 00", 0.8, 10)
	  FARO F 0 A_PlayWeaponSound("ChaosReady")
	  FARO A 0 A_FireCustomMissile("FaroreAttack1", 0, 1, 0, 0)
	  FARO F 0 A_GiveInventory("FaroreTeleport", 1)
	  FARO F 1
	  FARO AAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("BrightLeaf", Random(-16, 16), Random(-16, 16), Random(16, 32), Random(-1, 1), Random(-1, 1), Random(-1, 3), 0, 128, 0)
	  FARO AAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("FaroreMist", Random(-16, 16), Random(-16, 16), Random(16, 32), Random(-4,4), Random(-4,4), Random(-5, 5), 0, 128, 0)
	  FARO F 1 BRIGHT A_FireCustomMissile("FaroreAttack2", 0, 0, 0, 0)
	  FARO A 28
	  FARO A 0 A_Refire
	  goto Ready
  }
}

actor Walljumpcheck
{
	-SOLID
	+LOOKALLAROUND
	+NOGRAVITY
	+MISSILE
	+SERVERSIDEONLY
	renderstyle none
	Damage 0
	speed 20
	radius 16
	height 16
	States
	{
	Spawn:
		NULL A 0 A_Look
		NULL A 2 A_Look
		Stop
	See:
		NULL A 2
		Stop
	Death:
		NULL A 1 A_GiveToTarget("Walljumpcheck2",1)
		Stop
	}
}

actor Walljumpcheck2 : CustomInventory
{
	States
	{
	Spawn:
		TNT1 A 0
	Pickup:
		TNT1 A 0
		TNT1 A 1 ACS_ExecuteAlways(927,0)
		Stop
	}
}

actor Link : FighterPlayer Replaces FighterPlayer
{
	Species "Player"
	Health 100
	ReactionTime 0
	PainChance 255
	Radius 16
	Height 56
	Speed 1
	Scale 1.24
	+NOSKIN
	+FORCERADIUSDMG
	RadiusDamageFactor 1
	DamageFactor "Holy", 0.5
	DamageFactor "ChaosFire", 1.5
	DamageFactor "SpinDash", 2.25
	Player.JumpZ 8
	Player.Viewheight 41
	Player.ColorRange 112, 127
	Player.SpawnClass "Any"
	Player.DisplayName "Link"
	Player.SoundClass "Link"
	Player.ScoreIcon "LINKICON"
	Player.InvulnerabilityMode "Ghost"
	Player.HealRadiusType "Health"
	Player.Hexenarmor 5, 5, 15, 10, 25
	Player.StartItem "FairyBow"
	Player.StartItem "Melee"
	Player.StartItem "FaroresWind"
	Player.StartItem "LinkClassCheck", 1
	Player.StartItem "CellAmmo", 50
	Player.StartItem "MechAmmo", 50
	player.startitem "SpecialMove", 2
	Player.ForwardMove 1
	Player.SideMove 1
	States
	{
	COOPMode:
		NULL A 0
		NULL A 0 A_ChangeFlag("THRUSPECIES", 1)
		goto Spawn
	Spawn:
		NWPS AA 5
		loop
	See:
		NWPS AAAABBBBCCCCDDDD 1 A_CustomMissile ("Walljumpcheck", 0, 0, 0, 2, 0)
		Loop
	Burn:
		 BURN A 0 A_GiveToTarget("DemonicPower", 20)
		 BURN A 0 A_JumpIfInventory("Kamikaze", 1, "KamikazeDeath")
		 BURN A 0 A_Playsound("firedeath")
		 BURN A 0 A_Fall
		 BURN A 0 A_UnSetSolid
		 BURN A 0 A_UnSetShootable
		 BURN ABCDEFGHIJKLMNOPQRSTUV 4 BRIGHT
		 BURN V -1
		 stop
	Disintegrate:
		 NULL A 0 A_GiveToTarget("DemonicPower", 20)
		 NULL A 0 A_JumpIfInventory("Kamikaze", 1, "KamikazeDeath")
		 NULL A 0 A_Playsound("disintegrate")
		 NULL A 0 A_NoBlocking
		 NULL A 0 A_SpawnItemEx("DisintegratingPlayer", 0, 0, 0, 0, 0, 0, 0, 128, 0)
		 NULL A 3
		 NULL A -1
		 stop
	Missile:
		NWPS E 12
		Goto Spawn
	Melee:
		NWPS F 6 BRIGHT
		Goto Missile
	Pain:
		NWPS G 4
		NWPS G 4 A_Pain
		Goto Spawn
	Death.Fist:
		NWPS H 0 A_GiveToTarget("KnockoutTrigger", 1)
		goto Death
	Death.BlowBack:
		NWPS H 0
		NWPS H 0 ThrustThingZ(0, Random(28, 40), 0, 1)
	Death:
		NWPS H 0 A_GiveToTarget("DemonicPower", 20)
		NWPS H 0 A_JumpIfInventory("Kamikaze", 1, "KamikazeDeath")
		NWPS H 10
		NWPS I 10 A_PlayerScream
		NWPS J 10 A_NoBlocking
		NWPS KLM 10
		NWPS N -1
		Stop
	XDeath:
		NWPS O 0 A_GiveToTarget("DemonicPower", 20)
		NWPS O 0 A_GiveToTarget("SpeakOneLiner", 1)
		NWPS O 0 A_JumpIfInventory("Kamikaze", 1, "KamikazeDeath")
		NWPS O 5 A_SpawnItemEx("XDeathGibs", 0, 0, 6, MOMX, MOMY, MOMZ, 0, SXF_CLIENTSIDE | SXF_ABSOLUTEMOMENTUM, 0)
		NWPS P 5 A_XScream
		NWPS Q 5 A_NoBlocking
		NWPS RSTUV 5
		NWPS W -1
		Stop
	XDeath.Obliterate:
	Death.Obliterate:
		NWPS O 0 A_GiveToTarget("DemonicPower", 20)
		NWPS O 0 A_GiveToTarget("SpeakOneLiner", 1)
		NWPS O 0 A_JumpIfInventory("Kamikaze", 1, "KamikazeDeath")
		NWPS O 2 A_SpawnItemEx("ObliterateGibs", 0, 0, 6, MOMX, MOMY, MOMZ, 0, SXF_CLIENTSIDE | SXF_ABSOLUTEMOMENTUM, 0)
		NWPS P 2 A_XScream
		NWPS Q 2 A_NoBlocking
		NWPS RSTUV 2
		NWPS W -1
		stop
	 Death.ChaosFire:
		NWPS GG 0 A_Stop
		NWPS G 0 A_GiveToTarget("DemonicPower", 20)
		NWPS G 0 A_JumpIfInventory("Kamikaze", 1, "KamikazeDeath")
		NWPS G 5 A_PlayerScream
		NWPS G 0 A_NoBlocking
		NWPS G 0 A_SpawnItemEX("BlackFlameDeath", 0, 0, 0, 0, 0, 0, 0, 128, 0)
		NWPS GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		NWPS G 2 A_SetTranslucent(0.9, 1)
		NWPS GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		NWPS G 2 A_SetTranslucent(0.85, 1)
		NWPS GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		NWPS G 2 A_SetTranslucent(0.8, 1)
		NWPS GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		NWPS G 2 A_SetTranslucent(0.75, 1)
		NWPS GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		NWPS G 2 A_SetTranslucent(0.7, 1)
		NWPS GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		NWPS G 2 A_SetTranslucent(0.65, 1)
		NWPS GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		NWPS G 2 A_SetTranslucent(0.6, 1)
		NWPS GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		NWPS G 2 A_SetTranslucent(0.55, 1)
		NWPS GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		NWPS G 2 A_SetTranslucent(0.5, 1)
		NWPS GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		NWPS G 2 A_SetTranslucent(0.45, 1)
		NWPS GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		NWPS G 2 A_SetTranslucent(0.4, 1)
		NWPS GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		NWPS G 2 A_SetTranslucent(0.35, 1)
		NWPS GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		NWPS G 2 A_SetTranslucent(0.3, 1)
		NWPS GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		NWPS G 2 A_SetTranslucent(0.25, 1)
		NWPS GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		NWPS G 2 A_SetTranslucent(0.2, 1)
		NWPS GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		NWPS G 2 A_SetTranslucent(0.15, 1)
		NWPS GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		NWPS G 2 A_SetTranslucent(0.1, 1)
		NWPS GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		NWPS G 2 A_SetTranslucent(0.05, 1)
		NWPS GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		NWPS G 2 A_SetTranslucent(0.0, 1)
		NWPS N -1
		stop
	 Death.Ethereal:
		NWPS G 0 A_GiveToTarget("DemonicPower", 20)
		NWPS G 0 A_JumpIfInventory("Kamikaze", 1, "KamikazeDeath")
		NWPS G 1 A_PlayerScream
		NWPS G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NWPS GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NWPS G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NWPS GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NWPS G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NWPS GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NWPS G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NWPS GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NWPS G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NWPS GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NWPS G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NWPS GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NWPS G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NWPS GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NWPS G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NWPS GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NWPS G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NWPS GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NWPS G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NWPS GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NWPS G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NWPS GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NWPS G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NWPS GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NWPS G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NWPS GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NWPS G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NWPS GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A -1
		stop
	 Ice:
		NWPS E 5 A_GenericFreezeDeath
		NWPS E 0 A_GiveToTarget("DemonicPower", 20)
		NWPS E 0 A_JumpIfInventory("Kamikaze", 1, "KamikazeDeath")
		NWPS E 1 A_FreezeDeathChunks
		Wait
	Death.IceRod:
		NWPS E 1 A_GenericFreezeDeath
		NWPS E 0 A_GiveToTarget("DemonicPower", 20)
		NWPS E 0 A_JumpIfInventory("Kamikaze", 1, "KamikazeDeath")
		NWPS EEEEEE 0 A_SpawnItemEx("IceRodFog4", 0, 0, 0, random(-8,8), random(-8,8), random(-8,8), 0, 128, 0)
		NWPS E 0 A_SpawnItemEx("XDeathGibs", 0, 0, 6, MOMX, MOMY, MOMZ, 0, SXF_CLIENTSIDE | SXF_ABSOLUTEMOMENTUM, 0)
		NWPS E 1 A_IceGuyDie
		stop
	KamikazeDeath:
		NWPS O 0
		NWPS O 0 A_TakeInventory("Kamikaze", 1)
		NWPS O 0 A_SpawnItemEx("XDeathGibs", 0, 0, 6, MOMX, MOMY, MOMZ, 0, SXF_CLIENTSIDE | SXF_ABSOLUTEMOMENTUM, 0)
		NWPS O 5 A_SpawnItemEx("ScreamingKamikazeSoul", 0, 0, 8, 0, 0, 1, 0, 0, 0)
		NWPS O 5 A_SpawnItemEx("KamikazeExplode", 0, 0, 2, 0, 0, 0, 0, 0, 0)
		NWPS Q 5 A_XScream
		NWPS R 5 A_NoBlocking
		NWPS STUV 5
		NWPS W -1
		stop
	Death.Microwave:
		LING A 0 A_GiveToTarget("DemonicPower", 20)
		LING A 0 A_JumpIfInventory("Kamikaze", 1, "KamikazeDeath")
		LING A 4 A_PlaySound("DukeGrow")
		LING B 4
		LING C 4
		LING D 4
		LING E 4
		LING F 4
		LING G 4
		LING H 4
		LING I 4
		LING J 4
		LING J 4
		LING J 0 A_PlaySound("DukeExplosion")
		LING J 0 A_XScream
		LING J 0 A_Fall
		LING J 0 A_Explode
		LING J 0 A_GiveToTarget("SpeakOneLiner", 1)
		NULL A 0 A_SpawnItemEx("DukeExplode", 0, 0, 0, 0, 0, 0, 0, 128, 0)
		NULL A 0 A_SpawnItemEx("XDeathGibs", 0, 0, 6, MOMX, MOMY, MOMZ, 0, SXF_CLIENTSIDE | SXF_ABSOLUTEMOMENTUM, 0)
		NULL A 1 A_SpawnItemEx("ObliterateGibs", 0, 0, 6, MOMX, MOMY, MOMZ, 0, SXF_CLIENTSIDE | SXF_ABSOLUTEMOMENTUM, 0)
		NULL A -1
		stop
	}
}

// *********************** DUKE NUKEM CLASS *******************
// =======

ACTOR DukeClip : Ammo
{
	Inventory.MaxAmount 12 // size of the clip
	Ammo.BackpackAmount 0
	Ammo.BackpackMaxAmount 12 //MUST be the same as Inventory.MaxAmmount
	Inventory.Icon "MAGICON2"
	+IGNORESKILL
}

actor DukePistol : FighterWeapon
{
  obituary "%k busted a cap in %o's ass."
  attacksound "DukePistol"
  weapon.selectionorder 1900
  weapon.kickback 100
  weapon.upsound "DukeClipIn"
  Weapon.AmmoType1 "DukeClip" //The guns magazine
  Weapon.AmmoType2 "MechAmmo" //The real ammo
  Weapon.AmmoGive 12
  Weapon.AmmoGive2 24
  Weapon.AmmoUse1 1
  Weapon.AmmoUse2 0
  +WEAPON.WIMPY_WEAPON
  +WEAPON.CHEATNOTWEAPON
  states
  {
  Ready:
	DISG A 0 A_WeaponReady
	goto Altfire
	DISG A 1 A_WeaponReady
	goto Ready+1
  Deselect:
	DISG A 1 A_Lower
	loop
  Select:
	DISG A 1 A_Raise
	loop
  Fire:
	DISG B 0 A_FireBullets (2, 1.5, 1, 6, "NewBulletPuff")
	DISG B 1 BRIGHT A_Gunflash
	DISG B 0 A_FireCustomMissile("BulletCasingSpawnerLeft",45+random(-8,8),0,-1,6)
	DISG C 1 BRIGHT
	DISG A 4
	DISG A 0 A_JumpIfNoAmmo(2)
	DISG A 1 A_ReFire
	goto Ready+1
	NULL A 0
	goto AltFire
  AltFire:
	DISG A 0
	Goto ReloadCheck

  ReloadCheck:
	DISG D 0 A_JumpIfInventory("DukeClip",12,2)
	DISG D 0 A_JumpIfInventory("MechAmmo",1,"ReloadStart")
	DISG A 0
	goto Ready+1

  ReloadStart:
	DISG D 5
	DISG E 5 A_PlaySound("DukeClipOut")
	DISG F 2
	DISG E 5
	DISG G 2
	DISG H 2
	goto ReloadAmmo

  ReloadAmmo:
	TNT1 A 0 A_TakeInventory("MechAmmo",1)
	TNT1 A 0 A_GiveInventory("DukeClip",1)
	TNT1 A 0 A_JumpIfInventory("DukeClip",12,"ReloadDone")
	TNT1 A 0 A_JumpIfInventory("MechAmmo",1,"ReloadAmmo")
	goto ReloadDone

  ReloadDone:
	DISG I 2 A_PlaySound("DukeClipIn")
	DISG J 2
	DISG K 2
	DISG E 2
	DISG D 2
	goto Ready+1
  Flash:
	TNT1 A 2 bright A_Light1
	TNT1 A 0 bright A_Light0
	stop
  }
}

actor DukeExplode
{
  Height 1
  Radius 1
  Speed 0
  RenderStyle Add
  Alpha 1.0
  Projectile
  -MISSILE
  +FORCEXYBILLBOARD
  States
  {
   Spawn:
	DEXP ABCDEFGHIJKLMNOPQRSTU 2 BRIGHT
	stop
  }
}

actor DukeNukem : Link
{
	Species "Player"
	Scale 0.69
	Player.DisplayName "Duke"
	Player.SoundClass "DukeNukem"
	Player.ScoreIcon "DUKEICON"
	player.sidemove 0.95
	player.forwardmove 0.95
	Player.JumpZ 9
	Player.CrouchSprite "DUKC"
	player.startitem "DukePistol"
	player.startitem "Melee"
	player.startitem "MechAmmo", 48
	player.startitem "DukeClip", 12
	player.startitem "DukeClassCheck", 1
	States
	{
	COOPMode:
		NULL A 0
		NULL A 0 A_ChangeFlag("THRUSPECIES", 1)
		goto Spawn
	Spawn:
		DUKE E 2
		DUKE E 0 A_JumpIf(waterlevel == 3, "SwimStand")
		Loop
	SwimStand:
		DUKS D 2
		DUKS D 0 A_JumpIf(waterlevel <= 1, "Spawn")
		DUKS D 0 A_JumpIf(momx+momy+momz > 2 | momx+momy+momz < -2, "SwimSee")
		loop
	See:
		DUKE A 4
		DUKE A 0 A_JumpIf(waterlevel == 3, "SwimSee")
		DUKE B 4
		DUKE B 0 A_JumpIf(waterlevel == 3, "SwimSee")
		DUKE C 4
		DUKE C 0 A_JumpIf(waterlevel == 3, "SwimSee")
		DUKE D 4
		DUKE D 0 A_JumpIf(waterlevel == 3, "SwimSee")
		Loop
	SwimSee:
		DUKS A 5
		DUKS A 0 A_JumpIf(waterlevel <= 1, "See")
		DUKS B 5
		DUKS B 0 A_JumpIf(waterlevel <= 1, "See")
		DUKS C 5
		DUKS C 0 A_JumpIf(waterlevel <= 1, "See")
		DUKS C 5
		DUKS C 0 A_JumpIf(waterlevel <= 1, "See")
		DUKS D 5
		DUKS D 0 A_JumpIf(waterlevel <= 1, "See")
		DUKS D 0 A_JumpIf(momx+momy+momz < 2 | momx+momy+momz > -2, "SwimStand")
		loop
	Missile:
		DUKE E 0 A_JumpIf(waterlevel == 3, "SwimMissile")
		DUKE E 1 A_JumpIfInventory("DukeKickCheck", 1, "Kick")
		DUKE E 1 A_JumpIfInventory("DukeKickCheck", 1, "Kick")
		DUKE E 10
		Goto Spawn
	Kick:
		DUKE D 3
		DUKK A 6
		DUKK B 7
		goto Spawn
	SwimMissile:
		DUKS D 0 A_JumpIf(waterlevel <= 1, "See")
		DUKS D 12
		Goto SwimStand
	Melee:
		DUKE F 0 A_JumpIf(waterlevel == 3, "SwimMelee")
		DUKE F 6 BRIGHT
		Goto Missile
	SwimMelee:
		DUKS D 0 A_JumpIf(waterlevel <= 1, "See")
		DUKS D 12
		Goto SwimStand
	Pain:
		DUKE G 4
		DUKE G 4 A_Pain
		Goto Spawn
	Disintegrate:
		 NULL A 0 A_GiveToTarget("DemonicPower", 20)
		 NULL A 0 A_JumpIfInventory("Kamikaze", 1, "KamikazeDeath")
		 NULL A 0 A_Playsound("disintegrate")
		 NULL A 0 A_NoBlocking
		 NULL A 0 A_SpawnItemEx("DisintegratingPlayer", 0, 0, 0, 0, 0, 0, 0, 128, 0)
		 NULL A 3
		 NULL A -1
		 stop
	Death.Fist:
		DUKE H 0 A_GiveToTarget("KnockoutTrigger", 1)
		goto Death
	Death.BlowBack:
		DUKE H 0
		DUKE H 0 ThrustThingZ(0, Random(28, 40), 0, 1)
	Death:
		DUKE H 0 A_GiveToTarget("DemonicPower", 20)
		DUKE H 0 A_JumpIfInventory("Kamikaze", 1, "KamikazeDeath")
		DUKE H 6
		DUKE I 6 A_PlayerScream
		DUKE J 6 A_NoBlocking
		DUKE KLM 6
		DUKE N -1
		Stop
	XDeath:
		DUKE O 0 A_GiveToTarget("DemonicPower", 20)
		DUKE O 0 A_GiveToTarget("SpeakOneLiner", 1)
		DUKE O 0 A_JumpIfInventory("Kamikaze", 1, "KamikazeDeath")
		DUKE O 0 A_SpawnItemEx("XDeathGibs", 0, 0, 6, MOMX, MOMY, MOMZ, 0, SXF_CLIENTSIDE | SXF_ABSOLUTEMOMENTUM, 0)
		DUKE O 3
		DUKE P 3 A_XScream
		DUKE Q 3 A_NoBlocking
		DUKE RSTUV 3
		DUKE W -1
		Stop
	XDeath.Obliterate:
	Death.Obliterate:
		DUKE O 0 A_GiveToTarget("DemonicPower", 20)
		DUKE O 0 A_GiveToTarget("SpeakOneLiner", 1)
		DUKE O 0 A_JumpIfInventory("Kamikaze", 1, "KamikazeDeath")
		DUKE O 0 A_SpawnItemEx("ObliterateGibs", 0, 0, 6, MOMX, MOMY, MOMZ, 0, SXF_CLIENTSIDE | SXF_ABSOLUTEMOMENTUM, 0)
		DUKE O 3
		DUKE P 3 A_XScream
		DUKE Q 3 A_NoBlocking
		DUKE RSTUV 3
		DUKE W -1
		Stop
	Death.Microwave:
		DUKG A 0 A_GiveToTarget("DemonicPower", 20)
		DUKG A 0 A_JumpIfInventory("Kamikaze", 1, "KamikazeDeath")
		DUKG A 4 A_PlaySound("DukeGrow")
		DUKG B 4
		DUKG C 4
		DUKG D 4
		DUKG E 4
		DUKG F 4
		DUKG G 4
		DUKG H 4
		DUKG I 4
		DUKG J 4
		DUKG J 4
		DUKG J 0 A_PlaySound("DukeExplosion")
		DUKG J 0 A_XScream
		DUKG J 0 A_Fall
		DUKG J 0 A_Explode
		DUKG J 0 A_GiveToTarget("SpeakOneLiner", 1)
		NULL A 0 A_SpawnItemEx("DukeExplode", 0, 0, 0, 0, 0, 0, 0, 128, 0)
		NULL A 0 A_SpawnItemEx("XDeathGibs", 0, 0, 6, MOMX, MOMY, MOMZ, 0, SXF_CLIENTSIDE | SXF_ABSOLUTEMOMENTUM, 0)
		NULL A 1 A_SpawnItemEx("ObliterateGibs", 0, 0, 6, MOMX, MOMY, MOMZ, 0, SXF_CLIENTSIDE | SXF_ABSOLUTEMOMENTUM, 0)
		NULL A -1
		stop
	KamikazeDeath:
		DUKE O 0
		DUKE O 0 A_TakeInventory("Kamikaze", 1)
		DUKE O 3 A_SpawnItemEx("ScreamingKamikazeSoul", 0, 0, 8, 0, 0, 1, 0, 0, 0)
		DUKE O 3 A_SpawnItemEx("KamikazeExplode", 0, 0, 2, 0, 0, 0, 0, 0, 0)
		DUKE O 0 A_SpawnItemEx("XDeathGibs", 0, 0, 6, MOMX, MOMY, MOMZ, 0, SXF_CLIENTSIDE | SXF_ABSOLUTEMOMENTUM, 0)
		DUKE O 0 A_SpawnItemEx("ObliterateGibs", 0, 0, 6, MOMX, MOMY, MOMZ, 0, SXF_CLIENTSIDE | SXF_ABSOLUTEMOMENTUM, 0)
		DUKE Q 3 A_XScream
		DUKE R 3 A_NoBlocking
		DUKE STUV 3
		DUKE W -1
		stop
	Death.ChaosFire:
		DUKE GG 0 A_Stop
		DUKE G 0 A_GiveToTarget("DemonicPower", 20)
		DUKE G 0 A_JumpIfInventory("Kamikaze", 1, "KamikazeDeath")
		DUKE G 5 A_PlayerScream
		DUKE G 0 A_NoBlocking
		DUKE G 0 A_SpawnItemEX("BlackFlameDeath", 0, 0, 0, 0, 0, 0, 0, 128, 0)
		DUKE GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		DUKE G 2 A_SetTranslucent(0.9, 1)
		DUKE GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		DUKE G 2 A_SetTranslucent(0.85, 1)
		DUKE GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		DUKE G 2 A_SetTranslucent(0.8, 1)
		DUKE GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		DUKE G 2 A_SetTranslucent(0.75, 1)
		DUKE GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		DUKE G 2 A_SetTranslucent(0.7, 1)
		DUKE GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		DUKE G 2 A_SetTranslucent(0.65, 1)
		DUKE GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		DUKE G 2 A_SetTranslucent(0.6, 1)
		DUKE GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		DUKE G 2 A_SetTranslucent(0.55, 1)
		DUKE GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		DUKE G 2 A_SetTranslucent(0.5, 1)
		DUKE GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		DUKE G 2 A_SetTranslucent(0.45, 1)
		DUKE GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		DUKE G 2 A_SetTranslucent(0.4, 1)
		DUKE GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		DUKE G 2 A_SetTranslucent(0.35, 1)
		DUKE GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		DUKE G 2 A_SetTranslucent(0.3, 1)
		DUKE GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		DUKE G 2 A_SetTranslucent(0.25, 1)
		DUKE GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		DUKE G 2 A_SetTranslucent(0.2, 1)
		DUKE GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		DUKE G 2 A_SetTranslucent(0.15, 1)
		DUKE GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		DUKE G 2 A_SetTranslucent(0.1, 1)
		DUKE GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		DUKE G 2 A_SetTranslucent(0.05, 1)
		DUKE GG 0 A_SpawnItemEX("Striker_FlyingBlood", Random(-16, 16), Random(-16, 16), Random(0, 56), 0, 0, 0, 0, 128, 0)
		DUKE G 2 A_SetTranslucent(0.0, 1)
		DUKE N -1
		stop
	 Death.Ethereal:
		DUKE G 0 A_GiveToTarget("DemonicPower", 20)
		DUKE G 0 A_JumpIfInventory("Kamikaze", 1, "KamikazeDeath")
		DUKE G 1 A_PlayerScream
		DUKE G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		DUKE GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		DUKE G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		DUKE GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		DUKE G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		DUKE GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		DUKE G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		DUKE GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		DUKE G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		DUKE GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		DUKE G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		DUKE GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		DUKE G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		DUKE GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		DUKE G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		DUKE GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		DUKE G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		DUKE GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		DUKE G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		DUKE GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		DUKE G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		DUKE GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		DUKE G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		DUKE GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		DUKE G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		DUKE GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		DUKE G 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		DUKE GGGG 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A 1 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL AAAA 0 A_SpawnItemEX("EtherealMist", Random(-8, 8), Random(-8, 8), Random(0, 40), Random(-1, 1), Random(-1, 1), Random(-1, 1), 0, 128, 0)
		NULL A -1
		stop
	Ice:
		DUKE E 5 A_GenericFreezeDeath
		DUKE E 0 A_GiveToTarget("DemonicPower", 20)
		DUKE E 0 A_JumpIfInventory("Kamikaze", 1, "KamikazeDeath")
		DUKE E 1 A_FreezeDeathChunks
		Wait
	Death.IceRod:
		DUKE E 1 A_GenericFreezeDeath
		DUKE E 0 A_GiveToTarget("DemonicPower", 20)
		DUKE E 0 A_JumpIfInventory("Kamikaze", 1, "KamikazeDeath")
		DUKE EEEEEE 0 A_SpawnItemEx("IceRodFog4", 0, 0, 0, random(-8,8), random(-8,8), random(-8,8), 0, 128, 0)
		DUKE E 0 A_SpawnItemEx("XDeathGibs", 0, 0, 6, MOMX, MOMY, MOMZ, 0, SXF_CLIENTSIDE | SXF_ABSOLUTEMOMENTUM, 0)
		DUKE E 1 A_IceGuyDie
		stop
	}
}

// 450 = Flags for Morph Style.

actor SpaceCraftInFlight : PlayerPawn
{
	Health 100
	ReactionTime 0
	PainChance 255
	Radius 56
	Height 56
	Scale 1.0
	Mass 800
	Gravity 0.1
	DamageFactor "Normal", 0.1
	DamageFactor "ServoLaser", 0.15
	DamageFactor "Electric", 1.25
	+NOSKIN
	+NOTELEPORT
	+NOBLOOD
	RadiusDamageFactor 0.25
	Player.JumpZ 8
	Player.Viewheight 41
	Player.ColorRange 112, 127
	Player.DisplayName "SpaceCraft"
	Player.ScoreIcon "HELLBEND"
	Player.InvulnerabilityMode "Reflective"
	Player.HealRadiusType "Health"
	Player.Hexenarmor 5, 5, 15, 10, 25
	Player.ForwardMove 2
	Player.SideMove 0
	player.morphweapon "ValkrieCannons"
	player.runhealth 35
	States
	{
		Spawn:
			SHI2 A 0
			SHI2 A 0 A_PlaySoundEx("PlayerShipEngine", auto, 0)
			SHI2 A 1 A_CustomBulletAttack(0,0,1,0,"HeadLight", 2048, 1)
			loop
		See:
			SHI2 A 0
			SHI2 A 0 A_PlaySoundEx("PlayerShipEngine", auto, 0)
			SHI2 A 1 A_CustomBulletAttack(0,0,1,0,"HeadLight", 2048, 1)
			loop
		Missile:
			SHI2 A 0
			SHI2 A 0 A_PlaySoundEx("PlayerShipEngine", auto, 0)
			SHI2 A 1 A_CustomBulletAttack(0,0,1,0,"HeadLight", 2048, 1)
			Goto See
		Melee:
			SHI2 A 0
			SHI2 A 0 A_PlaySoundEx("PlayerShipEngine", auto, 0)
			SHI2 A 1 A_CustomBulletAttack(0,0,1,0,"HeadLight", 2048, 1)
			Goto See
		XDeath:
		Death:
			SHI2 A 0 A_LowGravity
			SHI2 A 0 A_NoBlocking
			SHI2 A 0 A_ChangeFlag("CORPSE", 1)
			SHI2 AAAAA 0 A_SpawnItemEX("ShipBurnSmoke", Random(-8,8), Random(-8,8), Random(-8,8), 0, 0, 0, 0, 128, 0)
			SHI2 A 6 A_SpawnItemEX("ShipBurnTrail", 0, 0, 0, Random(-1,1), Random(-1,1), Random(-1,1), 0, 128, 0)
			SHI2 A 0 A_JumpIf(momx+momy == 0, "Crash")
			goto Death+2
		Crash:
			NULL A 0 A_Explode
			NULL A 0 A_PlaySound("weapons/grenlx")
			NULL A 0 A_Stop
			NULL A 0 bright A_PlaySound("MassiveExplosion")
			NULL A 0 bright A_Explode(136, 136, 1)
			NULL A 0 bright A_SpawnItemEx("SledgeHammerExplosionLarge", 0, 0, 0, 0, 0, 0, 0, 128, 0)
			NULL AAAAAAAAAAAA 0 bright A_SpawnItemEx("SledgeHammerExplosionSmall", Random(-48, 48), Random(-48, 48), Random(-48, 48), 0, 0, 0, 0, 128, 0)
			NULL AAAAAAAAAAAAAAAAAAAAAAAAAAA 3 A_SpawnItemEX("DukeExplosion", Random(-64, 64), Random(-64, 64), Random(0, 64), Random(-2,2), Random(-2,2), Random(-2,2), 0, 0, 0)
			NULL A -1
			stop
		Pain:
			SHI2 A 0 A_StopSound
			SHI2 A 0 radius_quake(10, 20, 0, 1, 0)
			SHI2 A 0 A_PlaySoundEx("SpaceShipHit", auto, 0)
			SHI2 A 4
			SHI2 A 4
			goto See
	}
}

actor Flying_Deathbringer : SpaceCraftInFlight
{
	player.morphweapon "DeathbringerCannons"
}

actor ZBishopFX : BishopFX Replaces BishopFX
{
	Projectile
	Seesound "BishopProjectile"
	Damage 5
	Speed 32
	Scale 0.32
	Alpha 1.0
	+FORCEXYBILLBOARD
	+FLOATBOB
	States
	{
	Spawn:
		BPFX A 0
		BPFX A 0 A_Jump(127, "Spawn2")
		BPFX ABCDEFGHIJKLMNOPQR 1 Bright A_BishopMissileWeave
		stop
	Spawn2:
		BPFX ABCDEFGHIJKLMNOPQR 1 Bright A_CStaffMissileSlither
		stop
	Death:
		TNT1 AA 1
		stop
	XDeath:
		TNT1 A 0
		TNT1 A 0 A_GiveToTarget("HitConfirmation", 1)
		goto Death
	}
}

actor BishopStaff : ClericWeapon 24304
{
  obituary "%o was vaporized by %k's bishop staff!"
  Inventory.PickupSound "misc/p_pkup"
  Inventory.PickupMessage "Found a Bishop Staff"
  weapon.selectionorder 9999
  weapon.kickback 100
  Weapon.AmmoType1 "DemonicPower"
  Weapon.AmmoGive 40
  Weapon.AmmoUse1 2
  +WEAPON.WIMPY_WEAPON
  +FLOATBOB
  +NOGRAVITY
  RenderStyle add
  states
  {
  Spawn:
	BPEN A -1 BRIGHT
	loop
  Ready:
	PEND A 1 A_WeaponReady
	loop
  Deselect:
	PEND A 1 A_Lower
	loop
  Select:
	PEND A 1 A_Raise
	loop
  Fire:
	PEND B 1 BRIGHT A_FireCustomMissile("ZBishopFX", 0, 1, 0, 0)
	PEND BBBBBB 1 BRIGHT A_FireCustomMissile("ZBishopFX", random(-4,4), 0, 0, 0)
	PEND A 5
	PEND A 2 A_ReFire
	goto Ready
  Flash:
	TNT1 A 0 bright A_Light0
	stop
  }
}

actor ChainBlood
{
	projectile
	Radius 1
	Height 1
	Damage 0
	Speed 12
	Scale 0.5
	-NOGRAVITY
	+FORCEXYBILLBOARD
	states
	{
	Spawn:
		BLUD CBA 5
		stop
	Death:
		TNT1 A 1
		stop
	}
}

actor BloodyChainsaw : ClericWeapon Replaces Chainsaw
{
  spawnid 32
  obituary "%o was torn to gory shreds by %k's chainsaw."
  radius 20
  height 16
  inventory.pickupmessage "A chainsaw!	Find some meat!"
  weapon.readysound "weapons/sawidle"
  weapon.upsound "weapons/sawup"
  weapon.selectionorder 2200
  +WEAPON.MELEEWEAPON
  states
  {
  Ready:
	SAWG C 0
	SAWG C 4
	SAWG E 3
	SAWG F 2
	SAWG G 2
	SAWG H 2
	SAWG G 2
	SAWG F 2
	SAWG E 2
	SAWG C 4 A_WeaponReady
	SAWG C 0 A_PlaysoundEX("weapons/sawidle",soundslot7, 0)
	SAWG D 4 A_WeaponReady
	goto Ready+9
  Deselect:
	SAWG C 1 A_Lower
	loop
  Select:
	SAWG C 0 A_Raise
	SAWG C 1 A_Raise
	loop
  Fire:
	SAWG A 0 A_FireCustomMissile("ChainBlood",Random(5,-5), 0, 2, 2)
	SAWG A 3 A_Saw
	SAWG A 0 A_FireCustomMissile("ChainBlood",Random(5,-5), 0, 2, 1)
	SAWG B 3 A_Saw
	SAWG B 0 A_ReFire
	goto Ready+9
  Hold:
	SAWG A 0 A_Saw
	SAWG A 0 A_Recoil(-1)
	SAWG AB 2 A_Saw
	SAWG B 0 A_ReFire
	goto Ready+9
  AltFire:
	SAWG C 3
	SAWG C 0 A_Refire
	SAWG C 3 A_PlaysoundEX("weapons/sawup",voice, 0)
	goto Ready
  Spawn:
	CSAW A -1
	stop
  }
}

actor GrapplingHook : LoreShot Replaces LoreShot
{
	speed 48
	+NOTELEPORT
	states
	{
		XDeath:
			TNT1 A 0
			TNT1 A 0 A_GiveToTarget("HitConfirmation", 1)
			goto Death
	}
}

actor GrappleSpikeShot
{
 radius 6
 height 6
 damage 12
 speed 60
 seesound "grapplespike"
 projectile
 +BLOODSPLATTER
 states
 {
	Spawn:
		SPIK A 2
		loop
	XDeath:
		TNT1 A 0
		TNT1 A 0 A_GiveToTarget("HitConfirmation", 1)
		goto Death
	Death:
		PUFF ABCD 1
		stop
 }
}

actor GrapplerShot : Weapon 20481
{
  obituary "%o was hooked like a fish by %k!"
  Inventory.PickupSound "misc/w_pkup"
  Inventory.PickupMessage "Bagged a GrapplerShot!"
  weapon.selectionorder 6000
  weapon.kickback 100
  Weapon.AmmoType1 "None"
  Weapon.AmmoType2 "MechAmmo"
  Weapon.AmmoGive1 0
  Weapon.AmmoGive2 20
  Weapon.AmmoUse1 0
  Weapon.AmmoUse2 2
  +WEAPON.WIMPY_WEAPON
  states
  {
  Spawn:
	GRAP A -1
	loop
  Ready:
	GRPL A 1 A_WeaponReady
	loop
  Deselect:
	GRPL A 1 A_Lower
	loop
  Select:
	GRPL A 1 A_Raise
	loop
  Fire:
	GRPL A 2
	GRPL B 2
	GRPL C 2 A_FireCustomMissile("GrapplingHook", 0, 0, 0, 0)
	GRPL A 20
	GRPL A 0 A_ReFire
	goto Ready
  AltFire:
	GRPL A 1
	GRPL B 1
	GRPL C 1 A_FireCustomMissile("GrappleSpikeShot", 0, 1, 0, 0)
	GRPL A 20
	GRPL A 0 A_ReFire
	goto Ready
  Flash:
	TNT1 A 0 bright A_Light0
	stop
  }
}

ACTOR UltraSphere : Custominventory 25075
{
   Scale 0.5
   inventory.pickupmessage "UltraSphere!"
   inventory.pickupsound "misc/p_pkup"
   RenderStyle Add
   Alpha 0.9
   +COUNTITEM
   +FLOATBOB
   +NOGRAVITY
   +FORCEXYBILLBOARD
   States
   {
   Spawn:
	  ULTR ABC 1
	  loop
   Pickup:
	  TNT1 A 0 A_PlaysoundEX("UltraInsanity", SoundSlot7, 0)
	  TNT1 A 0 A_GiveInventory ("RageRune")
	  TNT1 A 0 A_GiveInventory ("TurboSphere")
	  TNT1 A 0 A_GiveInventory ("CellAmmo", 300)
	  TNT1 A 0 A_GiveInventory ("DemonicPower", 80)
	  TNT1 A 0 A_GiveInventory ("DoomSphere")
	  TNT1 A 0 A_GiveInventory ("GuardSphere")
	  TNT1 A 0 A_GiveInventory ("BishopStaff")
	  TNT1 A 0 A_GiveInventory ("MaxHealthBonus", 10)
	  TNT1 A 0 A_GiveInventory ("Infrared")
	  TNT1 A 0 A_GiveInventory ("Backpack")
	  TNT1 A 0 A_GiveInventory ("Berserk")
	  TNT1 A 0 A_GiveInventory ("Radsuit")
	  TNT1 A 0 A_GiveInventory ("MegaSphere")
	  TNT1 A 0 A_GiveInventory ("Redarmor")
	  stop
   }
}

actor SlaugheredMarine 20322
{
 Height 56
 Radius 20
 Mass 99999999
 Health 99999999999
 +SOLID
 States
 {
 Spawn:
 SLAU ABCD 5
 loop
 Death:
 SLAU A -1
 stop
 }
}

// FAST FOOD

actor Ketchup 20323
{
 Height 8
 Radius 6
 Scale 0.60
 +SOLID
 States
 {
 Spawn:
 KETC A -1
 stop
 }
}

actor Drink : PowerupGiver 20324
{
 Height 8
 Radius 8
 inventory.pickupmessage "Drank some Orange Soda! (+8 Seconds of Invul)"
 powerup.color "FF A0 00", 0.1
 powerup.duration 280
 inventory.respawntics 420
 inventory.maxamount 4
 inventory.pickupsound "drinkpickup"
 powerup.type Invulnerable
 powerup.mode Reflective
 -INVENTORY.INVBAR
 +INVENTORY.AUTOACTIVATE
 +INVENTORY.ADDITIVETIME
 +INVENTORY.ALWAYSPICKUP
 States
 {
 Spawn:
 DRIN A -1
 stop
 }
}

actor Napkins 20326
{
 Height 16
 Radius 6
 Scale 0.75
 +SOLID
 States
 {
 Spawn:
 NAPK A -1
 stop
 }
}

actor PowerMist
{
	Projectile
	Radius 1
	Height 1
	Damage 0
	Speed 10
	Scale 0.18
	RenderStyle Add
	Alpha 1.0
	+FORCEXYBILLBOARD
	+DONTSPLASH
	-BLOODSPLATTER
	-ACTIVATEIMPACT
	-ACTIVATEPCROSS
	+BLOODLESSIMPACT
	States
	{
	Spawn:
		TNT1 A 0
		GPLE ABCDE 1 BRIGHT
		stop
	Death:
		TNT1 A 0
		TNT1 A 1
		stop
	}
}

actor PowerBeam : ArachnotronPlasma
{
	RenderStyle Add
	Alpha 1.0
	obituary "%o was 'sploded by %k's Power Beam"
	speed 64
	damage 1
	scale 0.09
	seesound "Phazonbeam"
	DamageType "Disintegrate"
	+RIPPER
	-BLOODSPLATTER
	+BLOODLESSIMPACT
	+NODAMAGETHRUST
	+FORCEXYBILLBOARD
	+FORCERADIUSDMG
	States
	{
	Spawn:
		GPLS AB 1 BRIGHT
		loop
	Death:
		GPLE A 0 BRIGHT
		GPLE A 0 BRIGHT A_Explode(24, 32, 1)
		GPLE AAAAAAA 0 A_SpawnItemEx("PowerMist", 0, 0, 0, random(-7,7), Random(-7,7), Random(-7,7), 0, 128, 0)
		GPLE ABCDE 3 BRIGHT A_SpawnItemEx("PowerMist", 0, 0, 0, random(-7,7), Random(-7,7), Random(-7,7), 0, 128, 0)
		stop
	}
}

actor BluePowerBeam : ArachnotronPlasma
{
	decal BluePlasmaScorch
	RenderStyle Add
	Alpha 1.0
	obituary "%o was critically wounded by %k's Power Beam"
	speed 64
	damage (random(1,6)*1)
	scale 0.09
	seesound "Phazonbeam"
	DamageType "Disintegrate"
	-BLOODSPLATTER
	+BLOODLESSIMPACT
	+NODAMAGETHRUST
	+FORCEXYBILLBOARD
	+FORCERADIUSDMG
	States
	{
	Spawn:
		BLSS A 1 BRIGHT A_BishopMissileWeave
		BLSS A 0 BRIGHT A_BishopMissileWeave
		BLSS B 1 BRIGHT A_BishopMissileWeave
		BLSS B 0 BRIGHT A_BishopMissileWeave
		loop
	XDeath:
		TNT1 A 0
		TNT1 A 0 A_GiveToTarget("HitConfirmation", 1)
		goto Death
	Death:
		BLSE A 0 BRIGHT
		BLSE AAAAAAA 0 A_SpawnItemEx("BluePlasmaMist", 0, 0, 0, random(-7,7), Random(-7,7), Random(-7,7), 0, 128, 0)
		BLSE ABCDE 3 BRIGHT A_SpawnItemEx("BluePlasmaMist", 0, 0, 0, random(-7,7), Random(-7,7), Random(-7,7), 0, 128, 0)
		stop
	}
}

actor EnergyBallExplosionRingWeak
{
  Height 1
  Radius 1
  Speed 0
  RenderStyle Add
  Alpha 0.8
  Scale 1.2
  +NOGRAVITY
  +NOBLOCKMAP
  +NOCLIP
  +CLIENTSIDEONLY
  +FORCEXYBILLBOARD
  States
  {
   Spawn:
	NULL ABC 1 BRIGHT
	NULL DEFGH 1 BRIGHT A_FadeOut(0.14)
	stop
  }
}

actor EnergyBallExplosionShellWeak
{
  Height 1
  Radius 1
  Speed 0
  RenderStyle Add
  Alpha 0.8
  Scale 1.2
  +NOGRAVITY
  +NOBLOCKMAP
  +NOCLIP
  +CLIENTSIDEONLY
  +FORCEXYBILLBOARD
  States
  {
   Spawn:
	NULL ABCDEFGH 1 BRIGHT
	NULL IJKL 1 BRIGHT A_FadeOut(0.18)
	stop
  }
}

actor EnergyBallExplosionRingMid : EnergyBallExplosionRingWeak
{
	Scale 1.4
}

actor EnergyBallExplosionShellMid : EnergyBallExplosionShellWeak
{
	Scale 1.4
}

actor EnergyBallExplosionRingStrong : EnergyBallExplosionRingWeak
{
	Scale 2.2
}

actor EnergyBallExplosionShellStrong : EnergyBallExplosionShellWeak
{
	Scale 2.2
}

actor EnergyBallExplosionWeak
{
  Height 1
  Radius 1
  Speed 0
  RenderStyle Add
  Alpha 1.0
  Scale 1.2
  +NOGRAVITY
  +NOBLOCKMAP
  +NOCLIP
  +CLIENTSIDEONLY
  +FORCEXYBILLBOARD
  States
  {
   Spawn:
	ENGY EFGHIJ 2 BRIGHT
	stop
  }
}

actor EnergyBallExplosionMid : EnergyBallExplosionWeak
{
	Scale 1.4
}

actor EnergyBallExplosionStrong : EnergyBallExplosionWeak
{
	Scale 2.2
}

actor EnergyBallWeak
{
	Projectile
	Radius 11
	Height 8
	Speed 22
	Damage 5
	RenderStyle Add
	Alpha 1.0
	Scale 0.88
	SeeSound "Duke64EnergyBall"
	Obituary "%o was vaporized by %k's energy cannon."
	+FORCERADIUSDMG
	+FORCEXYBILLBOARD
	States
	{
		Spawn:
			ENGY AABBCCDD 1 BRIGHT
			loop
		XDeath:
			TNT1 A 0
			TNT1 A 0 A_GiveToTarget("HitConfirmation", 1)
			goto Death
		Death:
			ENGY A 0 A_PlaySound("Duke64EnergyBallExplode")
			ENGY A 0 BRIGHT A_Explode(24, 46)
			ENGY A 0 A_SpawnItemEx("EnergyBallExplosionWeak", 0, 0, 0, 0, 0, 0, 0, 128, 0)
			ENGY A 0 A_SpawnItemEx("EnergyBallExplosionShellWeak", 0, 0, 0, 0, 0, 0, 0, 128, 0)
			ENGY A 0 A_SpawnItemEx("EnergyBallExplosionRingWeak", 0, 0, 0, 0, 0, 0, 0, 128, 0)
			TNT1 A 1
			stop
	}
}

actor EnergyBallMid : EnergyBallWeak
{
	Scale 1
	Speed 25
	Damage 6
	SpawnId 245
	States
	{
	Death:
			ENGY A 0 A_PlaySound("Duke64EnergyBallExplode")
			ENGY A 0 BRIGHT A_Explode(40, 46)
			ENGY A 0 A_SpawnItemEx("EnergyBallExplosionMid", 0, 0, 0, 0, 0, 0, 0, 128, 0)
			ENGY A 0 A_SpawnItemEx("EnergyBallExplosionShellMid", 0, 0, 0, 0, 0, 0, 0, 128, 0)
			ENGY A 0 A_SpawnItemEx("EnergyBallExplosionRingMid", 0, 0, 0, 0, 0, 0, 0, 128, 0)
			TNT1 A 1
			stop
	}
}

actor EnergyTrail
{
  Projectile
  Height 2
  Radius 2
  Speed 0
  Damage 0
  RenderStyle Add
  Alpha 1.0
  Scale 0.3
  +HEXENBOUNCE
  +NOGRAVITY
  +NOBLOCKMAP
  +CLIENTSIDEONLY
  +FORCEXYBILLBOARD
  States
  {
   Spawn:
	ENGY A 1
	ENGY ABCD 1 BRIGHT A_FadeOut(0.06)
	goto Spawn+1
   Death:
	TNT1 A 0
	TNT1 A 1
	stop
  }
}

actor EnergyBallStrong
{
	Projectile
	Radius 11
	Height 8
	Speed 32
	Damage 16
	RenderStyle Add
	Alpha 1.0
	Scale 1.2
	SeeSound "Duke64EnergyBall"
	Obituary "%k scrambled %o's molecules."
	+FORCERADIUSDMG
	+FORCEXYBILLBOARD
	+SEEKERMISSILE
	States
	{
		Spawn:
			ENGY AABBCCDD 1 BRIGHT	A_SpawnItemEx("EnergyTrail", Random(-12, 12), Random(-12, 12), Random(-12, 12), 0, 0, 0, 0, 128, 0)
			ENGY A 1 BRIGHT A_SpawnItemEx("EnergyTrail", Random(-12, 12), Random(-12, 12), Random(-12, 12), 0, 0, 0, 0, 128, 0)
			ENGY A 0 A_SeekerMissile(4, 4)
			ENGY A 1 BRIGHT A_SpawnItemEx("EnergyTrail", Random(-12, 12), Random(-12, 12), Random(-12, 12), 0, 0, 0, 0, 128, 0)
			ENGY A 0 A_SeekerMissile(4, 4)
			ENGY B 1 BRIGHT A_SpawnItemEx("EnergyTrail", Random(-12, 12), Random(-12, 12), Random(-12, 12), 0, 0, 0, 0, 128, 0)
			ENGY B 0 A_SeekerMissile(4, 4)
			ENGY B 1 BRIGHT A_SpawnItemEx("EnergyTrail", Random(-12, 12), Random(-12, 12), Random(-12, 12), 0, 0, 0, 0, 128, 0)
			ENGY B 0 A_SeekerMissile(4, 4)
			ENGY C 1 BRIGHT A_SpawnItemEx("EnergyTrail", Random(-12, 12), Random(-12, 12), Random(-12, 12), 0, 0, 0, 0, 128, 0)
			ENGY C 0 A_SeekerMissile(4, 4)
			ENGY C 1 BRIGHT A_SpawnItemEx("EnergyTrail", Random(-12, 12), Random(-12, 12), Random(-12, 12), 0, 0, 0, 0, 128, 0)
			ENGY C 0 A_SeekerMissile(4, 4)
			ENGY D 1 BRIGHT A_SpawnItemEx("EnergyTrail", Random(-12, 12), Random(-12, 12), Random(-12, 12), 0, 0, 0, 0, 128, 0)
			ENGY D 0 A_SeekerMissile(4, 4)
			ENGY D 1 BRIGHT A_SpawnItemEx("EnergyTrail", Random(-12, 12), Random(-12, 12), Random(-12, 12), 0, 0, 0, 0, 128, 0)
			ENGY D 0 A_SeekerMissile(4, 4)
			goto Spawn+8
		XDeath:
			TNT1 A 0
			TNT1 A 0 A_GiveToTarget("HitConfirmation", 1)
			goto Death
		Death:
			ENGY A 0 A_PlaySound("DukeExplosion")
			ENGY A 0 BRIGHT A_Explode(90, 90)
			ENGY A 0 A_SpawnItemEx("EnergyBallExplosionStrong", 0, 0, 0, 0, 0, 0, 0, 128, 0)
			ENGY A 0 A_SpawnItemEx("EnergyBallExplosionShellStrong", 0, 0, 0, 0, 0, 0, 0, 128, 0)
			ENGY A 0 A_SpawnItemEx("EnergyBallExplosionRingStrong", 0, 0, 0, 0, 0, 0, 0, 128, 0)
			ENGY AAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("EnergyTrail", 0, 0, 0, Random(-6,6), Random(-6,6), Random(-6,6), 0, 128, 0)
			TNT1 A 1
			stop
	}
}

actor MegaEnergyTrail : EnergyTrail
{
	Scale 0.5
}

actor MegaEnergyTrailBlast : EnergyTrail
{
	Scale 0.5
	States
	{
	Spawn:
		ENGY A 1
		ENGY ABCD 1 BRIGHT A_FadeOut(0.02)
		goto Spawn+1
	}
}

actor EnergyBallExplosionMega : EnergyBallExplosionWeak
{
	Scale 8.0
}

actor EnergyBallExplosionRingMega : EnergyBallExplosionRingWeak
{
	Scale 8.0
}

actor EnergyBallExplosionShellMega : EnergyBallExplosionShellWeak
{
	Scale 8.0
	States
	{
	Spawn:
		NULL A 0
		NULL A 0 radius_quake(9, 96, 0, 14, 0)
		NULL ABCDEFGH 2 BRIGHT
		NULL IJKL 2 BRIGHT A_FadeOut(0.18)
		stop
	}
}

actor EnergyBallMegaMist
{
	Projectile
	Radius 1
	Height 1
	Damage 0
	Speed 10
	Scale 0.6
	RenderStyle Add
	Alpha 1.0
	+FORCEXYBILLBOARD
	+DONTSPLASH
	-BLOODSPLATTER
	+BLOODLESSIMPACT
	States
	{
	Spawn:
		TNT1 A 0
		BLSE ABC 2 BRIGHT
		BLSE DE 1 BRIGHT
		BLSE E 1 A_FadeOut(0.07)
		goto Spawn+6
	Death:
		TNT1 A 0
		TNT1 A 1
		stop
	}
}

actor EnergyBallMega
{
	Projectile
	Radius 11
	Height 8
	Speed 25
	Damage 150
	RenderStyle Add
	Alpha 1.0
	Scale 1.7
	SeeSound "Duke64EnergyBallHuge"
	Obituary "%o was sent to Mu by %k."
	+FORCERADIUSDMG
	+FORCEXYBILLBOARD
	States
	{
		Spawn:
			ENGY A 1 BRIGHT A_SpawnItemEx("MegaEnergyTrail", Random(-18, 18), Random(-18, 18), Random(-18, 18), Random(-1,1), Random(-1,1), Random(-1,1), 0, 128, 0)
			TNT1 A 0 BRIGHT A_SpawnItemEx("MegaEnergyTrail", Random(-18, 18), Random(-18, 18), Random(-18, 18), Random(-1,1), Random(-1,1), Random(-1,1), 0, 128, 0)
			ENGY A 1 BRIGHT A_SpawnItemEx("MegaEnergyTrail", Random(-18, 18), Random(-18, 18), Random(-18, 18), Random(-1,1), Random(-1,1), Random(-1,1), 0, 128, 0)
			TNT1 A 0 BRIGHT A_SpawnItemEx("MegaEnergyTrail", Random(-18, 18), Random(-18, 18), Random(-18, 18), Random(-1,1), Random(-1,1), Random(-1,1), 0, 128, 0)
			ENGY B 1 BRIGHT A_SpawnItemEx("MegaEnergyTrail", Random(-18, 18), Random(-18, 18), Random(-18, 18), Random(-1,1), Random(-1,1), Random(-1,1), 0, 128, 0)
			TNT1 A 0 BRIGHT A_SpawnItemEx("MegaEnergyTrail", Random(-18, 18), Random(-18, 18), Random(-18, 18), Random(-1,1), Random(-1,1), Random(-1,1), 0, 128, 0)
			ENGY B 1 BRIGHT A_SpawnItemEx("MegaEnergyTrail", Random(-18, 18), Random(-18, 18), Random(-18, 18), Random(-1,1), Random(-1,1), Random(-1,1), 0, 128, 0)
			TNT1 A 0 BRIGHT A_SpawnItemEx("MegaEnergyTrail", Random(-18, 18), Random(-18, 18), Random(-18, 18), Random(-1,1), Random(-1,1), Random(-1,1), 0, 128, 0)
			ENGY C 1 BRIGHT A_SpawnItemEx("MegaEnergyTrail", Random(-18, 18), Random(-18, 18), Random(-18, 18), Random(-1,1), Random(-1,1), Random(-1,1), 0, 128, 0)
			TNT1 A 0 BRIGHT A_SpawnItemEx("MegaEnergyTrail", Random(-18, 18), Random(-18, 18), Random(-18, 18), Random(-1,1), Random(-1,1), Random(-1,1), 0, 128, 0)
			ENGY C 1 BRIGHT A_SpawnItemEx("MegaEnergyTrail", Random(-18, 18), Random(-18, 18), Random(-18, 18), Random(-1,1), Random(-1,1), Random(-1,1), 0, 128, 0)
			TNT1 A 0 BRIGHT A_SpawnItemEx("MegaEnergyTrail", Random(-18, 18), Random(-18, 18), Random(-18, 18), Random(-1,1), Random(-1,1), Random(-1,1), 0, 128, 0)
			ENGY D 1 BRIGHT A_SpawnItemEx("MegaEnergyTrail", Random(-18, 18), Random(-18, 18), Random(-18, 18), Random(-1,1), Random(-1,1), Random(-1,1), 0, 128, 0)
			TNT1 A 0 BRIGHT A_SpawnItemEx("MegaEnergyTrail", Random(-18, 18), Random(-18, 18), Random(-18, 18), Random(-1,1), Random(-1,1), Random(-1,1), 0, 128, 0)
			ENGY D 1 BRIGHT A_SpawnItemEx("MegaEnergyTrail", Random(-18, 18), Random(-18, 18), Random(-18, 18), Random(-1,1), Random(-1,1), Random(-1,1), 0, 128, 0)
			TNT1 A 0 BRIGHT A_SpawnItemEx("MegaEnergyTrail", Random(-18, 18), Random(-18, 18), Random(-18, 18), Random(-1,1), Random(-1,1), Random(-1,1), 0, 128, 0)
			loop
		Death:
			ENGY A 0 A_PlaySoundEx("Duke64EnergyBallExplodeHuge", "Auto", 0, 1)
			ENGY A 0 BRIGHT A_Explode(486, 486)
			ENGY A 0 A_SpawnItemEx("EnergyBallExplosionMega", 0, 0, 0, 0, 0, 0, 0, 128, 0)
			ENGY A 0 A_SpawnItemEx("EnergyBallExplosionShellMega", 0, 0, 0, 0, 0, 0, 0, 128, 0)
			ENGY A 0 A_SpawnItemEx("EnergyBallExplosionRingMega", 0, 0, 0, 0, 0, 0, 0, 128, 0)
			ENGY AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("MegaEnergyTrailBlast", 0, 0, 0, Random(-16,16), Random(-16,16), Random(-16,16), 0, 128, 0)
			ENGY AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEX("EnergyBallMegaMist", Random(-76,76), Random(-76, 76), Random(-76, 76), Random(-18,18), Random(-18,18), Random(-14,14), 0, 128, 0)
			TNT1 A 1
			stop
	}
}

ACTOR EnergyCannonCharge : Inventory
{
   Inventory.Amount 1
   Inventory.MaxAmount 100
   -INVBAR
}

actor Beamer : Weapon 21321
{
  obituary "%o was 'sploded by %k's Power Beam"
  Inventory.PickupSound "misc/w_pkup"
  Inventory.PickupMessage "Swiped A Beamer!"
  weapon.selectionorder 1000
  weapon.kickback 100
  Weapon.AmmoType1 "CellAmmo"
  Weapon.AmmoGive 80
  Weapon.AmmoUse1 1
  states
  {
  Spawn:
	PHAS A -1
	loop
  Ready:
	PHAG A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeReady")
	PHAG A 1 A_WeaponReady
	goto Ready+1
  Deselect:
	PHAG A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeDeselect")
	PHAG A 1 A_Lower
	goto Deselect+1
  Select:
	PHAG A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeSelect")
	PHAG A 1 A_Raise
	goto Select+1
  Hold:
	PHAG A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeHold")
  Fire:
	PHAG A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeFire")
	PHAG A 0 A_JumpIfHealthLower(25, "SuperCriticalFire")
	PHAG A 0 A_JumpIfHealthLower(50, "CriticalFire")
	PHAG BC 2 BRIGHT A_FireCustomMissile("PowerBeam", 0, 1, 0, 0)
	PHAG A 0 A_Refire
	goto Ready
  CriticalFire:
	PHAG B 0 BRIGHT A_FireCustomMissile("BluePowerBeam", 0, 0, 0, 8)
	PHAG B 2 BRIGHT A_FireCustomMissile("PowerBeam", 0, 1, 0, 0)
	PHAG C 0 BRIGHT A_FireCustomMissile("BluePowerBeam", 0, 1, 0, 8)
	PHAG C 2 BRIGHT A_FireCustomMissile("PowerBeam", 0, 1, 0, 0)
	PHAG A 0 A_Refire
	goto Ready
  SuperCriticalFire:
	PHAG B 0 BRIGHT A_FireCustomMissile("BluePowerBeam", 0, 0, 0, 8)
	PHAG B 0 BRIGHT A_FireCustomMissile("BluePlasma", Random(-3,3), 0, 0, 8)
	PHAG B 2 BRIGHT A_FireCustomMissile("PowerBeam", 0, 1, 0, 0)
	PHAG C 0 BRIGHT A_FireCustomMissile("BluePowerBeam", 0, 1, 0, 8)
	PHAG C 0 BRIGHT A_FireCustomMissile("BluePlasma", Random(-3,3), 1, 0, 8)
	PHAG C 2 BRIGHT A_FireCustomMissile("PowerBeam", 0, 1, 0, 0)
	PHAG A 0 A_Refire
	goto Ready
  Flash:
	TNT1 A 0 bright A_Light0
	stop

  // ENERGY CANNON
  DukeSelect:
	ENG1 A 0 A_PlayWeaponSound("DukeWeaponSelect")
	ENG1 A 1 A_Raise
	goto DukeSelect+1
  DukeDeselect:
	ENG1 A 0 A_StopSoundEx("Weapon")
	ENG1 A 1 A_Lower
	loop
  DukeReady:
	ENG1 A 1 A_WeaponReady
	loop
  DukeFire:
	ENG1 A 3
	ENG1 A 0 A_PlaySoundEx("Duke64EnergyCharge", "Weapon")
	ENG1 A 0 A_Refire
	ENG1 A 0 A_StopSoundEx("Weapon")
	ENG1 A 0 A_TakeInventory("EnergyCannonCharge", 100)
	ENG1 A 0 A_FireCustomMissile("EnergyBallWeak", 0, 1, 12, 0)
	ENG1 DEDA 1 A_WeaponReady
	goto Ready
  DukeHold:
	ENG1 A 0 A_JumpIfInventory("EnergyCannonCharge", 69, "DukeHold5")
	ENG1 A 0 A_JumpIfInventory("EnergyCannonCharge", 42, "DukeHold4")
	ENG1 A 0 A_JumpIfInventory("EnergyCannonCharge", 24, "DukeHold3")
	ENG1 A 0 A_JumpIfInventory("EnergyCannonCharge", 9, "DukeHold2")
	ENG1 ABC 2 A_GiveInventory("EnergyCannonCharge", 1)
	ENG1 A 0 A_Refire
	ENG1 A 0 A_JumpIfInventory("CellAmmo", 2, "DukeRelease1")
	goto DukeFire+3
  DukeRelease1:
	ENG1 A 0 A_StopSoundEx("Weapon")
	ENG1 A 0 A_TakeInventory("EnergyCannonCharge", 100)
	ENG1 A 0 A_FireCustomMissile("EnergyBallMid", 0, 1, 12, 0)
	ENG1 A 0 A_TakeInventory("CellAmmo", 1)
	ENG1 DEDA 1 A_WeaponReady
	ENG1 A 4
	goto Ready
  DukeHold2:
	ENG2 ABC 2 A_GiveInventory("EnergyCannonCharge", 1)
	ENG2 A 0 A_Refire
	ENG2 A 0 A_JumpIfInventory("CellAmmo", 4, "DukeRelease2")
	goto DukeHold+8
  DukeRelease2:
	ENG2 A 0 A_StopSoundEx("Weapon")
	ENG2 A 0 A_TakeInventory("EnergyCannonCharge", 100)
	ENG2 A 0 A_FireCustomMissile("EnergyBallMid", 0, 1, 12, 0)
	ENG2 A 0 A_FireCustomMissile("EnergyBallMid", 6, 1, 12, 0)
	ENG2 A 0 A_FireCustomMissile("EnergyBallMid", -6, 1, 12, 0)
	ENG2 A 0 A_TakeInventory("CellAmmo", 1)
	ENG1 DEDA 1 A_WeaponReady
	ENG1 A 4
	goto Ready
  DukeHold3:
	ENG3 ABC 2 A_GiveInventory("EnergyCannonCharge", 1)
	ENG3 A 0 A_Refire
	ENG3 A 0 A_JumpIfInventory("CellAmmo", 6, "DukeRelease3")
	goto DukeHold2+4
  DukeRelease3:
	ENG3 A 0 A_StopSoundEx("Weapon")
	ENG3 A 0 A_TakeInventory("EnergyCannonCharge", 100)
	ENG3 A 0 A_FireCustomMissile("EnergyBallStrong", 0, 1, 12, 0)
	ENG3 A 0 A_TakeInventory("CellAmmo", 5)
	ENG1 DEFEDA 1
	ENG1 A 4 A_WeaponReady
	goto Ready
  DukeHold4:
	ENG4 A 0 Radius_Quake(1, 4, 0, 1, 0)
	ENG4 ABC 2 A_GiveInventory("EnergyCannonCharge", 1)
	ENG4 A 0 A_Refire
	ENG4 A 0 A_JumpIfInventory("CellAmmo", 16, "DukeRelease4")
	goto DukeHold3+4
  DukeRelease4:
	ENG4 A 0 A_StopSoundEx("Weapon")
	ENG4 A 0 A_TakeInventory("EnergyCannonCharge", 100)
	ENG4 A 0 A_FireCustomMissile("EnergyBallStrong", 0, 1, 12, 0)
	ENG4 A 0 A_FireCustomMissile("EnergyBallStrong", 10, 1, 12, 0)
	ENG4 A 0 A_FireCustomMissile("EnergyBallStrong", -10, 1, 12, 0)
	ENG4 A 0 A_TakeInventory("CellAmmo", 13)
	ENG1 DEFGFEDA 1
	ENG1 A 4
	goto Ready
  DukeHold5:
	ENG5 A 0 Radius_Quake(2, 6, 0, 1, 0)
	ENG5 ABC 2 A_GiveInventory("EnergyCannonCharge", 1)
	ENG5 A 0 A_PlaySoundEx("Duke64EnergyChargeHold", "Weapon", 1)
	ENG5 A 0 A_Refire
	ENG5 A 0 A_JumpIfInventory("CellAmmo", 80, "DukeRelease5")
	goto DukeHold4+5
  DukeRelease5:
	ENG5 A 0 Radius_Quake(8, 3, 0, 1, 0)
	ENG5 A 0 A_SetBlend ("00 A0 FF", 0.5, 24)
	ENG5 A 0 A_StopSoundEx("Weapon")
	ENG5 A 0 A_TakeInventory("EnergyCannonCharge", 100)
	ENG5 A 0 A_FireCustomMissile("EnergyBallMega", 0, 1, 12, 0)
	ENG5 A 0 A_TakeInventory("CellAmmo", 79)
	ENG5 A 0 A_Recoil(12)
	ENG1 DEFGFEDA 1
	ENG1 A 4
	goto Ready
  }
}

// Striker's Keys

Actor KeyPiece1 : PuzzleItem 23234
{
   -INVBAR
   Inventory.MaxAmount 1
   Inventory.Icon TNT1A0
   inventory.pickupsound "misc/k_pkup"
   inventory.pickupmessage "Found Piece #1 of \chStriker\cdMan\ci780\cl's Key"
   inventory.Respawntics 600
   States
   {
   Spawn:
	  SKEY A 4
	  Loop
   }
}

Actor KeyPiece2 : PuzzleItem 23235
{
   -INVBAR
   Inventory.MaxAmount 1
   Inventory.Icon TNT1A0
   inventory.pickupsound "misc/k_pkup"
   inventory.pickupmessage "Found Piece #2 of \chStriker\cdMan\ci780\cl's Key"
   inventory.Respawntics 600
   States
   {
   Spawn:
	  SKEY A 4
	  Loop
   }
}

Actor KeyPiece3 : PuzzleItem 23236
{
   -INVBAR
   Inventory.MaxAmount 1
   Inventory.Icon TNT1A0
   inventory.pickupsound "misc/k_pkup"
   inventory.pickupmessage "Found Piece #3 of \chStriker\cdMan\ci780\cl's Key"
   inventory.Respawntics 600
   States
   {
   Spawn:
	  SKEY A 4
	  Loop
   }
}

Actor KeyPiece4 : PuzzleItem 23237
{
   -INVBAR
   Inventory.MaxAmount 1
   Inventory.Icon TNT1A0
   inventory.pickupsound "misc/k_pkup"
   inventory.pickupmessage "Found Piece #4 of \chStriker\cdMan\ci780\cl's Key"
   inventory.Respawntics 600
   States
   {
   Spawn:
	  SKEY A 4
	  Loop
   }
}

Actor KeyPiece5 : PuzzleItem 23238
{
   -INVBAR
   Inventory.MaxAmount 1
   Inventory.Icon TNT1A0
   inventory.pickupsound "misc/k_pkup"
   inventory.pickupmessage "Found Piece #5 of \chStriker\cdMan\ci780\cl's Key"
   inventory.Respawntics 600
   States
   {
   Spawn:
	  SKEY A 4
	  Loop
   }
}

Actor KeyPiece6 : PuzzleItem 23239
{
   -INVBAR
   Inventory.MaxAmount 1
   Inventory.Icon TNT1A0
   inventory.pickupsound "misc/k_pkup"
   inventory.pickupmessage "Found Piece #6 of \chStriker\cdMan\ci780\cl's Key"
   inventory.Respawntics 600
   States
   {
   Spawn:
	  SKEY A 4
	  Loop
   }
}

actor BurningFireFlame : RocketFire
{
	Scale 0.4
	Alpha 0.7
	+NOINTERACTION
}

actor BurningFire 20522
{
 Height 56
 Radius 20
 RenderStyle Add
 DamageType "Fire"
 -SOLID
 +NODAMAGETHRUST
 +DONTSPLASH
 States
 {
 Spawn:
 TNT1 A 0
 TNT1 A 0 A_PlaySoundEx("BurningFire", "SoundSlot7", 1)
 TNT1 A 0 A_JumpIf(waterlevel == 3, "Disappear")
 TNT1 A 0 A_Explode(4, 32, 1)
 TNT1 A 2 A_SpawnItemEx("BurningFireFlame", random(-12,12), Random(-12,12), 0, 0, 0, Random(1, 3), 0, 128, 64)
 goto Spawn+2

 Disappear:
	TNT1 A 0
	TNT1 A 1
	stop
 }
}

actor Macintosh 20523
{
 Height 32
 Radius 16
 Scale 0.60
 +SOLID
 +FORCEYBILLBOARD
 States
 {
 Spawn:
 MACI A -1
 loop
 }
}

actor CompChair 20524
{
 Height 32
 Radius 16
 Scale 0.8
 +SOLID
 +FORCEYBILLBOARD
 States
 {
 Spawn:
 CHIR A -1
 loop
 }
}

ACTOR HellbenderPickup : CustomInventory 20525
{
	Radius 16
	Height 40
	Inventory.Amount 1
	Inventory.MaxAmount 1
	Inventory.PickupMessage "Hellbender!"
	inventory.respawntics 999999
	+INVENTORY.INTERHUBSTRIP
	+INVENTORY.UNDROPPABLE
	-SOLID
	States
	{
	Spawn:
		SHIP A -1
		Loop
	Pickup:
		SHIP A 0
		SHIP A 0 A_JumpIfInventory("DeathbringerCannons", 1, "ShipFail")
		SHIP A 0
		goto ShipUse
	ShipUse:
		SHIP A 0
		SHIP A 0 ACS_Execute(500, 0)
		stop
	ShipFail:
		SHIP A 0
		SHIP A 0
		stop
	}
}

Actor DeathbringerPickup : HellbenderPickup 26173
{
	Inventory.PickupMessage "Deathbringer!"
	States
	{
	Pickup:
		SHIP A 0
		SHIP A 0 A_JumpIfInventory("ValkrieCannons", 1, "ShipFail")
		SHIP A 0
		goto ShipUse
	ShipUse:
		SHIP A 0
		SHIP A 0 ACS_Execute(501, 0)
		stop
	ShipFail:
		SHIP A 0
		SHIP A 0
		stop
	}
}

ACTOR SmileyNunchuck 20526
{
	Game Doom
	Radius 4
	Height 4
	Scale 0.40
	-SOLID
	+ALLOWCLIENTSPAWN
	States
	{
	Spawn:
		UATA ABCDEFGHIJKLMNOPQRSTUVWXYZ 4
		UAT2 A 4
		UAT2 BCB 20
		Loop
	}
}

ACTOR FreezeBolt : ClericWeapon 20993
{
  Weapon.SelectionOrder 250
  Inventory.PickupSound "misc/w_pkup"
  Inventory.PickupMessage "Grabbed A Freezebolt!"
  obituary "%o suffered from cold shock due to %k's freezebolt!"
  Weapon.AmmoType1 "CellAmmo"
  Weapon.AmmoGive1 20
  Weapon.AmmoUse1 1
  +PUFFONACTORS
  +BLOODLESSIMPACT
  -BLOODSPLATTER
  AttackSound "freezebolt"
  States
  {
  Spawn:
	 HLXP A -1
	 LOOP
  Ready:
	 HLXG A 1 A_WeaponReady
	 LOOP
  Deselect:
	 HLXG A 1 A_Lower
	 LOOP
  Select:
	 HLXG A 1 A_Raise
	 LOOP
  Fire:
	 HLXG B 0 radius_quake(1, 3, 0, 1, 0)
	 HLXG B 0 A_FireCustomMissile("FreezeBoltMuzzleSparkSpawner", 0, 0, 8, 3)
	 HLXG B 1 BRIGHT A_FireBullets(3,2.5,-1,5,"FreezeShock",1)
	 HLXG CD 1
	 HLXG E 0 radius_quake(1, 3, 0, 1, 0)
	 HLXG E 0 A_FireCustomMissile("FreezeBoltMuzzleSparkSpawner", 0, 0, 8, 3)
	 HLXG E 1 BRIGHT A_FireBullets(3,2.5,-1,3,"FreezeShock",0)
	 HLXG F 1
	 HLXG G 0 radius_quake(1, 3, 0, 1, 0)
	 HLXG G 0 A_FireCustomMissile("FreezeBoltMuzzleSparkSpawner", 0, 0, 8, 3)
	 HLXG G 1 BRIGHT A_FireBullets(3,2.5,-1,5,"FreezeShock",1)
	 HLXG HI 1
	 HLXG J 0 radius_quake(1, 3, 0, 1, 0)
	 HLXG J 0 A_FireCustomMissile("FreezeBoltMuzzleSparkSpawner", 0, 0, 8, 3)
	 HLXG J 1 BRIGHT A_FireBullets(3,2.5,-1,3,"FreezeShock",0)
	 HLXG K 1
	 HLXG L 0 radius_quake(1, 3, 0, 1, 0)
	 HLXG L 0 A_FireCustomMissile("FreezeBoltMuzzleSparkSpawner", 0, 0, 8, 3)
	 HLXG L 1 BRIGHT A_FireBullets(3,2.5,-1,5,"FreezeShock",1)
	 HLXG MNOPQ 1
	 HLXG A 4 A_Refire
	 Goto Ready
  Altfire:
	 HLXK A 2 A_Playsound("Kickswing")
	 HLXK BBB 0 A_Punch
	 HLXK BCDEFGHIJ 2
	 HLXG A 10
	 HLXG A 0 A_Refire
	 goto Ready
  }
}

actor IgnitedSurfaceFlame : RocketFire
{
	Scale 0.3
	Alpha 0.7
	+NOINTERACTION
}

actor IgnitedSurface
{
 Projectile
 Height 5
 Radius 2
 BounceFactor 0.0
 obituary "%o was purified by %k's cleansing flame."
 RenderStyle Add
 Scale 0.5
 ReactionTime 160
 DamageType "Fire"
 -SOLID
 +NODAMAGETHRUST
 +LOWGRAVITY
 -NOGRAVITY
 +HEXENBOUNCE
 +SKYEXPLODE
 +DONTSPLASH
 States
 {
 Spawn:
 TFIR A 0 A_CountDown
 TNT1 A 0 A_SpawnItemEx("IgnitedSurfaceFlame", random(-8,8), Random(-8,8), 0, 0, 0, Random(1, 2), 0, 128, 64)
 TNT1 A 2 A_Explode(3, 18, 1)
 TNT1 A 0 A_JumpIf(waterlevel == 3, "Disappear")
 loop
 Death:
 TNT1 A 1
 stop
 Disappear:
 TNT1 A 0
 TNT1 A 1
 stop
 }
}

actor FlameStreamTrail : RocketFire
{
	Scale 0.36
	Alpha 0.32
	Damage 0
	+MISSILE
	-ACTIVATEIMPACT
	-ACTIVATEPCROSS
	States
	{
		Death:
			TNT1 AA 1
			stop
	}
}

actor FlameStream
{
 projectile
 Radius 4
 Height 20
 obituary "%o was burned up by %k"
 speed 20
 damage 3
 alpha 0.7
 seesound "vile/firestrt"
 renderstyle add
 DamageType "Fire"
 +RIPPER
 -BLOODSPLATTER
 +BLOODLESSIMPACT
 +NODAMAGETHRUST
 +CANNOTPUSH
 States
 {
 Spawn:
 NULL A 0
 NULL AAAA 1 BRIGHT A_SpawnItemEx("FlameStreamTrail", 0, 0, 0, Random(-1,1)+MOMX, Random(-1,1)+MOMY, Random(-1,1)+MOMZ, 0, SXF_CLIENTSIDE | SXF_ABSOLUTEMOMENTUM, 32)
 NULL A 1 BRIGHT A_SpawnItemEx("FlameStreamTrail", 0, 0, 0, Random(-2,2)+MOMX, Random(-2,2)+MOMY, Random(-2,2)+MOMZ, 0, SXF_CLIENTSIDE | SXF_ABSOLUTEMOMENTUM, 32)
 NULL A 0 BRIGHT A_SpawnItemEx("FlameStreamTrail", 0, 0, 0, Random(-3,3)+MOMX, Random(-3,3)+MOMY, Random(-3,3)+MOMZ, 0, SXF_CLIENTSIDE | SXF_ABSOLUTEMOMENTUM, 32)
 NULL A 1 BRIGHT A_SpawnItemEx("FlameStreamTrail", 0, 0, 0, Random(-3,3)+MOMX, Random(-3,3)+MOMY, Random(-3,3)+MOMZ, 0, SXF_CLIENTSIDE | SXF_ABSOLUTEMOMENTUM, 32)
 NULL A 0 BRIGHT A_SpawnItemEx("FlameStreamTrail", 0, 0, 0, Random(-3,3)+MOMX, Random(-3,3)+MOMY, Random(-3,3)+MOMZ, 0, SXF_CLIENTSIDE | SXF_ABSOLUTEMOMENTUM, 32)
 NULL A 1 BRIGHT A_SpawnItemEx("FlameStreamTrail", 0, 0, 0, Random(-4,4)+MOMX, Random(-4,4)+MOMY, Random(-4,4)+MOMZ, 0, SXF_CLIENTSIDE | SXF_ABSOLUTEMOMENTUM, 32)
 NULL A 18 BRIGHT
 stop
 Death:
 TNT1 A 0
 TNT1 A 0 A_Jump(32, "NoIgnite")
 TNT1 A 1 A_CustomMissile("IgnitedSurface", random(5,15), random(-15, 15), 0, 0)
 stop
 NoIgnite:
 TNT1 A 0
 TNT1 A 1
 stop
 }
}

actor FlameStreamStart : FlameStream
{
	Seesound "FlameThrower"
}

ACTOR FlameThrowerWeap : ClericWeapon 20994
{
  Weapon.SelectionOrder 300
  Inventory.PickupSound "misc/w_pkup"
  Inventory.PickupMessage "Picked Up A Flamethrower! Burn Baby Burn!"
  obituary "%o was burned up by %k"
  weapon.upsound "FlameThrowerRaise"
  Weapon.AmmoType1 "GasolineAmmo"
  Weapon.AmmoGive1 200
  Weapon.AmmoUse1 1
  +BLOODLESSIMPACT
  -BLOODSPLATTER
  Damagetype "Fire"
  Scale 0.90
  States
  {
  Spawn:
	 FLMT A -1
	 LOOP
  Ready:
	 FLAM A 0 A_PlaySoundEx("FlameThrowerIdle", "SoundSlot7", 1, -1)
	 FLAM A 0 A_JumpIf(waterlevel == 3, "WaterReady")
	 FLAM A 0 A_TakeInventory("LaserHeat", 1)
	 FLAM A 1 A_WeaponReady
	 FLAM B 0 A_TakeInventory("LaserHeat", 1)
	 FLAM B 1 A_WeaponReady
	 FLAM C 0 A_TakeInventory("LaserHeat", 1)
	 FLAM C 1 A_WeaponReady
	 goto Ready+1
  WaterReady:
	 FLAM E 0 A_TakeInventory("LaserHeat", 100)
	 FLAM E 0 A_PlayWeaponSound("FlameThrowerCool")
	 FLAM E 0 A_StopSoundEx("SoundSlot7")
	 FLAM E 1 A_WeaponReady
	 goto WaterReady+3
  Deselect:
	 FLAM A 0 A_StopSoundEx("SoundSlot7")
	 FLAM A 0 A_TakeInventory("LaserHeat", 100)
	 FLAM ABC 1 A_Lower
	 goto Deselect+2
  Select:
	 FLAM ABC 1 A_Raise
	 loop
  Fire:
	 FLAF A 0 A_JumpIf(waterlevel == 3, "WaterFire")
	 FLAF A 0 radius_quake(2, 2, 0, 1, 0)
	 FLAF A 0 A_PlayWeaponSound("FlameThrowerIgnite")
	 FLAF A 0 A_GiveInventory("LaserHeat", 1)
	 FLAF A 2 BRIGHT A_FireCustomMissile("FlameStreamStart", 0, 1, 12, 0)
	 FLAF B 0 A_GiveInventory("LaserHeat", 1)
	 FLAF B 2 BRIGHT A_FireCustomMissile("FlameStream", 0, 1, 12, 0)
	 FLAM A 1 A_Refire
	 FLAM A 0 A_TakeInventory("LaserHeat", 10)
	 Goto Ready
  Hold:
	 FLAF A 0 A_JumpIf(waterlevel == 3, "WaterFire")
	 FLAF A 0 A_JumpIfInventory("LaserHeat", 100, "Cooloff")
	 FLAF A 0 A_PlaySoundEx("FlameThrowerLoop", "SoundSlot7", 1, -1)
	 FLAF A 0 A_GiveInventory("LaserHeat", 1)
	 FLAF A 2 BRIGHT A_FireCustomMissile("FlameStream", 0, 1, 12, 0)
	 FLAF B 0 A_GiveInventory("LaserHeat", 1)
	 FLAF B 2 BRIGHT A_FireCustomMissile("FlameStream", 0, 1, 12, 0)
	 FLAM A 1 A_Refire
	 FLAF A 0 A_StopSoundEx("SoundSlot7")
	 FLAM A 0 A_PlaySoundEx("FlameThrowerVent", auto, 0)
	 FLAM A 0 A_PlayWeaponSound("FlameThrowerCool")
	 FLAM ABCABC 2 A_FireCustomMissile("CoolingSmoke", random(-5, 5), 0, 3, 7)
	 FLAM A 0 A_TakeInventory("LaserHeat", 10)
	 FLAM A 0 A_FireCustomMissile("CoolingSmoke2", random(-3, 3), 0, 3, 7)
	 FLAM A 1 A_Refire
	 FLAM B 0 A_TakeInventory("LaserHeat", 5)
	 FLAM B 0 A_FireCustomMissile("CoolingSmoke2", random(-3, 3), 0, 3, 7)
	 FLAM B 1 A_Refire
	 FLAM C 0 A_TakeInventory("LaserHeat", 5)
	 FLAM C 0 A_FireCustomMissile("CoolingSmoke2", random(-3, 3), 0, 3, 7)
	 FLAM C 1 A_Refire
	 FLAM A 0 A_TakeInventory("LaserHeat", 5)
	 FLAM A 0 A_FireCustomMissile("CoolingSmoke2", random(-3, 3), 0, 3, 7)
	 FLAM A 1 A_Refire
	 FLAM B 0 A_TakeInventory("LaserHeat", 5)
	 FLAM B 0 A_FireCustomMissile("CoolingSmoke2", random(-3, 3), 0, 3, 7)
	 FLAM B 1 A_Refire
	 FLAM C 0 A_FireCustomMissile("CoolingSmoke2", random(-3, 3), 0, 3, 7)
	 FLAM C 1 A_Refire
	 FLAM A 0 A_FireCustomMissile("CoolingSmoke2", random(-3, 3), 0, 3, 7)
	 FLAM A 1 A_Refire
	 FLAM B 0 A_FireCustomMissile("CoolingSmoke2", random(-3, 3), 0, 3, 7)
	 FLAM B 1 A_Refire
	 FLAM C 0 A_FireCustomMissile("CoolingSmoke2", random(-3, 3), 0, 3, 7)
	 FLAM C 1 A_Refire
	 goto Ready
  Cooloff:
	 FLAF A 0 A_StopSoundEx("SoundSlot7")
	 FLAM A 0 A_PlaySoundEx("FlameThrowerVent", auto, 0)
	 FLAM A 0 A_PlayWeaponSound("FlameThrowerCool")
	 FLAM ABCABC 2 A_FireCustomMissile("CoolingSmoke", random(-5, 5), 0, 3, 7)
	 FLAM A 0 A_TakeInventory("LaserHeat", 10)
	 FLAM A 0 A_FireCustomMissile("CoolingSmoke2", random(-3, 3), 0, 3, 7)
	 FLAM A 1
	 FLAM B 0 A_TakeInventory("LaserHeat", 10)
	 FLAM B 0 A_FireCustomMissile("CoolingSmoke2", random(-3, 3), 0, 3, 7)
	 FLAM B 1
	 FLAM C 0 A_TakeInventory("LaserHeat", 10)
	 FLAM C 0 A_FireCustomMissile("CoolingSmoke2", random(-3, 3), 0, 3, 7)
	 FLAM C 1
	 FLAM A 0 A_TakeInventory("LaserHeat", 10)
	 FLAM A 0 A_FireCustomMissile("CoolingSmoke2", random(-3, 3), 0, 3, 7)
	 FLAM A 1
	 FLAM B 0 A_TakeInventory("LaserHeat", 10)
	 FLAM B 0 A_FireCustomMissile("CoolingSmoke2", random(-3, 3), 0, 3, 7)
	 FLAM B 1
	 FLAM CABC 1 A_FireCustomMissile("CoolingSmoke2", random(-3, 3), 0, 3, 7)
	 FLAM CABCABCABCABCAB 1
	 FLAM C 1 A_Refire
	 goto Ready
  WaterFire:
	 FLAM E 0 A_TakeInventory("LaserHeat", 100)
	 FLAM E 0 A_JumpIf(waterlevel == 0, "Ready")
	 FLAM E 0 A_JumpIf(waterlevel == 1, "Ready")
	 FLAM E 0 A_StopSoundEx("SoundSlot7")
	 FLAM E 20 A_PlayWeaponSound("FlameThrowerCool")
	 goto WaterReady+3
  }
}

actor RifleSmoke
{
	Projectile
	Speed 20
	Radius 1
	Height 1
	Damage 0
	States
	{
		Spawn:
		TNT1 A 0
		TNT1 A 1
		TNT1 A 0 A_Jump(128, "Spawn2")
		TNT1 A 0 A_SpawnItemEx("BulletSmoke", 0, 0, 0, 0, 0, 1, 0, 128, 0)
		stop
		Spawn2:
		TNT1 A 0 A_SpawnItemEx("BulletSmoke2", 0, 0, 0, 0, 0, 1, 0, 128, 0)
		stop
	}
}

ACTOR MoritaClip : Ammo
{
	Inventory.MaxAmount 60 // size of the clip
	Ammo.BackpackAmount 0
	Ammo.BackpackMaxAmount 60 //MUST be the same as Inventory.MaxAmmount
	Inventory.Icon "MAGICON2"
	+IGNORESKILL
}

actor SmartRifle : ClericWeapon 23501
{
  decal BulletChip
  obituary "%o was overpowered by %k's SmartRifle."
  Inventory.PickupSound "misc/w_pkup"
  Inventory.PickupMessage "Got A SmartRifle!"
  weapon.selectionorder 120
  weapon.kickback 100
  Weapon.AmmoType1 "MoritaClip"
  Weapon.AmmoGive 60
  Weapon.AmmoUse1 1
  Weapon.AmmoType2 "MechAmmo"
  Weapon.AmmoUse2 0
  Weapon.AmmoGive2 60
  +WEAPON.AMMO_OPTIONAL
  Scale 0.45
  states
  {
  Spawn:
   MRIP A -1
   loop
  Ready:
  	MORI A 0 A_WeaponReady
  	goto ReloadCheck
	MORI A 1 A_WeaponReady
	goto Ready+1
  Deselect:
	MORI A 1 A_Lower
	loop
  Select:
	MORI A 1 A_Raise
	loop
  Fire:
    MRIT A 0 A_JumpIfNoAmmo("ReloadCheck")
	MRIT A 0 A_PlaysoundEX("MoritaFire", Weapon, 0)
	MRIT A 0 A_FireBullets (2, 1, 1, 10, "NewBulletPuff")
	MRIT A 0 radius_quake(1, 2, 0, 1, 0)
	MRIT AAAAAA 0 A_FireCustomMissile("GunSpark", Random(-6,6), 0, 8, 3)
	MRIT A 0 A_FireCustomMissile("RifleSmoke", 0, 0, 12, 2)
	MRIT A 2 BRIGHT A_Gunflash
	MRIT B 0 A_FireCustomMissile("BulletCasingSpawnerLeft",45+random(-8,8),0,1,6)
	MRIT B 1 BRIGHT
	MORI A 2
	MORI A 0 A_ReFire
	goto Ready+1
  Hold:
  	MRIT A 0 A_JumpIfNoAmmo("ReloadCheck")
	MRIT A 0 A_PlaysoundEX("MoritaFire", Weapon, 0)
	MRIT A 0 A_FireBullets (2, 1, 1, 9, "NewBulletPuff")
	MRIT A 0 radius_quake(1, 2, 0, 1, 0)
	MRIT AAAAAA 0 A_FireCustomMissile("GunSpark", Random(-6,6), 0, 8, 3)
	MRIT A 0 A_FireCustomMissile("RifleSmoke", 0, 0, 12, 2)
	MRIT A 2 BRIGHT A_Gunflash
	MRIT B 0 A_FireCustomMissile("BulletCasingSpawnerLeft",45+random(-8,8),0,1,6)
	MRIT B 1 BRIGHT
	MORI A 2
	MORI A 0 A_ReFire
	goto Ready+1
  AltFire:
  	MORI A 0 A_JumpIfInventory("SpreadAmmo", 1, "ShotgunFire")
  	MORI A 0
  	goto Ready+1
  ShotgunFire:
	MORI A 0 A_PlaysoundEX("MoritaShotgun", Weapon, 0)
	MORI A 0 radius_quake(6, 3, 0, 1, 0)
	MORI A 0 A_TakeInventory("SpreadAmmo", 1)
	MORI B 1 BRIGHT A_FireBullets (4, 4, 15, 3, "NewBulletPuff")
	MORI C 1 BRIGHT
	MORI A 12
	MORI A 0 A_FireCustomMissile("ShellCasingSpawnerLeft",45+random(-8,8),0,1,6)
	MORI A 0 A_PlaySoundEx("MoritaPump", "Auto", 0)
	MORI A 1 Offset (2, 40)
	MORI A 1 Offset (4, 45)
	MORI A 1 Offset (6, 50)
	MORI A 1 Offset (8, 55)
	MORI A 1 Offset (10, 60)
	MORI A 1 Offset (12, 65)
	MORI A 1 Offset (14, 70)
	MORI A 1 Offset (16, 80)
	MORI A 1 Offset (18, 90)
	MORI A 1 Offset (20, 92)
	MORI A 1 Offset (18, 80)
	MORI A 1 Offset (16, 70)
	MORI A 1 Offset (12, 60)
	MORI A 1 Offset (8, 50)
	MORI A 1 Offset (4, 40)
	MORI A 1 Offset (2, 30)
	MORI A 5 Offset (1, 32)
	MORI A 7
	MORI A 0 A_Refire
	goto Ready+1

  ReloadCheck:
	MORR A 0 A_JumpIfInventory("MoritaClip",60,2)
	MORR A 0 A_JumpIfInventory("MechAmmo",1,"ReloadStart")
	MORR A 0
	goto Ready+1

  ReloadStart:
	MORR A 2 A_PlaySoundEx("MoritaClipOut", "Auto", 0)
	MORR B 2
	MORR CDEFGHIJK 3
	goto ReloadAmmo

  ReloadAmmo:
	TNT1 A 0 A_TakeInventory("MechAmmo",1)
	TNT1 A 0 A_GiveInventory("MoritaClip",1)
	TNT1 A 0 A_JumpIfInventory("MoritaClip",60,"ReloadDone")
	TNT1 A 0 A_JumpIfInventory("MechAmmo",1,"ReloadAmmo")
	goto ReloadDone

  ReloadDone:
	MORR L 3 A_PlaySoundEx("MoritaClipIn", "Auto", 0)
	MORR MNOPQR 3
	MORR STUVW 2
	MORR X 0 A_PlaySoundEx("MoritaBolt", "Auto", 0)
	MORR XYZ 2
	MOR2 ABCDEF 2
	goto Ready+1

  Flash:
	TNT1 A 1 bright A_Light1
	TNT1 A 0 bright A_Light0
	stop
  }
}

ACTOR P90Clip : Ammo
{
	Inventory.MaxAmount 80 // size of the clip
	Ammo.BackpackAmount 0
	Ammo.BackpackMaxAmount 80 //MUST be the same as Inventory.MaxAmmount
	Inventory.Icon "MAGICON2"
	+IGNORESKILL
}

actor P90 : ClericWeapon 24302
{
  decal BulletChip
  obituary "%o was perforated by %k's P90."
  Inventory.PickupSound "misc/w_pkup"
  Inventory.PickupMessage "Oooh, A P90! (AKA. Lead Flinger!)"
  weapon.selectionorder 900
  weapon.kickback 80
  Weapon.AmmoType1 "P90Clip"
  Weapon.AmmoType2 "MechAmmo"
  Weapon.AmmoGive2 80
  Weapon.AmmoUse1 1
  attacksound "p90fire"
  +WEAPON.AMMO_OPTIONAL
  Scale 0.68
  states
  {
  Spawn:
   P90P A -1
   loop
  Ready:
	P90G A 0 A_WeaponReady
  	goto ReloadCheck
	P90G A 1 A_WeaponReady
	goto Ready+1
  Deselect:
	P90G A 1 A_Lower
	loop
  Select:
	P90G A 1 A_Raise
	loop
  Fire:
	P90G B 0 A_JumpIfNoAmmo("ReloadCheck")
	P90G B 0 BRIGHT radius_quake(1, 2, 0, 1, 0)
	P90G B 0 BRIGHT A_GunFlash
	P90G B 1 BRIGHT A_FireBullets (5, 5, -1, 4, "NewBulletPuff")
	P90G B 0 BRIGHT
	P90G C 1 BRIGHT A_FireBullets (5, 5, -1, 4, "NewBulletPuff")
	P90G A 1
	P90G D 0 A_ReFire
	goto Ready+1
  Flash:
	P90F A 2 BRIGHT A_Light1
	P90F B 1 BRIGHT A_Light0
	stop
  AltFire:
  	P90G A 0
  	goto ReloadCheck
	
  ReloadCheck:
	P9R1 A 0 A_JumpIfInventory("P90Clip",80,2)
	P9R1 A 0 A_JumpIfInventory("MechAmmo",1,"ReloadStart")
	P9R1 A 0
	goto Ready+1

  ReloadStart:
	P9R1 ABCDE 2
	P9R1 F 0 A_PlaySoundEx("P90Unlock", "auto", 0)
	P9R1 FGH 2
	P9R1 I 0 A_PlaySoundEx("P90ClipOut", "auto", 0)
	P9R1 IJKLMNOP 2
	P9R1 Q 4
	P9R1 RS 2
	P9R1 T 0 A_PlaySoundEx("P90ClipIn", "auto", 0)
	P9R1 TUVWXYZ 2
	P9R2 ABC 2
	goto ReloadAmmo

  ReloadAmmo:
	TNT1 A 0 A_TakeInventory("MechAmmo",1)
	TNT1 A 0 A_GiveInventory("P90Clip",1)
	TNT1 A 0 A_JumpIfInventory("P90Clip",80,"ReloadDone")
	TNT1 A 0 A_JumpIfInventory("MechAmmo",1,"ReloadAmmo")
	goto ReloadDone

  ReloadDone:
	P9R3 ABC 2
	P9R3 D 0 A_PlaySoundEx("P90Cock", "auto", 0)
	P9R3 DEFGHIJK 2
	P9R3 LMNOPQRSTU 1
	goto Ready+1
  }
}

actor FairyBow : FighterWeapon
{
  decal BulletChip
  obituary "%o was shot by %k's fairy bow."
  Inventory.PickupSound "misc/w_pkup"
  Inventory.PickupMessage "Recovered A Fairy Bow!"
  weapon.selectionorder 2900
  weapon.kickback 80
  Weapon.AmmoType1 "MechAmmo"
  Weapon.AmmoGive 0
  Weapon.AmmoUse1 0
  Weapon.AmmoType2 "CellAmmo"
  AttackSound "instagibbow"
  +WEAPON.NOALERT
  +WEAPON.CHEATNOTWEAPON
  Scale 0.80
  states
  {
  Ready:
	FBOW A 1 A_WeaponReady
	loop
  Deselect:
	FBOW A 1 A_Lower
	loop
  Select:
	FBOW A 1 A_Raise
	loop
  Fire:
	FBOW A 0 A_PlaysoundEX("BowPull", Auto, 0)
	FBOW ABCDE 1
	FBOW E 0 A_Refire
	goto Ready
  Hold:
	FBOW E 0 A_JumpIfInventory("RailGunCoreInstagib", 1, "RailHold")
	FBOW E 2
	FBOW E 0
	FBOW E 0 A_Refire
	FBOW E 0 A_JumpIfInventory("MechAmmo", 1, "NormalFire")
	goto Ready
  NormalFire:
	FBOW A 0 A_TakeInventory("MechAmmo", 1)
	FBOW A 10 A_FireCustomMissile("FairyArrow", 0, 1, 0, 0)
	goto Ready
  RailHold:
	FBOW E 2
	FBOW E 0
	FBOW E 0 A_Refire
	FBOW E 0 A_JumpIfInventory("CellAmmo", 10, "RailFire")
	goto Ready
  RailFire:
	FBOW A 0 A_TakeInventory("CellAmmo", 10)
	FBOW A 12 A_RailAttack(58, 0, 0, none, "40 FF 40")
	goto Ready
  Flash:
	TNT1 A 0
	stop
  }
}

actor FairyArrow
{
	projectile
	Radius 2
	Height 2
	Speed 70
	Damage 10
	PoisonDamage 5
	Seesound "Bowshoot"
	Deathsound "Bowhit"
	Gravity 0.1
	-NOGRAVITY
	+BLOODSPLATTER
	+NOEXTREMEDEATH
	+FORCEXYBILLBOARD
	States
	{
		Spawn:
			ARWP A 1
			loop
		XDeath:
			TNT1 A 0
			TNT1 A 0 A_GiveToTarget("HitConfirmation", 1)
			goto Death
		Death:
			PUFF BCD 1
			stop
	}
}

actor IPodLauncher : ClericWeapon 24305
{
  decal BulletChip
  obituary "%o swallowed %k's IPod."
  Inventory.PickupSound "misc/w_pkup"
  Inventory.PickupMessage "Picked Up The IPod Launcher!"
  weapon.selectionorder 1000
  weapon.kickback 80
  Weapon.AmmoType1 "CellAmmo"
  Weapon.AmmoType2 "CellAmmo"
  Weapon.AmmoGive 40
  Weapon.AmmoUse1 1
  Weapon.AmmoUse2 20
  +WEAPON.NOALERT
  Scale 0.95
  states
  {
  Spawn:
   IPDP A -1
   loop
  Ready:
	IPDG A 1 A_WeaponReady
	loop
  Deselect:
	IPDG A 1 A_Lower
	loop
  Select:
	IPDG A 1 A_Raise
	loop
  Fire:   // 2 Frames, LOL! (Animator Got Lazy)
	IPDG A 0 A_PlaysoundEX("IPodLaunch", Weapon, 0)
	IPDG B 3 A_FireCustomMissile("IPod", 0, 1, 8, 0)
	IPDG A 4
	IPDG A 0 A_Refire
	goto Ready
  AltFire:	 // 2 Frames, LOL! (Animator Got Lazy)
	IPDG A 0 A_PlaysoundEX("IPodLaunch", Weapon, 0)
	IPDG B 6 A_FireCustomMissile("GiantIPod", 0, 1, 8, 0)
	IPDG A 30
	IPDG A 0 A_Refire
	goto Ready
  Flash:
	TNT1 A 0
	stop
  }
}

actor WeatherBall : HornRodFX2 Replaces HornRodFX2
{
	Speed 30
	Damage 10
	+NODAMAGETHRUST
	+FORCEXYBILLBOARD
	states
	{
		XDeath:
			TNT1 A 0
			TNT1 A 0 A_GiveToTarget("HitConfirmation", 1)
			goto Death
	}
}

actor RainPillarZ : RainPillar Replaces RainPillar
{
	Damage 12
	+NODAMAGETHRUST
	states
	{
		XDeath:
			TNT1 A 0
			TNT1 A 0 A_GiveToTarget("HitConfirmation", 1)
			goto Death
	}
}

actor WeatherMaker : Weapon 24306
{
  decal BulletChip
  obituary "%o got rained on by %k's weathermaker."
  Inventory.PickupSound "misc/w_pkup"
  Inventory.PickupMessage "Got the WeatherMaker! Muahaha!"
  weapon.selectionorder 900
  weapon.kickback 200
  Weapon.AmmoType1 "CellAmmo"
  Weapon.AmmoGive 60
  Weapon.AmmoUse1 5
  states
  {
  Spawn:
   WTHP A -1
   loop
  Ready:
	WEAT AABBCCDD 1 A_WeaponReady
	WEAT A 0 A_Playsound("WeatherBuzz")
	loop
  Deselect:
	WEAT A 1 A_Lower
	loop
  Select:
	WEAT A 1 A_Raise
	loop
  Fire:
	WEAT A 0 A_PlaysoundEX("WeatherMaker", Weapon, 0)
	WEAT E 1 A_FireCustomMissile("WeatherBall", 0, 1, 0, 0)
	WEAT F 1
	WEAT G 1
	WEAT FE 2
	WEAT ABCDABCDABCD 2
	WEAT A 0 A_Refire
	goto Ready
  Flash:
	TNT1 A 0
	stop
  }
}

ACTOR ExcalibatRepulsion : ArtiBlastRadius
{
+AUTOACTIVATE
}

ACTOR Excalibat : Weapon 23502
{
  Weapon.SelectionOrder 200
  Inventory.PickupSound "misc/w_pkup"
  Inventory.PickupMessage "The Excalibat! Homerun!"
  obituary "%o is a human baseball!"
  Weapon.AmmoType1 "None"
  Weapon.AmmoGive1 0
  Weapon.AmmoUse1 0
  +PUFFONACTORS
  Weapon.Kickback 999999
  Scale 0.80
  +FLOATBOB
  States
  {
  Spawn:
	 EXBP A -1 BRIGHT
	 LOOP
  Ready:
	 EXBA A 1 A_WeaponReady
	 LOOP
  Deselect:
	 EXBA A 1 A_Lower
	 LOOP
  Select:
	 EXBA A 1 A_Raise
	 LOOP
  Fire:
	 EXBA A 2 A_Playsound("BatSwing")
	 EXBA B 3
	 EXBA C 2
	 EXBA D 1 A_GiveInventory("ExcalibatRepulsion",1)
	 EXBA D 0 A_Punch
	 EXBA D 0 A_Punch
	 EXBA D 0 A_Punch
	 EXBA D 0 A_Punch
	 EXBA D 0 A_Punch
	 EXBA D 0 A_Punch
	 EXBA D 1 A_Punch
	 EXBA E 2
	 EXBA F 2
	 EXBA G 2
	 TNT1 A 3
	 EXBA A 3
	 EXBA A 0 A_Refire
	 goto Ready
  }
}

actor ReflectSphere : CustomInventory 10492
{
  inventory.pickupmessage "Reflection Sphere!"
  inventory.pickupsound "misc/p_pkup"
  +COUNTITEM
  +AUTOACTIVATE
  +FORCEXYBILLBOARD
  +FLOATBOB
  RenderStyle Add
  Alpha 0.7
  Scale 0.70
  states
  {
  Spawn:
	REFS A -1 BRIGHT
	stop
  Pickup:
	TNT1 A 0 A_Giveinventory("SoulSphere", 1)
	TNT1 A 0 A_Giveinventory("RedArmor", 200)
	TNT1 A 0 A_Giveinventory("GuardSphere", 1)
	TNT1 A 0 A_SetReflective
	stop
  }
}

actor Magnum : ClericWeapon 10493
{
  decal BulletChip
  obituary "I guess %o didn't feel so lucky, %k."
  Inventory.PickupSound "misc/w_pkup"
  Inventory.PickupMessage "\cjA .44 Magnum! \ci''Go Ahead, Make my Day!''"
  attacksound "magnum"
  weapon.selectionorder 500
  weapon.kickback 125
  Weapon.AmmoType1 "MechAmmo"
  Weapon.AmmoGive 20
  Weapon.AmmoUse1 1
  scale 0.78
  states
  {
  Spawn:
   REVP A -1
   loop
  Ready:
	REVG A 1 A_WeaponReady
	loop
  Deselect:
	REVG A 1 A_Lower
	loop
  Select:
	REVG A 1 A_Raise
	loop
  Fire:
	REVG H 2
	REVG A 1
	REVG A 0 A_GunFlash
	REVG A 0 Radius_Quake(3, 2, 0, 1, 0)
	REVG B 2 BRIGHT A_FireBullets (2, 1.5, -1, 16, "NewBulletPuff")
	REVG C 3
	REVG D 4
	REVG E 2
	REVG F 2
	REVG A 3 A_ReFire
	goto Ready
  Flash:
	TNT1 A 2 A_Light1
	TNT1 A 1 A_Light0
	stop
  }
}

ACTOR LaserHeat : Inventory
{
   Inventory.MaxAmount 100
   Inventory.Icon STTPRCNT
   -INVBAR
}

actor LaserTrail
{
 Radius 1
 Height 1
 RenderStyle Add
 Alpha 0.8
 +FORCEXYBILLBOARD
 +CORPSE
 +NOGRAVITY
 States
 {
 Spawn:
 LASR AAA 2 BRIGHT A_FadeOut(0.1)
 stop
 Death:
 TNT1 A 1
 stop
 }
}

actor LaserShot
{
	Decal LaserScorch
	Projectile
	Radius 12
	Height 8
	Speed 80
	Damage 11
	RenderStyle Add
	Alpha 0.8
	SeeSound "LaserRifle"
	DeathSound "LaserHit"
	obituary "%o was fried by %k's laser."
	+FORCEXYBILLBOARD
	States
	{
		Spawn:
			LASR A 1 BRIGHT A_SpawnItemEX("LaserTrail", 0, 0, 0, 0, 0, 0, 0, 128, 0)
			loop
 		XDeath:
			TNT1 A 0
			TNT1 A 0 A_GiveToTarget("HitConfirmation", 1)
			goto Death
		Death:
			LASR B 0 A_SetTranslucent(1.0, 0)
			LASR BCDEFG 2 BRIGHT
			stop
	}
}

// Code Based on the Laser Rifle from Wildweasel's
// "Batteries Still not Included" WAD, great Wad, go
// Check it out at Wildweasel's DOOM Armory Site
// At: http://armory.drdteam.org
// Sprites from Star Wars: Dark Forces

// Removed Secondary Fire for Balance
// Also, Primary Fire is Stronger.

ACTOR LaserRifle1 : Weapon 13422
{
   Decal BulletChip
   Weapon.SelectionOrder 550
   Inventory.PickupSound "misc/w_pkup"
   Inventory.PickupMessage "Laser Rifle! Melt Em' Down!"
   Weapon.AmmoType1 "CellAmmo"
   obituary "%o was fried by %k's laser."
//	 Weapon.AmmoType2 "HeatLevel"
   Weapon.AmmoGive 30
   Weapon.AmmoUse1 2
   Weapon.Kickback 20
   AttackSound "LaserRifle"
   States
   {
   Spawn:
	  LRIP A -1
	  Loop
   Ready:
	  PRFG A 1 A_WeaponReady
	  PRFG A 0 A_TakeInventory("LaserHeat",1)
	  PRFG A 0 A_WeaponReady
	  Loop
   Deselect:
	  PRFG A 1 A_Lower
	  PRFG A 0 A_TakeInventory("LaserHeat", 500)
	  Loop
   Select:
	  PRFG A 1 A_Raise
	  PRFG A 0 A_TakeInventory("LaserHeat", 500)
	  Loop
   Fire:
	  PRFG A 0 A_JumpIfInventory("LaserHeat",90,"OverHeated")
	  PRFG A 0 A_GiveInventory("LaserHeat",10)
	  PRFF A 0 BRIGHT A_FireCustomMissile("LaserShot", 0, 1, 6, 0)
	  PRFF A 2 BRIGHT // A_PlaySound("LaserRifle")
	  PRFG A 10
	  Goto Ready
   OverHeated:
	  PRFG B 3 A_PlaySound("OverHeated")
	  PRFG C 3
	  PRFG D 4
	  PRFG A 2
	  goto Ready
   }
}

ACTOR BioBurstDrop
{
	renderstyle add
	Radius 1
	Height 1
	alpha 0.5
	Health 1
	Speed 4
	Damage 1
	Mass 9
	Scale .8
	ReactionTime 800
	BounceFactor 0
	+HEXENBOUNCE
	+MISSILE
	+STRIFEDAMAGE
	- nogravity
	+DONTSPLASH
	+CORPSE
	States
	{
	Spawn:
		SLDG A 1 BRIGHT A_CountDown
		loop
	Death:
		TNT1 A 1
		stop
	Crash:
		BPUD A 80 BRIGHT
		BPUD A 3 BRIGHT A_FadeOut
		goto Crash+1
	}
}

ACTOR BioBall
{
	Radius 8
	Height 1
	Health 1
	Damage 8
	PoisonDamage 50
	Speed 38
	Renderstyle Add
	Alpha 0.9
	SeeSound "BioRifle"
	DeathSound "BioGoo"
	Projectile
	+RIPPER
	+CORPSE
	+NODAMAGETHRUST
	+DONTSPLASH
	+FORCERADIUSDMG
	-NOGRAVITY
	States
	{
	Spawn:
	  SBS3 A 0
	  SBS3 A 0 BRIGHT ThrustThingZ(0, random(12, 16), 0, 1)
	  SBS3 A 1 BRIGHT A_NoGravity
	  SBS3 BC 1 BRIGHT
	  SBS3 A 0 BRIGHT A_Gravity
	  SBS3 AABBCC 1 BRIGHT
	  goto Spawn+5
	Death:
	  SBS3 A 0 A_NoGravity
	  SBS3 A 0 A_Jump(127, 6)
	  SBS3 ABCABCABCABCABCABCABCABCABCABCABCABCABCABCABCABCABCABC 2 BRIGHT
	  SLDG EEEEEEEE 0 A_SpawnItemEx("BioBurstDrop", 0, 0, 0, Random(-2, 2), Random(-2, 2), Random(2, 8), 0, 0, 0)
	  SLDG E 0 A_PlaySound("BioBurst")
	  SLDG E 0 A_Explode(112, 100, 1)
	  SLDG EFGH 2 BRIGHT
	  Stop
	Crash:
	  SBS4 A 0 A_Jump(127, 6)
	  SBS4 A 0 A_Jump(80, 10)
	  SBS4 ABCABCABCABCABCABCABCABCABCABCABCABCABCABCABCABCABCABCABCABCABC 2 BRIGHT A_Explode(2, 14, 0)
	  SLDG EEEEEEEE 0 A_SpawnItemEx("BioBurstDrop", 0, 0, 0, Random(-2, 2), Random(-2, 2), Random(2, 8), 0, 0, 0)
	  SLDG E 0 A_PlaySound("BioBurst")
	  SLDG E 0 A_Explode(90, 80, 1)
	  SLDG EFGH 2 BRIGHT
	  Stop
	}
}

ACTOR SlowBioBall : Bioball
{
	Radius 2
	Height 1
	Health 1
	Damage 8
	PoisonDamage 50
	Decal BioRifle
	Speed 10
	-NOGRAVITY
	States
	{
	Spawn:
	  SBS3 ABC 1 BRIGHT
	  loop
	}
}

ACTOR GiantBioBall
{
	Decal BioRifle
	Radius 8
	Height 1
	Damage 14
	PoisonDamage 50
	Speed 38
	Scale 2.0
	Renderstyle Add
	Alpha 0.9
	SeeSound "BioRifle"
	DeathSound "BioGoo"
	Projectile
	+RIPPER
	+CORPSE
	+NODAMAGETHRUST
	+DONTSPLASH
	+FORCERADIUSDMG
	-NOGRAVITY
	States
	{
	Spawn:
	  SBS3 A 0
	  SBS3 A 0 BRIGHT ThrustThingZ(0, 14, 0, 1)
	  SBS3 A 1 BRIGHT A_NoGravity
	  SBS3 BC 1 BRIGHT
	  SBS3 A 0 BRIGHT A_Gravity
	  SBS3 AABBCC 1 BRIGHT
	  goto Spawn+5
	Death:
	  SBS3 A 0 A_NoGravity
	  SBS3 A 0 A_Jump(127, 6)
	  SBS3 ABCABCABCABCABCABCABCABCABCABCABCABCABCABCABCABCABCABC 2 BRIGHT
	  SLDG EEEEEEEE 0 A_CustomMissile("SlowBioBall",17,0,Random(-360,360), 6, random(-360, 360))
	  SLDG E 0 A_PlaySound("BioBurst")
	  SLDG E 0 A_Explode(140, 134, 1)
	  SLDG EFGH 2 BRIGHT
	  Stop
	Crash:
	  SBS4 A 0 A_Jump(127, 6)
	  SBS4 A 0 A_Jump(80, 10)
	  SBS4 ABCABCABCABCABCABCABCABCABCABCABCABCABCABCABCABCABCABCABCABCABC 2 BRIGHT A_Explode(5, 24, 0)
	  SLDG EEEEEEEE 0 A_CustomMissile("SlowBioBall",17,0,Random(-360,360), 6, random(0, 180))
	  SLDG E 0 A_PlaySound("BioBurst")
	  SLDG E 0 A_Explode(128, 128, 1)
	  SLDG EFGH 2 BRIGHT
	  Stop
	}
}

ACTOR BioRifle : Weapon 19982
{
   Inventory.PickupSound "misc/w_pkup"
   Inventory.PickupMessage "You got the BioRifle!"
	Obituary "%o got slimed by %k's BioRifle!"
   Weapon.AmmoType "CellAmmo"
   Weapon.AmmoGive 100
   Weapon.AmmoType2 "CellAmmo"
   Weapon.AmmoUse 2
   Weapon.AmmoUse2 12
   AttackSound "BioRifle"
   Weapon.Kickback 200
   Weapon.SelectionOrder 1500
   States
   {
   Spawn:
	  BIOP A -1
	  Loop
   Ready:
	  BIOG A 1 A_WeaponReady
	  Loop
   Deselect:
	  BIOG A 1 A_Lower
	  Loop
   Select:
	  BIOG A 0 A_Raise
	  BIOG A 1 A_Raise
	  Loop
   Fire:
	  BIOG B 2 BRIGHT A_FireCustomMissile("BioBall",random(-1,1),2,6,0)
	  BIOG C 1 BRIGHT
	  BIOG D 1 BRIGHT
	  BIOG E 1 BRIGHT
	  BIOG F 1 BRIGHT
	  BIOG GH 1
	  BIOG A 3
	  BIOG A 0 A_Refire
	  Goto Ready
   AltFire:
	  BIOG AAAAAAAAA 5 A_PlayWeaponSound("Gasoline")
	  BIOG B 1 BRIGHT A_FireCustomMissile("GiantBioBall",0,2,6,0)
	  BIOG C 1 BRIGHT
	  BIOG D 2 BRIGHT
	  BIOG E 2 BRIGHT
	  BIOG C 2 BRIGHT
	  BIOG A 3
	  BIOG A 0 A_Refire
	  goto Ready

   }
}

actor ZoomCheck : Inventory
{
  inventory.amount 1
  inventory.maxamount 1
  -INVBAR
  -INTERHUBSTRIP
  +INVENTORY.UNDROPPABLE
  +INVENTORY.HUBPOWER
  states
  {
  Spawn:
	TNT1 A 1
	loop
  }
}

actor SniperRifle : ClericWeapon 19983
{
  decal BulletChip
  obituary "%k put a Bullet in %o's Skull."
  Inventory.PickupSound "misc/w_pkup"
  Inventory.PickupMessage "A Sniper Rifle! Pick them off."
  attacksound "sniperfire"
  weapon.selectionorder 200
  weapon.kickback 150
  Weapon.AmmoType1 "MechAmmo"
  Weapon.AmmoGive 20
  Weapon.AmmoUse1 10
  +NOEXTREMEDEATH
  states
  {
  Spawn:
   SNPP A -1
   loop
  Ready:
	SINS A 1 A_WeaponReady
	loop
  Deselect:
	SINS A 0 A_ZoomFactor(1.0)
	SINS A 0 A_TakeInventory("ZoomCheck", 1)
	SINS A 1 A_Lower
	goto Deselect+2
  Select:
	SINS A 1 A_Raise
	loop
  Fire:
	SINS B 0 A_FireCustomMissile("SniperSmoke", random(-1, 1), 0, 1, 9)
	SINS B 0 A_FireCustomMissile("BulletTracer", 0, 0, 8, 4)
	SINS B 2 BRIGHT A_FireBullets (0, 0, 3, 16, "NewBulletPuff")
	SINS C 2 A_FireCustomMissile("SniperSmokeSmall", random(-1, 1), 0, 1, 9)
	SINS D 2 A_FireCustomMissile("SniperSmokeSmall2", random(-1, 1), 0, 1, 9)
	SINS E 2
	SINS F 2
	SINS G 2
	SINS H 2
	SINC A 4
	SINC B 4
	SINC C 4 A_Playsound("sniperbolt")
	SINC D 0 A_FireCustomMissile("BulletCasingSpawnerRight",-45+random(-8,8),0,5,4)
	SINC D 4
	SINC E 4
	SINC F 4
	SINC G 4
	SINS A 9
	SINS A 0 A_ReFire
	SINS A 8
	goto Ready
  Altfire:
	SINS A 0 A_JumpIfInventory("ZoomCheck", 1, "ZoomOut")
	SINS A 0 A_ZoomFactor(3.0)
	SINS A 8 A_GiveInventory("ZoomCheck", 1)
	SINS A 0 A_Refire
	goto Ready
  ZoomOut:
	SINS A 0 A_ZoomFactor(1.0)
	SINS A 8 A_TakeInventory("ZoomCheck", 1)
	SINS A 0 A_Refire
	goto Ready
  Hold:
	SINS A 2
	SINS A 0
	SINS A 0 A_Refire
	goto Ready
  Flash:
	TNT1 A 0
	stop
  }
}

actor BigPalm 14321
{
height 128
radius 16
//mass 9999999
//Health 999999
+SOLID
//+INVULNERABLE
//+NODAMAGE
//+NOBLOOD
//+SHOOTABLE
+FORCEYBILLBOARD
States
{
Spawn:
PTRE A 20
PTRE B 10
loop
}
}

actor SoccerBall 14322
{
  radius 16
  height 26
  Health 999999999999
  Mass 1
  Painchance 200
  RenderStyle Add
  Alpha 0.9
  SpawnId 246
  +SOLID
  +SHOOTABLE
  +PUSHABLE
  +NOBLOOD
  +SLIDESONWALLS
  -NOTELEPORT
  +TELESTOMP
  -NOBLOCKMONST
  -DONTBLAST
  +DONTMORPH
  +DONTSQUASH
  +ACTIVATEMCROSS
  +CANPASS
  States
  {
  Death:
  Spawn:
  BALL A -1
  loop
  Pain:
  BALL A 0
  BALL A 0 ThrustThingZ(0, 35, 0, 0)
  goto Spawn
  }
}

actor SoccerKick : Weapon
{
  decal BulletChip
  obituary "%k got a Red Card in Soccer."
  Inventory.PickupSound "misc/w_pkup"
  Inventory.PickupMessage "You're Not Supposed to Have This..."
  weapon.selectionorder 1
  weapon.kickback 200
  +WEAPON.CHEATNOTWEAPON
  +WEAPON.NOLMS
  states
  {
   Ready:
	  PUNG A 1 A_WeaponReady
	  loop
   Select:
	  PUNG A 1 A_Raise
	  loop
   Deselect:
	  PUNG A 1 A_Lower
	  loop
   Fire:
	  BOOT A 3 A_Playsound("KickSwing")
	  BOOT B 3
	  BOOT C 4 A_CustomPunch(7, 0, 0, "BootHit", 64)
	  BOOT B 4
	  BOOT A 4
	  PUNG A 2
	  PUNG A 0 A_Refire
	  goto Ready
  }
}

ACTOR SliceProjectile
{
   Health 5
   Height 35
   Radius 14
   Speed 8
   PainSound "saberhit"
   DeathSound "saberhit"
   RENDERSTYLE NONE
   +NOBLOCKMONST
   +DONTSPLASH
   +SHOOTABLE
   +NOBLOOD
   +NOGRAVITY
   +NOCLIP
   +GHOST
   +THRUGHOST
   States
   {
   Spawn:
	  TNT1 AAA 2
	  Stop
   Pain:
	  TNT1 A 1 A_SpawnItemEX("SaberPuff",  0, 0, 0, 0, 0, 0, 0, 128, 0)
	  TNT1 A 1 A_Pain
	  Stop
   Death:
	  TNT1 A 1 A_SpawnItemEX("SaberPuff",  0, 0, 0, 0, 0, 0, 0, 128, 0)
	  TNT1 A 1 A_Scream
	  Stop
   }
}

ACTOR ReflectProjectile : SliceProjectile
{
   PainChance 255
   PainSound "saberhit"
   DeathSound "saberhit"
   +REFLECTIVE
   +THRUGHOST
   +GHOST
   States
   {
   Spawn:
	  TNT1 AA 2
	  Stop
   Pain:
	  TNT1 A 1
	  TNT1 A 1 A_Pain
	  Stop
   Death:
	  TNT1 A 1
	  TNT1 A 1 A_Scream
	  Stop
   }
}

ACTOR GreenSaberLight
{
   Height 1
   Radius 1
   Speed 0
   Scale 0.78
   RENDERSTYLE Add
   +NOBLOCKMONST
   +DONTSPLASH
   +NOGRAVITY
   +NOCLIP
   +FORCEXYBILLBOARD
   States
   {
   Spawn:
	  GSTR ABCD 1 BRIGHT
	  Stop
   Death:
	  TNT1 A 1
	  Stop
   }
}

ACTOR GreenSaberLightSmall
{
   Height 1
   Radius 1
   Speed 0
   Scale 0.3
   RENDERSTYLE Add
   +NOBLOCKMONST
   +DONTSPLASH
   +NOGRAVITY
   +NOCLIP
   +FORCEXYBILLBOARD
   States
   {
   Spawn:
	  GSTR ABCD 1 BRIGHT
	  Stop
   Death:
	  TNT1 A 1
	  Stop
   }
}

ACTOR OrangeSaberLight
{
   Height 1
   Radius 1
   Speed 0
   Scale 0.78
   RENDERSTYLE Add
   +NOBLOCKMONST
   +DONTSPLASH
   +NOGRAVITY
   +NOCLIP
   +FORCEXYBILLBOARD
   States
   {
   Spawn:
	  OSTR ABCD 1 BRIGHT
	  Stop
   Death:
	  TNT1 A 1
	  Stop
   }
}

ACTOR OrangeSaberLightSmall
{
   Height 1
   Radius 1
   Speed 0
   Scale 0.3
   RENDERSTYLE Add
   +NOBLOCKMONST
   +DONTSPLASH
   +NOGRAVITY
   +NOCLIP
   +FORCEXYBILLBOARD
   States
   {
   Spawn:
	  OSTR ABCD 1 BRIGHT
	  Stop
   Death:
	  TNT1 A 1
	  Stop
   }
}

ACTOR BlueSaberLight
{
   Height 1
   Radius 1
   Speed 0
   Scale 0.78
   RENDERSTYLE Add
   +NOBLOCKMONST
   +DONTSPLASH
   +NOGRAVITY
   +NOCLIP
   +FORCEXYBILLBOARD
   States
   {
   Spawn:
	  BSTR ABCD 1 BRIGHT
	  Stop
   Death:
	  TNT1 A 1
	  Stop
   }
}

ACTOR BlueSaberLightSmall
{
   Height 1
   Radius 1
   Speed 0
   Scale 0.3
   RENDERSTYLE Add
   +NOBLOCKMONST
   +DONTSPLASH
   +NOGRAVITY
   +NOCLIP
   +FORCEXYBILLBOARD
   States
   {
   Spawn:
	  BSTR ABCD 1 BRIGHT
	  Stop
   Death:
	  TNT1 A 1
	  Stop
   }
}

actor SaberGreen : Puzzleitem
{
inventory.amount 1
inventory.maxamount 1
-INVBAR
+INVENTORY.UNDROPPABLE
}

actor SaberBlue : Puzzleitem
{
inventory.amount 1
inventory.maxamount 1
-INVBAR
+INVENTORY.UNDROPPABLE
}

actor SaberOrange : Puzzleitem
{
inventory.amount 1
inventory.maxamount 1
-INVBAR
+INVENTORY.UNDROPPABLE
}

// Recolored Saber Sprites by Wolf
ACTOR LightSaber : ClericWeapon 25004
{
   Inventory.PickupMessage "You Found the weapon of the Jedi, the Lightsaber!."
   Obituary "%k gave %o a little taste of the force."
   weapon.upsound "saberup"
   Weapon.AmmoUse 0
   attacksound "Saberhit"
   +WEAPON.MELEEWEAPON
   +WEAPON.NOALERT
   +AXEBLOOD
   +THRUGHOST
   +NODAMAGETHRUST
   Scale 0.8
   States
   {
   Spawn:
	  SABP A -1
	  Loop
   Ready:
	  TNT1 A 0 A_JumpIfInventory("SaberBlue", 1, "ReadyBlue")
	  TNT1 A 0 A_JumpIfInventory("SaberOrange", 1, "ReadyOrange")
	  LSAB A 0 BRIGHT A_PlaySoundEX("saberidle", SoundSlot6, 0)
	  LSAB A 0 BRIGHT A_FireCustomMissile("GreenSaberLight", 0, 0, 7, 9)
	  LSAB A 2 BRIGHT A_WeaponReady
	  LSAB A 0 BRIGHT A_FireCustomMissile("GreenSaberLight", 0, 0, 7, 9)
	  LSAB A 2 BRIGHT A_WeaponReady
	  LSAB A 0 BRIGHT A_FireCustomMissile("GreenSaberLight", 0, 0, 7, 9)
	  LSAB B 2 BRIGHT A_WeaponReady
	  LSAB A 0 BRIGHT A_FireCustomMissile("GreenSaberLight", 0, 0, 7, 9)
	  LSAB B 2 BRIGHT A_WeaponReady
	  LOOP
   ReadyBlue:
	  TNT1 A 0 A_JumpIfInventory("SaberOrange", 1, "ReadyOrange")
	  TNT1 A 0 A_JumpIfInventory("SaberGreen", 1, "Ready")
	  BSAB A 0 BRIGHT A_PlaySoundEX("saberidle", SoundSlot6, 0)
	  BSAB A 0 BRIGHT A_FireCustomMissile("BlueSaberLight", 0, 0, 7, 9)
	  BSAB A 2 BRIGHT A_WeaponReady
	  BSAB A 0 BRIGHT A_FireCustomMissile("BlueSaberLight", 0, 0, 7, 9)
	  BSAB A 2 BRIGHT A_WeaponReady
	  BSAB A 0 BRIGHT A_FireCustomMissile("BlueSaberLight", 0, 0, 7, 9)
	  BSAB B 2 BRIGHT A_WeaponReady
	  BSAB A 0 BRIGHT A_FireCustomMissile("BlueSaberLight", 0, 0, 7, 9)
	  BSAB B 2 BRIGHT A_WeaponReady
	  LOOP
   ReadyOrange:
	  TNT1 A 0 A_JumpIfInventory("SaberBlue", 1, "ReadyBlue")
	  TNT1 A 0 A_JumpIfInventory("SaberGreen", 1, "Ready")
	  OSAB A 0 BRIGHT A_PlaySoundEX("saberidle", SoundSlot6, 0)
	  OSAB A 0 BRIGHT A_FireCustomMissile("OrangeSaberLight", 0, 0, 7, 9)
	  OSAB A 2 BRIGHT A_WeaponReady
	  OSAB A 0 BRIGHT A_FireCustomMissile("OrangeSaberLight", 0, 0, 7, 9)
	  OSAB A 2 BRIGHT A_WeaponReady
	  OSAB A 0 BRIGHT A_FireCustomMissile("OrangeSaberLight", 0, 0, 7, 9)
	  OSAB B 2 BRIGHT A_WeaponReady
	  OSAB A 0 BRIGHT A_FireCustomMissile("OrangeSaberLight", 0, 0, 7, 9)
	  OSAB B 2 BRIGHT A_WeaponReady
	  LOOP
   Deselect:
	  TNT1 A 0 A_JumpIfInventory("SaberBlue", 1, "DeselectBlue")
	  TNT1 A 0 A_JumpIfInventory("SaberOrange", 1, "DeselectOrange")
	  LSAB A 0 A_Gravity
	  LSAB A 1 BRIGHT A_Lower
	  Wait
   DeselectOrange:
	  TNT1 A 0 A_JumpIfInventory("SaberBlue", 1, "DeselectBlue")
	  TNT1 A 0 A_JumpIfInventory("SaberGreen", 1, "Deselect")
	  OSAB A 0 A_Gravity
	  OSAB A 1 BRIGHT A_Lower
	  Wait
   DeselectBlue:
	  TNT1 A 0 A_JumpIfInventory("SaberOrange", 1, "DeselectOrange")
	  TNT1 A 0 A_JumpIfInventory("SaberGreen", 1, "Deselect")
	  BSAB A 0 A_Gravity
	  BSAB A 1 BRIGHT A_Lower
	  Wait
   Select:
	  TNT1 A 0 A_JumpIfInventory("SaberBlue", 1, "SelectBlue")
	  TNT1 A 0 A_JumpIfInventory("SaberOrange", 1, "SelectOrange")
	  LSAB A 1 BRIGHT A_Raise
	  Wait
   SelectBlue:
	  TNT1 A 0 A_JumpIfInventory("SaberOrange", 1, "SelectOrange")
	  TNT1 A 0 A_JumpIfInventory("SaberGreen", 1, "Select")
	  BSAB A 1 BRIGHT A_Raise
	  Wait
   SelectOrange:
	  TNT1 A 0 A_JumpIfInventory("SaberBlue", 1, "SelectBlue")
	  TNT1 A 0 A_JumpIfInventory("SaberGreen", 1, "Select")
	  OSAB A 1 BRIGHT A_Raise
	  Wait
   Fire:
	  TNT1 A 0 A_JumpIfInventory("SaberBlue", 1, "FireBlue")
	  TNT1 A 0 A_JumpIfInventory("SaberOrange", 1, "FireOrange")
	  LSAB A 0 A_Gravity
	  LSAB C 0 BRIGHT A_Playsound("saberswing")
	  LSAB A 0 A_SetInvulnerable
	  LSAB A 0 BRIGHT A_FireCustomMissile("GreenSaberLight", 0, 0, 7, 9)
	  LSAB C 2 BRIGHT A_CustomPunch(38, 1, 0, "SaberPuff",52)
	  LSAB A 0 BRIGHT A_FireCustomMissile("GreenSaberLight", 0, 0, 6, 8)
	  LSAB D 2 BRIGHT A_FireCustomMissile("SliceProjectile", 0, 0, 0, 0)
	  LSAB E 1 BRIGHT A_CustomPunch(28, 1, 0, "SaberPuff",58)
	  LSAB A 0 BRIGHT A_FireCustomMissile("GreenSaberLight", 0, 0, 4, 6)
	  LSAB A 0 BRIGHT A_FireCustomMissile("SliceProjectile", 0, 0, 0, 0)
	  LSAB F 1 BRIGHT A_CustomPunch(20, 1, 0, "SaberPuff",64)
	  LSAB A 0 A_UnSetInvulnerable
	  LSAB A 0 BRIGHT A_FireCustomMissile("GreenSaberLight", 0, 0, 2, 4)
	  LSAB A 0 BRIGHT A_FireCustomMissile("SliceProjectile", 0, 0, 0, 0)
	  LSAB G 2 BRIGHT A_CustomPunch(16, 1, 0, "SaberPuff",70)
	  LSAB A 0 BRIGHT A_FireCustomMissile("GreenSaberLight", 0, 0, 0, 2)
	  TNT1 A 3
	  LSAB A 0 BRIGHT A_FireCustomMissile("GreenSaberLight", 0, 0, -2, 0)
	  TNT1 A 2
	  LSAL A 0 BRIGHT A_Playsound("saberswing")
	  LSAL A 0 A_SetInvulnerable
	  LSAL A 0 BRIGHT A_FireCustomMissile("GreenSaberLight", 0, 0, -7, 9)
	  LSAL A 2 BRIGHT A_CustomPunch(38, 1, 0, "SaberPuff",52)
	  LSAL A 0 BRIGHT A_FireCustomMissile("GreenSaberLight", 0, 0, -6, 8)
	  LSAL B 2 BRIGHT A_FireCustomMissile("SliceProjectile", 0, 0, 0, 0)
	  LSAL C 1 BRIGHT A_CustomPunch(28, 1, 0, "SaberPuff",58)
	  LSAL A 0 BRIGHT A_FireCustomMissile("GreenSaberLight", 0, 0, -4, 6)
	  LSAL A 0 BRIGHT A_FireCustomMissile("SliceProjectile", 0, 0, 0, 0)
	  LSAL D 1 BRIGHT A_CustomPunch(20, 1, 0, "SaberPuff",64)
	  LSAL A 0 A_UnSetInvulnerable
	  LSAL A 0 BRIGHT A_FireCustomMissile("GreenSaberLight", 0, 0, -2, 4)
	  LSAL A 0 BRIGHT A_FireCustomMissile("SliceProjectile", 0, 0, 0, 0)
	  TNT1 A 2 BRIGHT A_CustomPunch(16, 1, 0, "SaberPuff",70)
	  LSAL A 0 BRIGHT A_FireCustomMissile("GreenSaberLight", 0, 0, 0, 3)
	  TNT1 A 3
	  LSAL A 0 BRIGHT A_FireCustomMissile("GreenSaberLight", 0, 0, 1, 2)
	  TNT1 A 3
	  LSAL A 0 BRIGHT A_FireCustomMissile("GreenSaberLight", 0, 0, 2, 0)
	  TNT1 A 4
	  LSAB A 2 BRIGHT
	  LSAB A 2 BRIGHT A_ReFire
	  goto Ready
   FireOrange:
	  TNT1 A 0 A_JumpIfInventory("SaberBlue", 1, "FireBlue")
	  TNT1 A 0 A_JumpIfInventory("SaberGreen", 1, "Fire")
	  OSAB A 0 A_Gravity
	  OSAB C 0 BRIGHT A_Playsound("saberswing")
	  OSAB A 0 A_SetInvulnerable
	  OSAB A 0 BRIGHT A_FireCustomMissile("OrangeSaberLight", 0, 0, 7, 9)
	  OSAB C 2 BRIGHT A_CustomPunch(38, 1, 0, "SaberPuff",52)
	  OSAB A 0 BRIGHT A_FireCustomMissile("OrangeSaberLight", 0, 0, 6, 8)
	  OSAB D 2 BRIGHT A_FireCustomMissile("SliceProjectile", 0, 0, 0, 0)
	  OSAB E 1 BRIGHT A_CustomPunch(28, 1, 0, "SaberPuff",58)
	  OSAB A 0 BRIGHT A_FireCustomMissile("OrangeSaberLight", 0, 0, 4, 6)
	  OSAB A 0 BRIGHT A_FireCustomMissile("SliceProjectile", 0, 0, 0, 0)
	  OSAB F 1 BRIGHT A_CustomPunch(20, 1, 0, "SaberPuff",64)
	  OSAB A 0 A_UnSetInvulnerable
	  OSAB A 0 BRIGHT A_FireCustomMissile("OrangeSaberLight", 0, 0, 2, 4)
	  OSAB A 0 BRIGHT A_FireCustomMissile("SliceProjectile", 0, 0, 0, 0)
	  OSAB G 2 BRIGHT A_CustomPunch(16, 1, 0, "SaberPuff",70)
	  OSAB A 0 BRIGHT A_FireCustomMissile("OrangeSaberLight", 0, 0, 0, 2)
	  TNT1 A 3
	  OSAB A 0 BRIGHT A_FireCustomMissile("OrangeSaberLight", 0, 0, -2, 0)
	  TNT1 A 2
	  OSAL A 0 BRIGHT A_Playsound("saberswing")
	  OSAL A 0 A_SetInvulnerable
	  OSAL A 0 BRIGHT A_FireCustomMissile("OrangeSaberLight", 0, 0, -7, 9)
	  OSAL A 2 BRIGHT A_CustomPunch(38, 1, 0, "SaberPuff",52)
	  OSAL A 0 BRIGHT A_FireCustomMissile("OrangeSaberLight", 0, 0, -6, 8)
	  OSAL B 2 BRIGHT A_FireCustomMissile("SliceProjectile", 0, 0, 0, 0)
	  OSAL C 1 BRIGHT A_CustomPunch(28, 1, 0, "SaberPuff",58)
	  OSAL A 0 BRIGHT A_FireCustomMissile("OrangeSaberLight", 0, 0, -4, 6)
	  OSAL A 0 BRIGHT A_FireCustomMissile("SliceProjectile", 0, 0, 0, 0)
	  OSAL D 1 BRIGHT A_CustomPunch(20, 1, 0, "SaberPuff",64)
	  OSAL A 0 A_UnSetInvulnerable
	  OSAL A 0 BRIGHT A_FireCustomMissile("OrangeSaberLight", 0, 0, -2, 4)
	  OSAL A 0 BRIGHT A_FireCustomMissile("SliceProjectile", 0, 0, 0, 0)
	  TNT1 A 2 BRIGHT A_CustomPunch(16, 1, 0, "SaberPuff",70)
	  OSAL A 0 BRIGHT A_FireCustomMissile("OrangeSaberLight", 0, 0, 0, 3)
	  TNT1 A 3
	  OSAL A 0 BRIGHT A_FireCustomMissile("OrangeSaberLight", 0, 0, 1, 2)
	  TNT1 A 3
	  OSAL A 0 BRIGHT A_FireCustomMissile("OrangeSaberLight", 0, 0, 2, 0)
	  TNT1 A 4
	  OSAB A 2 BRIGHT
	  OSAB A 2 BRIGHT A_ReFire
	  goto Ready
   FireBlue:
	  TNT1 A 0 A_JumpIfInventory("SaberOrange", 1, "FireOrange")
	  TNT1 A 0 A_JumpIfInventory("SaberGreen", 1, "Fire")
	  BSAB A 0 A_Gravity
	  BSAB C 0 BRIGHT A_Playsound("saberswing")
	  BSAB A 0 A_SetInvulnerable
	  BSAB A 0 BRIGHT A_FireCustomMissile("BlueSaberLight", 0, 0, 7, 9)
	  BSAB C 2 BRIGHT A_CustomPunch(38, 1, 0, "SaberPuff",52)
	  BSAB A 0 BRIGHT A_FireCustomMissile("BlueSaberLight", 0, 0, 6, 8)
	  BSAB D 2 BRIGHT A_FireCustomMissile("SliceProjectile", 0, 0, 0, 0)
	  BSAB E 1 BRIGHT A_CustomPunch(28, 1, 0, "SaberPuff",58)
	  BSAB A 0 BRIGHT A_FireCustomMissile("BlueSaberLight", 0, 0, 4, 6)
	  BSAB A 0 BRIGHT A_FireCustomMissile("SliceProjectile", 0, 0, 0, 0)
	  BSAB F 1 BRIGHT A_CustomPunch(20, 1, 0, "SaberPuff",64)
	  BSAB A 0 A_UnSetInvulnerable
	  BSAB A 0 BRIGHT A_FireCustomMissile("BlueSaberLight", 0, 0, 2, 4)
	  BSAB A 0 BRIGHT A_FireCustomMissile("SliceProjectile", 0, 0, 0, 0)
	  BSAB G 2 BRIGHT A_CustomPunch(16, 1, 0, "SaberPuff",70)
	  BSAB A 0 BRIGHT A_FireCustomMissile("BlueSaberLight", 0, 0, 0, 2)
	  TNT1 A 3
	  BSAB A 0 BRIGHT A_FireCustomMissile("BlueSaberLight", 0, 0, -2, 0)
	  TNT1 A 2
	  BSAL A 0 BRIGHT A_Playsound("saberswing")
	  BSAL A 0 A_SetInvulnerable
	  BSAL A 0 BRIGHT A_FireCustomMissile("BlueSaberLight", 0, 0, -7, 9)
	  BSAL A 2 BRIGHT A_CustomPunch(38, 1, 0, "SaberPuff",52)
	  BSAL A 0 BRIGHT A_FireCustomMissile("BlueSaberLight", 0, 0, -6, 8)
	  BSAL B 2 BRIGHT A_FireCustomMissile("SliceProjectile", 0, 0, 0, 0)
	  BSAL C 1 BRIGHT A_CustomPunch(28, 1, 0, "SaberPuff",58)
	  BSAL A 0 BRIGHT A_FireCustomMissile("BlueSaberLight", 0, 0, -4, 6)
	  BSAL A 0 BRIGHT A_FireCustomMissile("SliceProjectile", 0, 0, 0, 0)
	  BSAL D 1 BRIGHT A_CustomPunch(20, 1, 0, "SaberPuff",64)
	  BSAL A 0 A_UnSetInvulnerable
	  BSAL A 0 BRIGHT A_FireCustomMissile("BlueSaberLight", 0, 0, -2, 4)
	  BSAL A 0 BRIGHT A_FireCustomMissile("SliceProjectile", 0, 0, 0, 0)
	  TNT1 A 2 BRIGHT A_CustomPunch(16, 1, 0, "SaberPuff",70)
	  BSAL A 0 BRIGHT A_FireCustomMissile("BlueSaberLight", 0, 0, 0, 3)
	  TNT1 A 3
	  BSAL A 0 BRIGHT A_FireCustomMissile("BlueSaberLight", 0, 0, 1, 2)
	  TNT1 A 3
	  BSAL A 0 BRIGHT A_FireCustomMissile("BlueSaberLight", 0, 0, 2, 0)
	  TNT1 A 4
	  BSAB A 2 BRIGHT
	  BSAB A 2 BRIGHT A_ReFire
	  goto Ready
   AltFire:
	  TNT1 A 0 A_JumpIfInventory("SaberBlue", 1, "AltFireBlue")
	  TNT1 A 0 A_JumpIfInventory("SaberOrange", 1, "AltFireOrange")
	  LSAD A 0 A_LowGravity
	  LSAD A 0 A_SetReflectiveInvulnerable
	  LSAD A 0 BRIGHT A_FireCustomMissile("GreenSaberLightSmall", 0, 0, 0, 9)
	  LSAD AA 1 BRIGHT A_FireCustomMissile("ReflectProjectile", 0, 0, 0, 0)
	  LSAD A 0 BRIGHT A_PlaySoundEX("saberidle", SoundSlot6, 0)
	  LSAD A 0 A_Gravity
	  LSAD A 0 BRIGHT A_FireCustomMissile("GreenSaberLightSmall", 0, 0, 0, 9)
	  LSAD BB 1 BRIGHT A_FireCustomMissile("ReflectProjectile", 0, 0, 0, 0)
	  LSAD A 0 A_LowGravity
	  LSAD A 0 A_UnSetReflectiveInvulnerable
	  LSAD A 0 BRIGHT A_FireCustomMissile("GreenSaberLightSmall", 0, 0, 0, 9)
	  LSAD AA 1 BRIGHT A_FireCustomMissile("ReflectProjectile", 0, 0, 0, 0)
	  LSAD A 0 A_Gravity
	  LSAD A 0 BRIGHT A_FireCustomMissile("GreenSaberLightSmall", 0, 0, 0, 9)
	  LSAD BB 1 BRIGHT A_FireCustomMissile("ReflectProjectile", 0, 0, 0, 0)
	  LSAD A 0 BRIGHT A_Refire
	  LSAD A 0 BRIGHT A_Gravity
	  Goto Ready
	AltFireOrange:
	  TNT1 A 0 A_JumpIfInventory("SaberBlue", 1, "AltFireBlue")
	  TNT1 A 0 A_JumpIfInventory("SaberGreen", 1, "AltFire")
	  OSAD A 0 A_LowGravity
	  OSAD A 0 A_SetReflectiveInvulnerable
	  OSAD A 0 BRIGHT A_FireCustomMissile("OrangeSaberLightSmall", 0, 0, 0, 9)
	  OSAD AA 1 BRIGHT A_FireCustomMissile("ReflectProjectile", 0, 0, 0, 0)
	  OSAD A 0 BRIGHT A_PlaySoundEX("saberidle", SoundSlot6, 0)
	  OSAD A 0 A_Gravity
	  OSAD A 0 BRIGHT A_FireCustomMissile("OrangeSaberLightSmall", 0, 0, 0, 9)
	  OSAD BB 1 BRIGHT A_FireCustomMissile("ReflectProjectile", 0, 0, 0, 0)
	  OSAD A 0 A_LowGravity
	  OSAD A 0 A_UnSetReflectiveInvulnerable
	  OSAD A 0 BRIGHT A_FireCustomMissile("OrangeSaberLightSmall", 0, 0, 0, 9)
	  OSAD AA 1 BRIGHT A_FireCustomMissile("ReflectProjectile", 0, 0, 0, 0)
	  OSAD A 0 A_Gravity
	  OSAD A 0 BRIGHT A_FireCustomMissile("OrangeSaberLightSmall", 0, 0, 0, 9)
	  OSAD BB 1 BRIGHT A_FireCustomMissile("ReflectProjectile", 0, 0, 0, 0)
	  OSAD A 0 BRIGHT A_Refire
	  OSAD A 0 BRIGHT A_Gravity
	  Goto Ready
	AltFireBlue:
	  TNT1 A 0 A_JumpIfInventory("SaberOrange", 1, "AltFireOrange")
	  TNT1 A 0 A_JumpIfInventory("SaberGreen", 1, "AltFire")
	  BSAD A 0 A_LowGravity
	  BSAD A 0 A_SetReflectiveInvulnerable
	  BSAD A 0 BRIGHT A_FireCustomMissile("BlueSaberLightSmall", 0, 0, 0, 9)
	  BSAD AA 1 BRIGHT A_FireCustomMissile("ReflectProjectile", 0, 0, 0, 0)
	  BSAD A 0 BRIGHT A_PlaySoundEX("saberidle", SoundSlot6, 0)
	  BSAD A 0 A_Gravity
	  BSAD A 0 BRIGHT A_FireCustomMissile("BlueSaberLightSmall", 0, 0, 0, 9)
	  BSAD BB 1 BRIGHT A_FireCustomMissile("ReflectProjectile", 0, 0, 0, 0)
	  BSAD A 0 A_LowGravity
	  BSAD A 0 A_UnSetReflectiveInvulnerable
	  BSAD A 0 BRIGHT A_FireCustomMissile("BlueSaberLightSmall", 0, 0, 0, 9)
	  BSAD AA 1 BRIGHT A_FireCustomMissile("ReflectProjectile", 0, 0, 0, 0)
	  BSAD A 0 A_Gravity
	  BSAD A 0 BRIGHT A_FireCustomMissile("BlueSaberLightSmall", 0, 0, 0, 9)
	  BSAD BB 1 BRIGHT A_FireCustomMissile("ReflectProjectile", 0, 0, 0, 0)
	  BSAD A 0 BRIGHT A_Refire
	  BSAD A 0 BRIGHT A_Gravity
	  Goto Ready
   }
}

ACTOR NukeLauncher : Weapon 25005
{
   Inventory.PickupSound "misc/w_pkup"
   Inventory.PickupMessage "You found the Nuke Launcher!!!! MUAHAHAHAHAHAHA MASS DESTRUCTION TIME!!!"
   Obituary "%o got blown to fucking hell by %k's Nuke!!"
   Weapon.AmmoType "ProtonAmmo"
   Weapon.AmmoGive 20
   Weapon.AmmoUse 15
   AttackSound "NukeLaunch"
   Weapon.Kickback 50000
   Weapon.SelectionOrder 1
   +WEAPON.BFG
   +WEAPON.NOLMS
   States
   {
   Spawn:
	  NUKP A -1
	  Loop
   Ready:
	  NUKL A 1 A_WeaponReady
	  Loop
   Deselect:
	  NUKL A 1 A_Lower
	  Loop
   Select:
	  NUKL A 2 A_Raise
	  Loop
   Fire:
	  NUKL A 0
	  NUKL B 4 BRIGHT A_FireCustomMissile("Nuke",0,15,0,0)
	  NUKL A 60
	  NUKL A 1 A_REFIRE
	  Goto Ready
   }
}

actor NukeEXTRA
{
  renderstyle Add
  Damage 0
  alpha 0.75
  +NOBLOCKMAP
  +NOGRAVITY
  +EXTREMEDEATH
  states
  {
  Spawn:
	NEXP A 0
	TNT1 A 28 A_PlaySoundEx("WTFBoom", "auto", 0)
	NEXP A 0 A_Playsound("NukeExplode")
	NEXP A 0 A_Explode(600, 256)
	NEXP ABCDEFGHIJKLMNOPQRSTU 4 bright A_SpawnItemEx("NukeRandom2", 0, 0, 0, random(-2,2), random(-2,2), random(0,2), 0, 128, 0)
	stop
  }
}

actor NukeRandom : NukeEXTRA
{
  Scale 1.5
  states
  {
  Spawn:
	NEXP A 0
	NEXP A 0 A_Playsound("NukeExplode")
	NEXP A 0 A_Explode(400, 400)
	NEXP ABCDEFGHIJKLMNOPQRSTU 3 bright
	stop
  }
}

actor NukeRandom2 : NukeEXTRA
{
  states
  {
  Spawn:
	NEXP ABCDEFGHIJKLMNOPQRSTU 1 bright
	stop
  }
}

actor NukeHuge : NukeRandom
{
  Scale 2.0
  states
  {
  Spawn:
	NEXP ABCDEFGHIJKLMNOPQRSTU 4 bright
	stop
  }
}

actor NukeHarmless : NukeHuge
{
 Scale 1.2
}

actor NukedAreaFlames : IgnitedSurface
{
 obituary "%o got caught in the heat zone of %k's nuke"
 States
 {
	Spawn:
		TFIR A 0 A_CountDown
		TNT1 A 0 A_SpawnItemEx("IgnitedSurfaceFlame", random(-10,10), Random(-10,10), 0, 0, 0, Random(1, 2), 0, 128, 64)
		TNT1 A 2 A_Explode(8, 24, 1)
		TNT1 A 0 A_JumpIf(waterlevel == 3, "Disappear")
		loop
 }
}

actor NukeRadiation
{
 height 64
 radius 16
 speed 0
 Renderstyle Add
 Alpha 0.2
 Scale 2.5
 Projectile
 -nogravity
 +nodamagethrust
 +hexenbounce
 +FORCERADIUSDMG
 Bouncefactor 0
 states
 {
 Spawn:
 TNT1 A 0
 NEXP ABCDEFGHIJKLMNOPQRSTU 8 bright A_Explode(46, 456)
 stop
 }
}

actor Duke64ExplosionRing
{
  Height 1
  Radius 1
  Speed 0
  RenderStyle Add
  Alpha 0.4
  +NOGRAVITY
  +NOBLOCKMAP
  +NOCLIP
  +CLIENTSIDEONLY
  +FORCEXYBILLBOARD
  States
  {
   Spawn:
	NULL ABC 1
	NULL DEFGH 1 A_FadeOut(0.07)
	stop
  }
}

actor NukeExplosionRing : Duke64ExplosionRing
{
	Scale 4
	Alpha 0.6
}

actor Nuke
{
	Projectile
	speed 35
	radius 8
	height 8
	DamageType "Nuke"
	seesound "NukeLaunch"
	obituary "%o got blown to fucking hell by %k's Nuke!!"
	+EXTREMEDEATH
	+FORCERADIUSDMG
	-NOGRAVITY
	states
	{
		Spawn:
			NUKE AB 4 bright
			loop
		Death:
			NUKE A 20
			NUKE B 10 BRIGHT A_Playsound("NukeBeep")
			NUKE A 20
			NUKE B 10 BRIGHT A_Playsound("NukeBeep")
			NUKE A 20
			NUKE B 10 BRIGHT A_Playsound("NukeBeep")
			NUKE A 20
			NUKE B 10 BRIGHT A_Playsound("NukeBeep")
			NUKE A 20
			NUKE B 10 BRIGHT A_Playsound("NukeBeep")
			NUKE A 20
			NUKE B 10 BRIGHT A_Playsound("NukeBeep")
			NUKE A 20
			NUKE B 10 BRIGHT A_Playsound("NukeBeep")
			NUKE A 20
			NUKE B 10 BRIGHT A_Playsound("NukeBeep")
			NUKE A 20
			NUKE B 10 BRIGHT A_Playsound("NukeBeep")
			NUKE A 20
			NUKE B 10 BRIGHT A_Playsound("NukeBeep")
			NUKE A 20
			NUKE B 10 BRIGHT A_Playsound("NukeBeep")
			NUKE A 20
			NUKE B 10 BRIGHT A_Playsound("NukeBeep")
			NUKE A 20
			NUKE B 10 BRIGHT A_Playsound("NukeBeep")
			NUKE A 10
			NUKE B 5 BRIGHT A_Playsound("NukeBeep")
			NUKE A 10
			NUKE B 5 BRIGHT A_Playsound("NukeBeep")
			NUKE A 10
			NUKE B 5 BRIGHT A_Playsound("NukeBeep")
			NUKE A 10
			NUKE B 5 BRIGHT A_Playsound("NukeBeep")
			NUKE A 7
			NUKE B 4 BRIGHT A_Playsound("NukeBeep")
			NUKE A 7
			NUKE B 4 BRIGHT A_Playsound("NukeBeep")
			NUKE A 7
			NUKE B 4 BRIGHT A_Playsound("NukeBeep")
			NUKE A 2
			NUKE B 2 BRIGHT A_Playsound("NukeBeep")
			NUKE A 2
			NUKE B 2 BRIGHT A_Playsound("NukeBeep")
			NUKE A 2
			NUKE B 2 BRIGHT A_Playsound("NukeBeep")
			NUKE A 2
			NUKE B 2 BRIGHT A_Playsound("NukeBeep")
			NUKE A 2
			NUKE B 2 BRIGHT A_Playsound("NukeBeep")
			NUKE A 2
			NUKE B 2 BRIGHT A_Playsound("NukeBeep")
			NUKE A 2
			NUKE B 2 BRIGHT A_Playsound("NukeBeep")
			NUKE A 2
			NUKE B 2 BRIGHT A_Playsound("NukeBeep")
			NEXP A 0 Radius_Quake(6, 68, 0, 20, 0)
			NEXP A 0 A_PlaySoundEx ("NukeExplode", "Auto", 0, 0.6)
			NEXP A 0 A_BFGSpray("NukeEXTRA", 25, 1)
			NEXP A 0 A_SpawnItemEx("NukeHuge", 0, 0, 0, 0, 0, 0, 0, 0, 0)
			NEXP A 0 A_SpawnItemEx("NukeExplosionRing", 0, 0, 70, 0, 0, 0, 0, 128, 0)
			FIRE AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 BRIGHT A_SpawnItemEx("NukedAreaFlames", 0, 0, Random(0, 56), Random(-12,12), Random(-12,12), Random(0,16), 0, 0, 76)
			NEXP A 0 Bright A_CustomMissile("Gascloud1",32,0,15+Random(-10,10))
			NEXP A 0 Bright A_CustomMissile("Gascloud1",32,0,35+Random(-10,10))
			NEXP A 0 Bright A_CustomMissile("Gascloud1",32,0,55+Random(-10,10))
			NEXP A 0 Bright A_CustomMissile("Gascloud1",32,0,105+Random(-10,10))
			NEXP A 0 Bright A_CustomMissile("Gascloud1",32,0,125+Random(-10,10))
			NEXP A 0 Bright A_CustomMissile("Gascloud1",32,0,145+Random(-10,10))
			NEXP A 0 Bright A_CustomMissile("Gascloud1",32,0,175+Random(-10,10))
			NEXP A 0 Bright A_CustomMissile("Gascloud1",32,0,195+Random(-10,10))
			NEXP A 0 Bright A_CustomMissile("Gascloud1",32,0,215+Random(-10,10))
			NEXP A 0 Bright A_CustomMissile("Gascloud1",32,0,235+Random(-10,10))
			NEXP A 0 Bright A_CustomMissile("Gascloud1",32,0,255+Random(-10,10))
			NEXP A 0 Bright A_CustomMissile("Gascloud1",32,0,275+Random(-10,10))
			NEXP A 0 Bright A_CustomMissile("Gascloud1",32,0,295+Random(-10,10))
			NEXP A 0 Bright A_CustomMissile("Gascloud1",32,0,315+Random(-10,10))
			NEXP A 0 Bright A_CustomMissile("Gascloud1",32,0,335+Random(-10,10))
			TNT1 AAAAA 0 A_SpawnItemEx("NukeRandom", Random(-128, 128), Random(-128, 128), Random(0, 128), 0, 0, 0, 0, 0, 0)
			TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("NukeHarmless", Random(-192, 192), Random(-192, 192), Random(128, 256), 0, 0, 0, 0, 128, 0)
			TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("NukeRandom", Random(-192, 192), Random(-192, 192), Random(128, 256), 0, 0, 0, 0, 0, 0)
			TNT1 A 0 Bright A_CustomMissile("NukeRadiation", 32, 0, 0)
			NEXP A 0 A_Explode(1256, 1024)
			NEXP ABCDEFGHIJKLMNOPQRSTU 5 bright A_SpawnItemEx("NukeRandom", Random(-128, 128), Random(-128, 128), Random(0, 128), 0, 0, 0, 0, 0, 0)
			stop
	}
}

Actor Gascloud1
{
		+NoDamageThrust
		Projectile
		Radius 9
		Height 7
		Speed 1
		Damage 12
		PoisonDamage 150
		explosionradius 45
		explosiondamage 10
		Scale 0.6
		RenderStyle TransLucent
		Alpha 0.4
		DeathSound ""
		obituary "%o sucks radioactive gas."
		Reactiontime 18
		+HEXENBOUNCE
		+FORCERADIUSDMG
		+FORCEXYBILLBOARD
		States
		{
		Spawn:
			PSNE ABCDEFG 4 A_Explode
			PSNE A 0 A_Countdown
			Goto Spawn+3
		Death:
			TNT1 A 1
			Stop
		}
}

actor GBTWMoney : Inventory 20132
{
  Radius 10
  Height 8
  Scale 0.2
  inventory.amount 20
  inventory.maxamount 4000
  inventory.pickupsound "Cashpickup"
  inventory.pickupmessage "Picked up a $20 bill."
  inventory.icon "CASHB0"
  +inventory.alwayspickup
  -inventory.invbar
  -inventory.interhubstrip
  +INVENTORY.HUBPOWER
  States
  {
  Spawn:
	 CASH A -1
	 loop
  }
}

actor NuclearBarrel 18003
{
  obituary "%o bacame a nuclear meatball."
  health 20
  radius 10
  height 34
  deathheight 1
  deathsound "world/barrelx"
  //translation "112:127=176:191"
  +SOLID
  +SHOOTABLE
  +NOBLOOD
  +DONTGIB
  +NOICEDEATH
  +FIREDAMAGE
  states
  {
  Spawn:
	BAR1 AB 6
	loop
  Death:
	NEXP A 2 bright A_SetTranslucent(0.5, 1)
	NEXP B 2 bright A_Scream
	NEXP C 2 bright A_Explode(285, 296, 1)
	NEXP DEFGHIJKLMNOPQRSTU 2 bright
	TNT1 A 1050 A_BarrelDestroy
	TNT1 A 0 A_SetTranslucent(1.0, 0)
	TNT1 A 0 A_Respawn
	wait
  }
}

actor Drip
{
	Radius 1
	Height 1
	RenderStyle Translucent
	Alpha 0.5
	Scale 0.64
	+NOINTERACTION
	+NOBLOCKMAP
	+DROPOFF
	+DONTSPLASH
	+CLIENTSIDEONLY
	States
	{
		Spawn:
			DRIP ABCDEFGHI 1
			stop
	}
}

actor BloodDrip : Drip
{
	States
	{
		Spawn:
			BRIP ABCDEFGHI 1
			stop
	}
}

ACTOR Rain
{
	Radius 1
	Height 1
	Speed 0
	Damage 0
	Alpha 0.6
	Gravity 2
	YScale 0.12
	XScale 0.08
	RenderStyle Translucent
	+NOBLOCKMAP
	+DROPOFF
	+MISSILE
	+NOTELEPORT
	+CLIENTSIDEONLY
	+DONTSPLASH
	-ACTIVATEIMPACT
	-ACTIVATEPCROSS
	States
	{
	Spawn:
		RAIN A 1 A_JumpIf(waterlevel == 3, "Disappear")
		Loop
	Death:
		TNT1 A 0 A_SpawnItemEx("Drip", 0, 0, 0, 0, 0, 0, 0, SXF_CLIENTSIDE, 0)
		Stop
	Disappear:
		TNT1 A 0
		TNT1 A 1
		stop
	}
}

actor BloodRain : Rain
{
	States
	{
	Spawn:
		BLDR A 1 A_JumpIf(waterlevel == 3, "Disappear")
		Loop
	Death:
		TNT1 A 0 A_SpawnItemEx("BloodDrip", 0, 0, 0, 0, 0, 0, 0, SXF_CLIENTSIDE, 0)
		Stop
	Disappear:
		TNT1 A 0
		TNT1 A 1
		stop
	}
}

actor Raining32 16000
{
	Radius 16
	Height 1
	Speed 0
	Mass 9999999
	+SPAWNCEILING
	+NOGRAVITY
	+CORPSE
	States
	{
	Spawn:
		TNT1 A 8 A_SpawnItemEX("Rain", Random(-16,16), Random(-16,16), 0, 0, 0, 0, 0, 128, 128)
		Loop
	}
}

actor SaberColor : CustomInventory 10592
{
  inventory.pickupmessage "Lightsaber Color Changer (Use inventory Bar to activate)"
  inventory.pickupsound "misc/p_pkup"
  inventory.icon ARTICOLO
  inventory.amount 2
  inventory.maxamount 2
  +COUNTITEM
  +INVENTORY.UNDROPPABLE
  +INVBAR
  states
  {
  Spawn:
	LCHN A -1
	stop
  Use:
	TNT1 A 0 A_Jumpifinventory("SaberOrange", 1, "UseBlue")
	TNT1 A 0 A_Jumpifinventory("SaberBlue", 1, "UseGreen")
	TNT1 A 0
	goto UseOrange
  UseOrange:
	TNT1 A 0 A_TakeInventory("SaberGreen", 255)
	TNT1 A 0 A_GiveInventory ("SaberOrange", 1)
	TNT1 A 0 A_GiveInventory("SaberColor", 1)
	stop
  UseBlue:
	TNT1 A 0 A_TakeInventory("SaberOrange", 255)
	TNT1 A 0 A_GiveInventory("SaberBlue",1)
	TNT1 A 0 A_GiveInventory("SaberColor", 1)
	stop
  UseGreen:
	TNT1 A 0 A_TakeInventory("SaberBlue", 255)
	TNT1 A 0 A_GiveInventory("SaberGreen",1)
	TNT1 A 0 A_GiveInventory("SaberColor", 1)
	stop
  }
}

actor ForcePullAttack : LoreShot
{
	Height 1
	Radius 1
	Damage 1
	speed 100
	SeeSound "ForcePull"
	+SEEKERMISSILE
	states
	{
	Spawn:
		TNT1 AA 1 A_SeekerMissile(90, 90)
		loop
	Death:
		TNT1 A 4
		stop
	}
}

actor ForceFX
{
	Height 1
	Radius 1
	Damage 1
	Projectile
	speed 0
	Scale 0.86
	+GRENADETRAIL
	+GHOST
	+THRUGHOST
	+CORPSE
	+FORCEXYBILLBOARD
	states
	{
	Spawn:
		FORC ABCDEFE 2 BRIGHT
		stop
	Death:
		TNT1 A 4
		stop
	}
}

actor ForcePull : CustomInventory 10593
{
  inventory.pickupmessage "Force Pull!"
  inventory.pickupsound "misc/p_pkup"
  inventory.icon ARTIPULL
  inventory.amount 10
  inventory.maxamount 30
  Scale 0.2
  Renderstyle Add
  Alpha 0.8
  +COUNTITEM
  +FLOATBOB
  +INVBAR
  States
  {
  Spawn:
  PULL A 1 Bright A_SeekerMissile (90, 90)
  loop
  Use:
  TNT1 A 0 A_PlaySound("ForcePull")
  TNT1 A 0 A_FireCustomMissile("ForcePullAttack", 0, 0, 0, 0)
  TNT1 A 0 A_SpawnItem("ForceFX", 5, 36, 0, 0)
  stop
  }
}

actor SmallPalm 10594
{
height 64
radius 10
+SOLID
Scale 0.5
+FORCEYBILLBOARD
States
{
Spawn:
PTRE A 20
PTRE B 10
loop
}
}

actor TurretFlare
{
  SpawnID 249
  RenderStyle Add
  Scale 0.4
  Speed 20
  Damage 0
  PROJECTILE
  +NOCLIP
  States
  {
  Spawn:
	GNFL A 3 bright
	Stop
  }
}

// Molotov Cocktail

ACTOR MolotovCocktail : CustomInventory 25121
{
   Scale 0.25
   inventory.pickupmessage "Molotov Cocktail"
   inventory.pickupsound "misc/p_pkup"
   inventory.icon ARTIMOLO
   inventory.amount 1
   inventory.maxamount 12
   Obituary "%o can't handle %k's cocktail."
   +FLOATBOB
   +INVBAR
   +INVENTORY.KEEPDEPLETED
   States
   {
   Spawn:
	  MOGP A -1
	  Loop
   Use:
	  TNT1 A 1 A_FireCustomMissile("Bottlex", 0, 0, 0, 0)
	  stop
   }
}

actor MolotovTrail : RocketFire
{
	+NOINTERACTION
	Scale 0.15
}

ACTOR Bottlex
{
   Projectile
   DeathSound "weapons/bottle"
   Obituary "%o can't handle %k's cocktail."
   Scale 0.25
   Radius 12
   Height 8
   Speed 30
   Damage 5
   DamageType "Fire"
   -NOTELEPORT
   -NOGRAVITY
   +NODAMAGETHRUST
   +FORCERADIUSDMG
   Seesound "skeleton/swing"
   ExplosionDamage 32
   ExplosionRadius 80
   States
   {
   Spawn:
	  MOGT A 0
	  MOGT A 0 ThrustThingZ(0, 18, 0, 1)
	  MOGT A 0 A_PlaySoundEx("FlameThrower", "Auto", 0)
	  MOGT ABCDE 1 A_SpawnItemEx("MolotovTrail", Random(-4,4), Random(-4,4), Random(14,18), 0, 0, 0, 0, 128, 0)
	  goto Spawn+3
   Death:
	  FRTF G 1 BRIGHT A_SetTranslucent(0.5, 1)
	  FRTF H 1 BRIGHT A_Explode(32, 80)
	  FRTF H 0 BRIGHT A_CustomMissile("HFirex", 0, 0, 0)
	  FRTF ABC 3 BRIGHT
	  FRTF C 0 BRIGHT A_Jump(191,4)
	  FRTF C 0 BRIGHT A_Explode
	  FRTF DEFGHIJ 3 BRIGHT
	  FRTF KLMNO 3 BRIGHT
	  FRTF A 0
	  Stop
   }
}

ACTOR HFirex
{
   +MISSILE
   +DROPOFF
   +RANDOMIZE
   +FIREDAMAGE
   +HEXENBOUNCE
   +FORCERADIUSDMG
   +DONTSPLASH
   Obituary "%o can't handle %k's cocktail."
   BounceFactor 0
   Scale 1.5
   Speed 0
   Damage 5
   RENDERSTYLE ADD
   ALPHA 0.67
   Radius 1
   Height 1
   ExplosionDamage 5
   ExplosionRadius 64
   States
   {
   Spawn:
	  NULL A 0
	  NULL A 0 A_Stop
	  NULL AAAAAAAAAAAAA 0 A_SpawnItemEx("HFirex2", Random(-16, 16), Random(-16,16), Random(0, 32), Random(-1, 1), Random(-1, 1), Random(0, 4), 0, 0, 0)
	  NULL AAAAAAAAAAAAAA 2 A_SpawnItemEx("HFirex2", Random(-16, 16), Random(-16,16), Random(0, 32), Random(-1, 1), Random(-1, 1), Random(0, 4), 0, 0, 0)
	  Stop
   }
}

ACTOR HFirex2
{
   +NOCLIP
   +MISSILE
   +DROPOFF
   +RANDOMIZE
   +FIREDAMAGE
   +HEXENBOUNCE
   +NODAMAGETHRUST
   +FORCERADIUSDMG
   +DONTSPLASH
   BounceFactor 0
   Obituary "%o can't handle %k's cocktail."
   Scale 1.5
   Speed 0
   Damage 5
   RENDERSTYLE ADD
   ALPHA 0.67
   Radius 5
   Height 5
   ExplosionDamage 8
   ExplosionRadius 64
   States
   {
   Spawn:
	  NULL A 0
	  NULL A 0
	  NULL A 0
	  NULL A 8 BRIGHT
	  FRTF ABC 3 BRIGHT
	  FRTF ABC 3 BRIGHT
	  FRTF C 0 BRIGHT A_Explode
	  FRTF C 0 BRIGHT A_Jump(191,3)
	  FRTF ABC 3 BRIGHT A_Explode
	  FRTF C 0 BRIGHT A_Explode
	  FRTF ABC 3 BRIGHT A_Stop
	  FRTF ABC 3 BRIGHT A_Gravity
	  FRTF C 0 BRIGHT A_Explode
	  FRTF DEFGHIJ 3 BRIGHT
	  FRTF ABC 3 BRIGHT
	  FRTF C 0 BRIGHT A_Explode
	  FRTF DEFGHIJ 3 BRIGHT
	  FRTF ABC 3 BRIGHT
	  FRTF C 0 BRIGHT A_Explode
	  FRTF DEFGHIJ 3 BRIGHT
	  FRTF ABC 3 BRIGHT
	  FRTF C 0 BRIGHT A_Explode
	  FRTF DEFGHIJ 3 BRIGHT
	  FRTF KLMNO 3 BRIGHT
	  Stop
   }
}

actor MagmaBall
{
  Radius 10
  Height 10
  Speed 20
  Damage 20
  SpawnID 248
  Projectile
  Seesound "MagmaFly"
  DeathSound "MagmaHit"
  -NOGRAVITY
  +LOWGRAVITY
  +FORCEXYBILLBOARD
  States
  {
  Spawn:
  GIPS ABC 4 BRIGHT
  loop
  Death:
  GIPS D 4 BRIGHT
  GIPD ABCDE 4 BRIGHT
  stop
  }
}

ACTOR Stinger : Weapon 21122
{
   decal Bulletchip
   Inventory.PickupSound "misc/w_pkup"
   Inventory.PickupMessage "Stinger!"
   Obituary "%o was stung by %k"
   Weapon.AmmoType "CellAmmo"
   Weapon.AmmoType2 "CellAmmo"
   Weapon.AmmoGive 20
   Weapon.AmmoUse 1
   Weapon.AmmoUse2 2
   AttackSound "Empty"
   Weapon.Kickback 80
   Weapon.SelectionOrder 1000
   DamageType "Disintegrate"
   States
   {
   Spawn:
	  STNW A -1
	  Loop
   Ready:
	  STNG A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeReady")
	  STNG A 1 A_WeaponReady
	  goto Ready+1
   Deselect:
	  STNG A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeDeselect")
	  STNG A 1 A_Lower
	  goto Deselect+1
   Select:
	  STNG A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeSelect")
	  STNG A 1 A_Raise
	  goto Select+1
   Fire:
	  STNG A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeFire")
	  STNG A 2
	  STNG B 2 BRIGHT A_FireCustomMissile("StingerShot",0,1,0,0)
	  STNG A 2
	  STNG C 2 BRIGHT A_FireCustomMissile("StingerShot",0,1,9,0)
	  STNG A 2
	  STNG D 2 BRIGHT A_FireCustomMissile("StingerShot",0,1,-1,-8)
	  STNG A 2
	  STNG E 2 BRIGHT A_FireCustomMissile("StingerShot",0,1,15,-8)
	  STNG A 2 A_REFIRE
	  Goto Ready
   AltFire:
	  STNG A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeReady")
	  STNG A 3
	  STNG B 0 BRIGHT A_PlayWeaponSound("StingerFire")
	  STNG B 2 BRIGHT A_RailAttack(38, 0, 2, none, "00 FF 00", 0, 0)
	  STNG C 0 BRIGHT A_PlayWeaponSound("StingerFire")
	  STNG C 2 BRIGHT A_RailAttack(38, 5, 2, none, "00 FF 00", 0, 0)
	  STNG A 25
	  STNG A 0 A_Refire
	  goto Ready
   DukeReady:
	 XPAN AAAAAAAAAABBCCDDCCBB 1 A_WeaponReady
	 LOOP
   DukeDeselect:
	 XPAN A 1 A_Lower
	 LOOP
   DukeSelect:
	 XPAN A 0 A_PlayWeaponSound("DukeWeaponSelect")
	 XPAN A 1 A_Raise
	 goto DukeSelect+1
   DukeFire:
	 XPAN E 0 BRIGHT A_PlayWeaponSound("ExpanderFire")
	 XPAN E 2 BRIGHT A_FireBullets(2,2,1,10,"ExpanderPuff",1)
	 XPAN FG 1 BRIGHT
	 XPAN A 2
	 XPAN A 0 A_Refire
	 Goto DukeReady
   }
}

actor StingTrail
{
	Radius 1
	Height 1
	RenderStyle Add
	Scale 0.6
	Alpha 0.8
	Projectile
	Seesound "StingerFire"
	DeathSound "StingerHit"
	+FORCEXYBILLBOARD
	+CORPSE
	States
	{
	Spawn:
		STPL A 1 BRIGHT A_FadeOut(0.1)
		loop
	Death:
		TNT1 A 1
		stop
	}
}

actor StingerShot
{
 Projectile
 Radius 4
 Height 4
 Speed 55
 Damage 5
 RenderStyle Add
 Alpha 0.8
 Scale 0.6
 SeeSound "StingerFire"
 DeathSound "StingerHit"
 DamageType "Disintegrate"
 +SEEKERMISSILE
 +FORCEXYBILLBOARD
 States
 {
	Spawn:
		STPL A 0 BRIGHT A_SeekerMissile(2, 2)
		STPL AB 1 BRIGHT A_SpawnItemEX("StingTrail", 0, 0, 0, 0, 0, 0, 0, 128, 0)
		loop
	XDeath:
		TNT1 A 0
		TNT1 A 0 A_GiveToTarget("HitConfirmation", 1)
		goto Death
	Death:
		STPE A 2 BRIGHT A_Explode(5, 18, 1)
		STPE BCDE 2 BRIGHT
		stop
 }
}

actor QuadShotgun : ClericWeapon 12843
{
  decal Bulletchip
  obituary "%o was fuckin' obliterated by %k's quad-barreled shotgun."
  radius 20
  height 16
  attacksound "Quadshotgun"
  inventory.pickupmessage "You got the quad-barreled shotgun!"
  weapon.selectionorder 300
  weapon.kickback 300
  Weapon.AmmoType "SpreadAmmo"
  weapon.ammouse 4
  weapon.ammogive 8
  states
  {
  Ready:
	SHT3 A 1 A_WeaponReady
	loop
  Deselect:
	SHT3 A 1 A_Lower
	loop
  Select:
	SHT3 A 1 A_Raise
	loop
  Fire:
	SHT3 A 3
	SHT3 A 0 A_Recoil(12)
	SHT3 A 0 A_FireBullets (12.2, 7.1, 40, 5, "QuadPuff")
	SHT3 A 1 A_GunFlash
	SHT3 B 0 radius_quake(6, 6, 0, 1, 0)
	SHT3 BCDE 1
	SHT3 FGH 2
	SHT3 A 6 A_CheckReload
	SH3R A 0 A_PlaySoundEx("QuadOpen", "auto", 0)
	SH3R ABCDEFGHIJKLMNOP 2
	SH3R Q 2 A_PlaySoundEx("QuadLoad", "auto", 0)
	SH3R RSTUVW 2
	SH3R X 2 A_PlaySoundEx("QuadLoad", "auto", 0)
	SH3R YZ 2
	SH32 ABCDEFGH 2
	SH32 I 2 A_PlaySoundEx("QuadClose", "auto", 0)
	SH32 JKLMN 2
	SHT3 A 5 A_ReFire
	goto Ready
  Flash:
	SH3F A 2 bright A_Light1
	SH3F B 1 bright A_Light2
	SH3F B 0 bright A_Light0
	stop
  Spawn:
	SGN3 A -1
	stop
  }
}

actor Minigun : ClericWeapon 5014
{
	Weapon.AmmoType "MechAmmo"
	Weapon.AmmoGive 20
	Weapon.AmmoUse 1
	Weapon.Selectionorder 700
	Weapon.Kickback 100
	Inventory.PickupMessage "You got the minigun!"
	Obituary "%k torn %o to meaty shreds with %p Minigun"
	AttackSound "weapons/minigun"
	SpawnID 214
	Radius 20
	Height 16
	Decal BulletChip
	Scale 0.78
	States
	{
	Spawn:
		MNGN A -1
		Loop
	Ready:
		MNGG A 1 A_WeaponReady
		Loop
	Deselect:
		MNGG A 1 A_Lower
		Loop
	Select:
		MNGG A 1 A_Raise
		Loop
	Fire:
		MNGG A 0 A_PlaySoundEx("MinigunSpinUp", "auto", 0)
		MNGG A 5 A_WeaponReady(WRF_NOFIRE)
		MNGG B 5 A_WeaponReady(WRF_NOFIRE)
		MNGG C 4 A_WeaponReady(WRF_NOFIRE)
		MNGG D 4 A_GunFlash
		MNGG E 4 A_GunFlash
		MNGG F 2
		MNGG G 2 A_GunFlash
		MNGG H 2 A_GunFlash
		MNGG I 1
		MNGG J 1 A_GunFlash
		MNGG K 1 A_GunFlash
		MNGG L 1
		MNGG M 1 A_GunFlash
		MNGG O 1 A_GunFlash
		MNGG P 1
		MNGF A 0 A_Refire
		goto Letgo
	Hold:
		MNGG A 1 A_GunFlash
		MNGG B 1 A_GunFlash
		MNGG C 1
		MNGG D 1 A_GunFlash
		MNGG E 1 A_GunFlash
		MNGG F 1
		MNGG G 1 A_GunFlash
		MNGG H 1 A_GunFlash
		MNGG I 1
		MNGG J 1 A_GunFlash
		MNGG K 1 A_GunFlash
		MNGG L 1
		MNGG M 1 A_GunFlash
		MNGG O 1 A_GunFlash
		MNGG P 1
		MNGF A 0 A_Refire
		goto Letgo
	Letgo:
		MNGG A 0 A_PlaySoundEx("MinigunSpinDown", "auto", 0)
		MNGG A 1 A_WeaponReady(WRF_NOFIRE)
		MNGG B 1 A_WeaponReady(WRF_NOFIRE)
		MNGG C 1 A_WeaponReady(WRF_NOFIRE)
		MNGG D 1 A_WeaponReady(WRF_NOFIRE)
		MNGG E 1 A_WeaponReady(WRF_NOFIRE)
		MNGG F 1 A_WeaponReady(WRF_NOFIRE)
		MNGG G 2 A_WeaponReady(WRF_NOFIRE)
		MNGG H 2 A_WeaponReady(WRF_NOFIRE)
		MNGG I 2 A_WeaponReady(WRF_NOFIRE)
		MNGG J 2 A_WeaponReady(WRF_NOFIRE)
		MNGG K 3 A_WeaponReady(WRF_NOFIRE)
		MNGG L 3 A_WeaponReady(WRF_NOFIRE)
		MNGG M 3 A_WeaponReady(WRF_NOFIRE)
		MNGG N 4 A_WeaponReady(WRF_NOFIRE)
		MNGG O 4 A_WeaponReady(WRF_NOFIRE)
		MNGG P 4 A_WeaponReady(WRF_NOFIRE)
		goto Ready

	Flash:
		TNT1 A 0 A_JumpIfNoAmmo("NoFlash")
		TNT1 A 0 radius_quake(2, 2, 0, 1, 0)
		TNT1 A 0 A_FireCustomMissile("BulletCasingSpawnerRight",-45+random(-8,8),0,12,3)
		TNT1 A 0 A_FireBullets (6.0, 4, -1, 5, "NewBulletPuff")
		TNT1 A 0 A_Jump(128, "Flash2", "Flash3", "Flash4")
		goto Flash1
	Flash1:
		MNGF A 2 BRIGHT A_Light1
		MNGF A 0 BRIGHT A_Light0
		stop
	Flash2:
		MNGF B 2 BRIGHT A_Light1
		MNGF A 0 BRIGHT A_Light0
		stop
	Flash3:
		MNGF C 2 BRIGHT A_Light1
		MNGF A 0 BRIGHT A_Light0
		stop
	Flash4:
		MNGF D 2 BRIGHT A_Light1
		MNGF A 0 BRIGHT A_Light0
		stop
	NoFlash:
		TNT1 A 0 A_Light0
		stop
  }
}

ACTOR BurnDeath1
{
	Radius 12
	Height 56
	Speed 6
	Scale 0.85
	+FIREDAMAGE
	+FLOORCLIP
	+LOOKALLAROUND
	Obituary "%o was near someone in flames."
	SeeSound "burningup"
	RenderStyle Add
	Alpha 0.9
	ExplosionDamage 4
	ExplosionRadius 32
	States
	{
	Spawn:
		BDT1 A 0
		BDT1 A 0 A_Jump(32,7)
		BDT1 DDDDDD 1 Bright A_Look
		Goto Death
		BDT1 E 0 A_PlaySound("grunt/death")
		BDT1 E 0 A_SpawnItem("BurnedSkeleton1",1,0,0)
		BDT1 EFGHIJKLM 4 Bright A_Explode
		BDT1 N 5 Bright
		BDT1 O 6 Bright
		Stop
	See:
		BDT1 A 0 A_Explode
		BDT1 A 0 A_PlaySound("grunt/pain")
		BDT1 A 0 A_Jump(100, 13)
		BDT1 AAA 1 Bright A_Wander
		BDT1 A 0 A_Explode
		BDT1 BBB 1 Bright A_Wander
		BDT1 B 0 A_Explode
		TNT1 A 0 A_CustomMissile("IgnitedSurface", random(5,15), random(-15, 15), 0, 0)
		BDT1 CCC 1 Bright A_Wander
		BDT1 B 0 A_Explode
		BDT1 DDD 1 Bright A_Wander
		BDT1 C 0 A_PlaySound("grunt/pain")
		BDT1 C 0 A_Explode
		BDT1 AAA 1 Bright A_Wander
		BDT1 C 0 A_Explode
		BDT1 BBB 1 Bright A_Wander
		BDT1 D 0 A_Explode
		BDT1 CCC 1 Bright A_Wander
		BDT1 D 0 A_Explode
		TNT1 A 0 A_CustomMissile("IgnitedSurface", random(5,15), random(-15, 15), 0, 0)
		BDT1 DDD 1 Bright A_Wander
		BDT1 A 0 A_PlaySound("grunt/sight")
		BDT1 A 0 A_Explode
		BDT1 A 0 A_Jump(68, 16)
		BDT1 AAA 1 Bright A_Wander
		BDT1 A 0 A_Explode
		BDT1 BBB 1 Bright A_Wander
		BDT1 B 0 A_Explode
		BDT1 CCC 1 Bright A_Wander
		BDT1 B 0 A_Explode
		BDT1 DDD 1 Bright A_Wander
		BDT1 C 0 A_Explode
		BDT1 C 0 A_PlaySound("grunt/pain")
		BDT1 AAA 1 Bright A_Wander
		BDT1 C 0 A_Explode
		BDT1 BBB 1 Bright A_Wander
		BDT1 D 0 A_Explode
		TNT1 A 0 A_CustomMissile("IgnitedSurface", random(5,15), random(-15, 15), 0, 0)
		BDT1 CCC 1 Bright A_Wander
		BDT1 D 0 A_Explode
		BDT1 DDD 1 Bright A_Wander
		BDT1 A 0 A_PlaySound("grunt/pain")
		BDT1 A 0 A_Explode
		BDT1 AAA 1 Bright A_Wander
		BDT1 A 0 A_Explode
		BDT1 BBB 1 Bright A_Wander
		BDT1 B 0 A_Explode
		TNT1 A 0 A_CustomMissile("IgnitedSurface", random(5,15), random(-15, 15), 0, 0)
		BDT1 CCC 1 Bright A_Wander
		BDT1 B 0 A_Explode
		BDT1 DDD 1 Bright A_Wander
		BDT1 C 0 A_Explode
		BDT1 C 0 A_PlaySound("grunt/sight")
		BDT1 AAA 1 Bright A_Chase
		BDT1 C 0 A_Explode
		BDT1 BBB 1 Bright A_Wander
		BDT1 D 0 A_Explode
		TNT1 A 0 A_CustomMissile("IgnitedSurface", random(5,15), random(-15, 15), 0, 0)
		BDT1 CCC 1 Bright A_Wander
		BDT1 D 0 A_Explode
		BDT1 DDD 1 Bright A_Wander
		BDT1 A 0 A_PlaySound("grunt/pain")
		BDT1 A 0 A_Explode
		BDT1 AAA 1 Bright A_Wander
		BDT1 A 0 A_Explode
		BDT1 BBB 1 Bright A_Wander
		BDT1 B 0 A_Explode
		BDT1 CCC 1 Bright A_Wander
		BDT1 B 0 A_Explode
		BDT1 DDD 1 Bright A_Wander
	Death:
		BDT1 E 0 A_PlaySound("grunt/death")
		BDT1 EFGHIJKLM 4 Bright A_Explode
		BDT1 N 5 Bright
		BDT1 O 6 Bright
		Stop
	}
}

ACTOR BurnDeath2
{
	Radius 12
	Height 56
	Speed 0
	Scale 0.64
	+FLOORCLIP
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_PlaySound("BurningUp")
		1BRN ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 BRIGHT
		2BRN ABCDEFGHIJKLMN 1 BRIGHT
		2BRN A 0 A_PlaySound("Collapse")
		2BRN OPQRSTUVW 2
		2BRN W 0 A_UnsetSolid
		2BRN W -1
		Stop
	}
}

ACTOR BurnedSkeleton1
{
	Radius 12
	Height 56
	+SOLID
	+FLOORCLIP
	Scale 0.60
	States
	{
	Spawn:
		2BRN OPQRSTUVW 2
		2BRN W 0 A_UnSetSolid
		2BRN W -1
		Stop
	}
}

actor IgnitedGas : IgnitedSurface
{
	states
	{
	Spawn:
		TFIR A 0 A_CountDown
		TNT1 A 0 A_SpawnItemEx("IgnitedSurfaceFlame", random(-8,8), Random(-8,8), 0, 0, 0, Random(1, 2), 0, 128, 128)
		TNT1 A 2 A_Explode(5, 20, 1)
		TNT1 A 0 A_JumpIf(waterlevel == 3, "Disappear")
		loop
	}
}

actor Gasoline
{
	projectile
	Radius 10
	Height 8
	Damage 0
	Health 1
	Speed 12
	Scale 0.75
	BounceCount 1
	BounceFactor 0
	DamageType "Fire"
	DamageFactor "Ice", 0
	DamageFactor "IceRod", 0
	DamageFactor "Fist", 0
	Species "Gasoline"
	obituary "%o was purified by %k's cleansing flame."
	RenderStyle Translucent
	Mass 9999999999
	Alpha 0.2
	-SOLID
	+SHOOTABLE
	+NOBLOOD
	+NODAMAGETHRUST
	+FORCERADIUSDMG
	+FORCEXYBILLBOARD
	+THRUSPECIES
	-NOGRAVITY
	-NOBLOCKMAP
	+CORPSE
	states
	{
	Spawn:
		WSP2 ABCDEF 4
		goto Spawn+4
	Crash:
		PUDD A 0 A_SetTranslucent(0.1, 0)
		PUDD AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 50 A_JumpIfHealthLower(1, "Burnup")
		stop
	Death:
		PUDD A 1 A_JumpIfHealthLower(1, "Burnup")
		goto Crash
	Burnup:
		PUDD A 2 A_SetTranslucent(0.07, 1)
		PUDD A 2 A_SetTranslucent(0.05, 1)
		TNT1 A 0 A_PlaySound("BurningUp")
		TNT1 A 0 A_Explode(8, 38, 1)
		TNT1 A 1 A_CustomMissile("IgnitedGas", 5, 0, 0, 6, 0)
		stop
	}
}

actor GasolineCan : Weapon
{
  obituary "%o was purified by %k's cleansing flame."
  radius 20
  height 16
  inventory.pickupmessage "You got a Can of Gas!"
  weapon.selectionorder 9999
  weapon.kickback 300
  weapon.ammotype "GasolineAmmo"
  weapon.ammouse 1
  weapon.ammogive 100
  +WEAPON.NOALERT
  +WEAPON.WIMPY_WEAPON
  +WEAPON.NOAUTOAIM
  States
  {
  Select:
  GASG A 0 A_JumpIfInventory("TailsClassCheck", 1, "TailsSelect")
  GASG A 1 A_Raise
  loop

  Deselect:
  GASG A 0 A_JumpIfInventory("TailsClassCheck", 1, "TailsDeselect")
  GASG A 1 A_Lower
  loop

  Ready:
  GASG A 0 A_JumpIfInventory("TailsClassCheck", 1, "TailsReady")
  GASG A 1 A_WeaponReady
  loop

  TailsSelect:
  GAST A 1 A_Raise
  loop

  TailsDeselect:
  GAST A 1 A_Lower
  loop

  TailsReady:
  GAST A 1 A_WeaponReady
  loop

  Fire:
  GASG A 0 A_JumpIfInventory("TailsClassCheck", 1, "TailsFire")
  GASG A 6 A_PlaySound("Gasoline")
  GASG B 2
  TNT1 AAAA 1 A_FireCustomMissile("Gasoline",Random(5,-5), 1, -5, -10)
  TNT1 AA 1 A_FireCustomMissile("Gasoline",Random(5,-5), 0, -5, -10)
  GASG B 1
  GASG A 10 A_Refire
  goto Ready

  Hold:
  GASG A 0 A_JumpIfInventory("TailsClassCheck", 1, "TailsHold")
  TNT1 A 0 A_PlaySound("Gasoline")
  TNT1 AAAA 2 A_FireCustomMissile("Gasoline",Random(5,-5), 1, -5, -10)
  TNT1 AA 1 A_FireCustomMissile("Gasoline",Random(5,-5), 0, -5, -10)
  GASG B 5 A_Refire
  GASG A 5
  goto Ready

  TailsFire:
  GAST A 6 A_PlaySound("Gasoline")
  GAST B 2
  TNT1 AAAA 1 A_FireCustomMissile("Gasoline",Random(5,-5), 1, -5, -10)
  TNT1 AA 1 A_FireCustomMissile("Gasoline",Random(5,-5), 0, -5, -10)
  GAST B 1
  GAST A 10 A_Refire
  goto Ready

  TailsHold:
  TNT1 A 0 A_PlaySound("Gasoline")
  TNT1 AAAA 2 A_FireCustomMissile("Gasoline",Random(5,-5), 1, -5, -10)
  TNT1 AA 1 A_FireCustomMissile("Gasoline",Random(5,-5), 0, -5, -10)
  GAST B 5 A_Refire
  GAST A 5
  goto Ready

  Spawn:
	NULL A 0
	NULL A 1 A_SpawnItemEx("GasPickup", 0, 0, 0, 0, 0, 0, 0, 0, 0)
	stop
  }
}

ACTOR GasPickup : Custominventory 25375
{
   Scale 0.8
   inventory.pickupmessage "Can of Gas!"
   inventory.pickupsound "misc/p_pkup"
   +COUNTITEM
   States
   {
   Spawn:
	  GCAN A -1
	  loop
   Pickup:
	  TNT1 A 0 A_GiveInventory ("GasolineCan")
	  stop
   }
}

actor FlakCannon : ClericWeapon 12212
{
  obituary "%o was Ripped to shreds by %k's Flak."
  radius 20
  height 16
  inventory.pickupmessage "Flak Cannon!"
  weapon.selectionorder 200
  weapon.kickback 300
  weapon.ammotype "MechAmmo"
  weapon.ammouse 1
  Weapon.ammouse2 10
  weapon.ammotype2 "MechAmmo"
  weapon.ammogive 100
  States
  {
  Select:
  FLAK A 1 A_Raise
  loop

  Deselect:
  FLAK A 1 A_Lower
  loop

  Ready:
  FLAK A 1 A_WeaponReady
  loop

  Fire:
  FLAK A 0 A_PlayWeaponSound("FlakCannon")
  FLAK AAAAA 0 A_FireCustomMissile("FlakShard",Random(-6,6), 1, Random(8, 10), Random(-10, 10))
  FLAK AA 0 A_FireCustomMissile("FlakShard",Random(-6,6), 0, Random(8, 10), Random(-10, 10))
  FLAK B 2 radius_quake(2, 5, 0, 1, 0)
  FLAK CDE 2
  FLAK FGHI 2
  FLAK A 8
  FLAK A 4 A_Refire
  goto Ready

  AltFire:
  FLAK A 0 A_PlayWeaponSound("FlakShell")
  FLAK A 0 A_FireCustomMissile("FlakShell", 0, 10, 10, 4)
  FLAK B 2 radius_quake(2, 5, 0, 1, 0)
  FLAK CDE 2
  FLAK FGHI 2
  FLAK A 16
  FLAK A 4 A_Refire
  goto Ready

  Spawn:
  FLKP A -1
  stop
  }
}

Actor FlakTrail
{
	Radius 1
	Height 1
	RenderStyle Add
	Alpha 0.6
	Scale 1.25
	+DONTSPLASH
	+NOGRAVITY
	+CLIENTSIDEONLY
	+FORCEXYBILLBOARD
	+NOBLOCKMAP
	+MISSILE
	-ACTIVATEPCROSS
	-ACTIVATEIMPACT
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 1
		FLRA AAAABBBBCCCCDDDD 1 Bright A_Fadeout(0.04)
		stop
	Death:
		TNT1 A 1 Bright
		TNT1 A 1 Bright
		Stop
	}
}

actor FlakPuff : BulletSmoke
{
	Scale 0.08
	States
	{
	InWater:
		TNT1 AA 0 BRIGHT A_SpawnItemEX("Bubble", Random(-4,4), Random(-4,4), Random(-4,4), 0, 0, Random(1,2), 0, 128, 240)
		TNT1 A 1
		stop
	}
}

actor FlakShard
{
	Radius 2
	Height 2
	projectile
	+NOGRAVITY
	+HEXENBOUNCE
	+SKYEXPLODE
	+BLOODSPLATTER
	+FORCEXYBILLBOARD
	-BLOODLESSIMPACT
	obituary "%o was Ripped to shreds by %k's Flak."
	BounceCount 3
	ReactionTime 20
	Speed 46
	Damage 4
	Gravity 0.5
	SeeSound "Flakbounce"
	States
	{
	Spawn:
		METL A 0
		METL A 0 A_StopSound
		METL A 0 ThrustThingZ(0, Random(0, 12), Random(0,1), 1)
		METL AAAABBBB 1 BRIGHT A_SpawnItemEX("FlakTrail", 0, 0, 0, MOMX/2, MOMY/2, MOMZ/2, 0, SXF_CLIENTSIDE | SXF_ABSOLUTEMOMENTUM, 0)
		goto Fall
	Fall:
		METL C 0 A_Gravity
		METL CCCCDDDD 1 BRIGHT A_SpawnItemEX("FlakTrail", 0, 0, 0, MOMX/2, MOMY/2, MOMZ/2, 0, SXF_CLIENTSIDE | SXF_ABSOLUTEMOMENTUM, 0)
		goto Cooled
	Cooled:
		METL EEEEEEEE 1 A_SpawnItemEX("FlakPuff", 0, 0, 0, 0, 0, 0, 0, SXF_CLIENTSIDE, 0)
		METL E 0 A_CountDown
		loop
	XDeath:
		TNT1 A 0
		TNT1 A 0 A_GiveToTarget("HitConfirmation", 1)
		TNT1 A 1
		stop
	Death:
		TNT1 AAAAAA 0 A_SpawnItemEX("FlakPuff", 0, 0, 0, random(-1,1), random(-1,1), random(-1,1), random(-360,360), SXF_CLIENTSIDE, 0)
		PUFF AB 2 BRIGHT
		stop
	}
}

actor FreezerTrail
{
 Radius 8
 Height 8
 Gravity 0.02
 RenderStyle Add
 Alpha 0.9
 +PUFFONACTORS
 +NOBLOCKMAP
 +FORCEXYBILLBOARD
 States
 {
 Spawn:
 TNT1 A 0
 CRYT ABABABCBCBCDCDCDC 1 BRIGHT A_FadeOut(0.008)
 stop
 }
}

actor FreezerShot : PlasmaBall
{
	Damage 3
	Scale 0.6
	Renderstyle Normal
	+ICEDAMAGE
	+FOILINVUL
	+FORCEXYBILLBOARD
	States
	{
	Spawn:
	CRYT AB 1 BRIGHT A_SpawnItemEx("FreezerTrail", Random(-8, 8), Random(-8, 8), Random(-8,8), 0, 0, 0, 0, 128, 0)
	loop
	Death:
	BOLT A 0 A_SetTranslucent(0.9, 1)
	BOLT A 0 A_Playsound("Freezehit")
	BOLT ABCDEFGHIJKL 2 BRIGHT
	stop
	}
}

Actor FlakSmoke
{
	Radius 1
	Height 1
	Speed  0
	Damage 0
	RenderStyle Add
	Alpha 0.4
	Scale 0.7
	+CORPSE
	+DONTSPLASH
	+NOGRAVITY
	+FORCEXYBILLBOARD
	-ACTIVATEPCROSS
	States
	{
	Spawn:
		TNT1 A 2
		RSMK ABCDE 3 Bright A_Fadeout
		stop
	Death:
		TNT1 A 1 Bright
		TNT1 A 1 Bright
		Stop
	}
}

actor FlakShell
{
	Projectile
	Radius 14
	Height 11
	Damage 14
	Speed 30
	Scale 0.6
	Seesound "HeavyShot"
	DeathSound "BigExplosion"
	Obituary "%o was Shredded by %k's Flak Shell"
	+FORCEXYBILLBOARD
	-NOGRAVITY
	States
	{
	Spawn:
		FLS1 A 0
		FLS1 A 0 ThrustThingZ(0, 24, 0, 1)
		FLS1 A 1 A_SpawnItemEX("FlakSmoke", 0, 0, 0, random(-2,2), random(-2,2), random(-2,2), 0, 128, 0)
		goto Spawn+2
	Death:
		FLS1 A 0 A_Explode(50, 128, 1)
		FLS1 A 0 A_NoGravity
		TNT1 A 0 A_SetTranslucent(1.0, 1)
		TNT1 AAAAAAAAAAAAAAAAAAAA 0 A_CustomMissile("FlakShard",17,0,Random(-360,360), 2, random(-360, 360))
		TNT1 AAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("RPGSpark", 0, 0, 0, Random(-12,12), Random(-12,12), Random(-12,12), 0, SXF_CLIENTSIDE, 0)
		TNT1 AAAAAAAA 0 A_SpawnItemEx("HellfireRocketFire", Random(-10,10), Random(-10,10), Random(-10,10), Random(-16,16), Random(-16,16), Random(-16,16), random(-360,360), SXF_CLIENTSIDE, 0)
		EXPL ABCDEF 2 BRIGHT A_SpawnItemEx("HellfireRocketFire", Random(-10,10), Random(-10,10), Random(-10,10), Random(-16,16), Random(-16,16), Random(-16,16), random(-360,360), SXF_CLIENTSIDE, 0)
		EXPL GHIJKLMNOPQRST 1 BRIGHT A_FadeOut(0.06)
		stop
	}
}

actor ProtonGrenadeLauncher : Weapon 5011
{
  radius 20
  height 16
  SpawnID 154
  obituary "%o ate %k's Pineapple."
  inventory.pickupmessage "You Picked up the Proton Grenade Launcher!"
  weapon.selectionorder 2400
  weapon.kickback 300
  weapon.ammotype1 "ProtonAmmo"
  weapon.ammotype2 "ProtonAmmo"
  weapon.ammouse1 1
  weapon.ammouse2 1
  weapon.ammogive1 2
  weapon.ammogive2 0
  +WEAPON.NOAUTOFIRE
  +WEAPON.EXPLOSIVE
  +WEAPON.NOALERT
  States
  {
  Select:
  	GRLG A 0 A_JumpIfInventory("TailsClassCheck", 1, "TailsSelect")
  	GRLG A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeSelect")
  	GRLG A 1 A_Raise
  	goto Select+2

  Deselect:
  	GRLG A 0 A_JumpIfInventory("TailsClassCheck", 1, "TailsDeselect")
  	GRLG A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeDeselect")
  	GRLG A 1 A_Lower
  	goto Deselect+2

  Ready:
  	GRLG A 0 A_JumpIfInventory("TailsClassCheck", 1, "TailsReady")
  	GRLG A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeReady")
  	GRLG A 1 A_WeaponReady
  	goto Ready+2

  Hold:
  Fire:
  	GRLG A 0 A_JumpIfInventory("TailsClassCheck", 1, "TailsFire")
  	GRLG A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeFire")
  	GRLG A 0 A_AlertMonsters
  	GRLG A 2
  	GRLG B 2 A_GunFlash
  	GRLF A 0 A_PlayWeaponSound("weapons/grenlf")
  	GRLF A 2 BRIGHT A_FireCustomMissile("GBTWGrenade", 0, 1, 0, 0)
  	GRLF BCD 2 BRIGHT
  	GRLF A 2 BRIGHT
  	GRLG B 3
  	GRLG A 4
  	GRLG A 0 A_Refire
  	goto Ready+2
  AltFire:
  	GRLG A 0 A_JumpIfInventory("TailsClassCheck", 1, "TailsFire")
  	GRLG A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeAltFire")
  	GRLG A 0 A_AlertMonsters
  	GRLG A 2
  	GRLG B 2 A_GunFlash
  	GRLF A 0 A_PlayWeaponSound("weapons/grenlf")
  	GRLF A 2 BRIGHT A_FireCustomMissile("GBTWGrenadeLob", Random(-5, 5), 1, 0, 0)
  	GRLF BCD 2 BRIGHT
  	GRLF A 2 BRIGHT
  	GRLG B 3
  	GRLG A 4
  	GRLG A 0 A_Refire
  	goto Ready+2
  Flash:
	TNT1 A 2 bright A_Light1
	TNT1 A 2 bright A_Light2
	TNT1 A 2 bright A_Light1
	MISF A 0 bright A_Light0
	stop

  TailsSelect:
  	PUNT A 1 A_Raise
  	loop
  TailsDeselect:
  	PUNT A 1 A_Lower
  	loop
  TailsReady:
  	PUNT A 1 A_WeaponReady
  	loop
  TailsFire:
  	PUNT A 2
  	PUNT B 0 A_PlaySoundEx("skeleton/swing", "auto", 0)
  	PUNT BC 1
  	PUNT D 1 A_FireCustomMissile("StickyBomb", 0, 1, -5, 0)
  	PUNT EFGH 1
  	TNT1 A 15
  	TNT1 A 0 A_Refire
  	goto Ready

  DukeSelect:
	D6GL A 0 A_PlayWeaponSound("DukeWeaponSelect")
	D6GL A 1 A_Raise
	goto DukeSelect+1
  DukeDeselect:
	D6GL A 1 A_Lower
	loop
  DukeReady:
	D6GL A 1 A_WeaponReady
	loop
  DukeFire:
  	D6GL B 0 A_AlertMonsters
	D6GL B 0 A_PlayWeaponSound("Duke64GrenadeLaunch")
	D6GL B 3 A_FireCustomMissile("Duke64Grenade", 0, 1, 15, 0)
	D6GL CDE 3
	D6GL A 10
	D6GL A 0 A_Refire
	goto DukeReady
  DukeAltFire:
	D6GL B 0 A_PlayWeaponSound("Duke64GrenadeLaunch")
	D6GL B 3 A_FireCustomMissile("PlutoniumGrenade", 0, 1, 15, 0)
	D6GL CDE 3
	D6GL A 10
	D6GL A 0 A_Refire
	goto DukeReady
  Spawn:
	GLAU A -1
	stop
  }
}

ACTOR GrenadeSpark
{
	Radius 4
	Height 4
	Health 1
	Speed 10
	Mass 9
	Gravity 0.7
	Scale 0.8
	RenderStyle Add
	Alpha 0.9
	+MISSILE
	-NOGRAVITY
	+DONTSPLASH
	+CORPSE
	+NOBLOCKMAP
	+NOBLOCKMONST
	+FORCEXYBILLBOARD
	-ACTIVATEPCROSS
	-ACTIVATEIMPACT
	States
	{
	Death:
	Spawn:
		GSPA AB 4 BRIGHT A_JumpIf(waterlevel == 3, "Disappear")
		loop
	Crash:
		GSPA C 0 A_PlaySound("SparkHit")
		GSPA CDEFGHIJKL 3 BRIGHT
		stop
	Disappear:
		TNT1 A 0
		TNT1 A 1
		stop
	}
}

actor GrenTrail
{
	Radius 1
	Height 1
	Speed 0
	Scale 0.60
	RenderStyle Add
	PROJECTILE
	+FORCEXYBILLBOARD
	States
	{
	Spawn:
		TNT1 A 2
		FRTB A 1 Bright
		FRTB B 1 Bright
		FRTB C 1 Bright
		FRTB D 1 Bright
		FRTB E 1 Bright
		FRTB F 1 Bright
		FRTB G 1 Bright
		FRTB H 1 Bright
		FRTB I 1 Bright
		Stop
	Death:
		NULL A 1 Bright
		Stop
	}
}

actor GrenadeCloud
{
	Radius 1
	Height 1
	RenderStyle Add
	Alpha 0.9
	+NOBLOCKMAP
	+DONTSPLASH
	+NOTELEPORT
	+NOINTERACTION
	+DROPOFF
	States
	{
	Spawn:
		SGRN ABCDEFGHIJ 1 BRIGHT
		stop
	}
}

actor GrenadeExplosionShell
{
  Height 1
  Radius 1
  Speed 0
  RenderStyle Add
  Alpha 0.8
  Scale 0.8
  +NOGRAVITY
  +NOBLOCKMAP
  +NOCLIP
  +CLIENTSIDEONLY
  +FORCEXYBILLBOARD
  States
  {
   Spawn:
	NULL AA 1 BRIGHT
	stop
  }
}

actor StickyBombExplosion
{
	Radius 1
	Height 1
	RenderStyle Add
	Alpha 1.0
	Scale 0.8
	+NOBLOCKMAP
	+DONTSPLASH
	+NOTELEPORT
	+NOINTERACTION
	+DROPOFF
	States
	{
	Spawn:
		STKE ABCDEFGHIJKLMNOP 1 BRIGHT
		stop
	}
}

actor StickyBomb
{
	Radius 6
	Height 8
	Projectile
	-LOWGRAVITY
	-NOGRAVITY
	+EXPLODEONWATER
	+FORCEXYBILLBOARD
	+FORCERADIUSDMG
	+SEEKERMISSILE
	obituary "%o was stuck by %k."
	Speed 32
	Damage 1
	Gravity 0.7
	Scale 0.4
	States
	{
		Spawn:
			STIK A 0
			STIK A 0 ThrustThingZ(0, 20, 0, 1)
			STIK AB 4
			goto Spawn+2

 		XDeath:
			TNT1 A 0
			TNT1 A 0 A_PlaySoundEx("StickyLatchedOn", "Auto", 0)
			TNT1 A 0 A_GiveToTarget("HitConfirmation", 1)
			STIK DDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDD 1 A_Fire
			goto Explode2

		Crash:
			TNT1 A 0
			TNT1 A 0 A_PlaySoundEx("StickyHitWall", "Auto", 0)
			TNT1 A 0
			STIK C 40
			goto Explode1

		Death:
			TNT1 A 0
			TNT1 A 0 A_PlaySoundEx("StickyHitWall", "Auto", 0)
			TNT1 A 0 A_NoGravity
			STIK C 40
			goto Explode1

		Explode1:
			TNT1 A 0 A_SpawnItemEX("GrenadeExplosionShell", 0, 0, 0, 0, 0, 0, 0, SXF_CLIENTSIDE, 0)
			TNT1 A 0 A_SpawnItemEX("StickyBombExplosion", 0, 0, 0, 0, 0, 0, 0, SXF_CLIENTSIDE, 0)
			TNT1 AAAAAAAAAA 0 A_SpawnItemEx("RPGSpark", 0, 0, 0, Random(-16,16), Random(-16,16), Random(-16,16), random(-180,180), SXF_CLIENTSIDE, 0)
			goto ExplodeEnd

		Explode2:
			TNT1 A 0 A_SpawnItemEX("GrenadeExplosionShell", 0, 0, 32, 0, 0, 0, 0, SXF_CLIENTSIDE, 0)
			TNT1 A 0 A_SpawnItemEX("StickyBombExplosion", 0, 0, 32, 0, 0, 0, 0, SXF_CLIENTSIDE, 0)
			TNT1 AAAAAAAAAA 0 A_SpawnItemEx("RPGSpark", 0, 0, 32, Random(-16,16), Random(-16,16), Random(-16,16), random(-180,180), SXF_CLIENTSIDE, 0)
			goto ExplodeEnd

		ExplodeEnd:
			TNT1 A 0 A_AlertMonsters
			TNT1 A 0 A_ChangeFlag("EXTREMEDEATH", 1)
			TNT1 A 0 radius_quake(3, 16, 0, 3, 0)
			TNT1 A 0 A_Explode
			TNT1 A 0 A_NoGravity
			TNT1 A 0 A_SetTranslucent(0.9, 1)
			TNT1 A 0 A_PlaySoundEx("TechPlasmaSuperBoom", "Auto", 0)
			TNT1 A 2
			stop
	}
}

actor GBTWGrenade Replaces Grenade
{
	Radius 8
	Height 8
	Projectile
	+DOOMBOUNCE
	-LOWGRAVITY
	-NOGRAVITY
	-GRENADETRAIL
	+EXPLODEONWATER
	+FORCEXYBILLBOARD
	ReactionTime 20
	BounceCount 4
	BounceFactor 0.8
	obituary "%o ate %k's Pineapple."
	Speed 26
	SeeSound "weapons/grbnce"
	Damage 14
	Gravity 0.7
	States
	{
		Spawn:
			SGRN A 0
			SGRN A 0 A_NoGravity
			SGRN A 0 A_StopSound
			SGRN A 0 A_PlaySound("HeavyShot")
			SGRN AAAAA 4 BRIGHT A_SpawnItemEX("GrenTrail", 0, 0, 0, 0, 0, 0, 0, 128, 0)
			SGRN A 0 A_Gravity
			SGRN A 0 A_CountDown
			SGRN A 4
			goto Spawn+9

 		XDeath:
			TNT1 A 0
			TNT1 A 0 A_GiveToTarget("HitConfirmation", 1)
			goto Death

		Death:
			SGRN A 0 A_SetTranslucent(0.9, 1)
			SGRN A 0 A_PlaySound("weapons/grenlx")
			SGRN A 0 A_Explode
			SGRN A 0 A_SpawnItemEX("GrenadeExplosionShell", 0, 0, 0, 0, 0, 0, 0, 128, 0)
			SGRN AAAAAAA 0 A_SpawnItemEX("GrenadeSpark", 0, 0, 0, Random(-5,5), Random(-5,5), Random(6, 12), 0, 128, 0)
			SGRN AAAA 0 A_SpawnItemEX("GrenadeCloud", 0, 0, 0, Random(-5,5), Random(-5,5), Random(1, 5), 0, 128, 0)
			SGRN BCDEFGHIJ 2 BRIGHT A_SpawnItemEX("GrenadeCloud", 0, 0, 0, Random(-5,5), Random(-5,5), Random(1, 5), 0, 128, 0)
			stop
	}
}

actor GBTWGrenadeLob : GBTWGrenade
{
	+FORCEXYBILLBOARD
	+EXTREMEDEATH
	ReactionTime 45
	BounceCount 7
	BounceFactor 0.82
	obituary "%k force-fed %o a Pineapple."
	Speed 24
	Damage 8
	Gravity 0.7
	States
	{
		Spawn:
			SGRN A 0
			SGRN A 0 ThrustThingZ(0, 28, 0, 1)
			SGRN A 0 A_StopSound
			SGRN A 0 A_CountDown
			SGRN A 4
			goto Spawn+3
	}
}

actor Duke64Explosion
{
  Height 1
  Radius 1
  Speed 0
  RenderStyle Add
  Alpha 1.0
  +NOGRAVITY
  +NOBLOCKMAP
  +NOCLIP
  +CLIENTSIDEONLY
  +FORCEXYBILLBOARD
  States
  {
   Spawn:
	D6EX ABCDEFGHIJKLMNOPQ 2 BRIGHT
	stop
  }
}

actor Duke64ExplosionShell
{
  Height 1
  Radius 1
  Speed 0
  RenderStyle Add
  Alpha 0.6
  +NOGRAVITY
  +NOBLOCKMAP
  +NOCLIP
  +CLIENTSIDEONLY
  +FORCEXYBILLBOARD
  States
  {
   Spawn:
	NULL ABCDEFGH 2
	NULL IJKL 2 A_FadeOut(0.12)
	stop
  }
}

actor Duke64ExplosionSmoke
{
  Projectile
  Height 1
  Radius 1
  Speed 0
  Damage 0
  RenderStyle Add
  Alpha 0.7
  +NOGRAVITY
  +NOBLOCKMAP
  +CLIENTSIDEONLY
  +FORCEXYBILLBOARD
  +HEXENBOUNCE
  +BLOODLESSIMPACT
  +BOUNCEONACTORS
  +RIPPER
  +DONTSPLASH
  -BLOODSPLATTER
  States
  {
   Death:
   Spawn:
	SMK1 A 30
	SMK1 A 1 A_FadeOut(0.01)
	goto Spawn+1
  }
}

actor Duke64GrenadeSmoke
{
  Height 1
  Radius 1
  Speed 0
  Damage 0
  RenderStyle Add
  Alpha 0.7
  Scale 0.2
  +NOGRAVITY
  +NOBLOCKMAP
  +CLIENTSIDEONLY
  +FORCEXYBILLBOARD
  +DONTSPLASH
  +NOCLIP
  States
  {
   Death:
   Spawn:
	SMK1 A 1
	SMK1 A 1 A_FadeOut(0.04)
	goto Spawn+1
  }
}

actor Duke64Grenade
{
	Radius 8
	Height 8
	Scale 0.3
	Speed 18
	Damage 10
	Gravity 0.58
	ReactionTime 12
	BounceCount 4
	BounceFactor 0.8
	SeeSound "Duke64GrenadeBounce"
	obituary "%k force-fed %o a can of whoop-ass."
	Projectile
	+DOOMBOUNCE
	-NOGRAVITY
	+EXPLODEONWATER
	+FORCEXYBILLBOARD
	+EXTREMEDEATH
	+FORCERADIUSDMG
	States
	{
	Spawn:
		64GR A 0
		64GR A 0 ThrustThingZ(0, 20, 0, 1)
		64GR A 0 A_StopSound
		64GR A 0 A_CountDown
		64GR ABCDE 4 A_SpawnItemEX("Duke64GrenadeSmoke", 0, 0, 4, Random(-1,1), Random(-1,1), Random(-1,1), 0, 128, 0)
		goto Spawn+3
	Death:
		64GR A 0 A_PlaySound("DukeExplosion")
		64GR A 0 A_Explode
		64GR A 0 A_SpawnItemEX("Duke64Explosion", 0, 0, 4, 0, 0, 0, 0, 128, 0)
		64GR A 0 A_SpawnItemEX("Duke64ExplosionShell", 0, 0, 4, 0, 0, 0, 0, 128, 0)
		64GR A 0 A_SpawnItemEX("Duke64ExplosionRing", 0, 0, 4, 0, 0, 0, 0, 128, 0)
		64GR AAAAAAAAAAA 0 A_SpawnItemEX("Duke64ExplosionSmoke", Random(-48,48), Random(-48, 48), Random(-28, 36), Random(-1,1), Random(-1,1), Random(-1,1), 0, 128, 0)
		TNT1 A 1
		stop
	}
}

actor PlutoniumMist
{
	Projectile
	Radius 1
	Height 1
	Damage 0
	Speed 10
	Scale 0.6
	RenderStyle Add
	Alpha 1.0
	+FORCEXYBILLBOARD
	+DONTSPLASH
	-BLOODSPLATTER
	+BLOODLESSIMPACT
	States
	{
	Spawn:
		TNT1 A 0
		GPLE AB 2 BRIGHT
		GPLE CDE 1 BRIGHT
		GPLE E 1 A_FadeOut(0.1)
		goto Spawn+6
	Death:
		TNT1 A 0
		TNT1 A 1
		stop
	}
}

actor PlutoniumGrenade
{
	Radius 8
	Height 8
	Scale 0.3
	Speed 22
	Damage 5
	Gravity 0.58
	obituary "%o was irradiated by %k's Plutonium Grenade."
	Projectile
	-NOGRAVITY
	-NOTELEPORT
	+EXPLODEONWATER
	+FORCEXYBILLBOARD
	+FORCERADIUSDMG
	+NODAMAGETHRUST
	States
	{
	Spawn:
		64PG A 0
		64PG A 0 ThrustThingZ(0, 20, 0, 1)
		64PG ABCDE 4 A_SpawnItemEX("Duke64GrenadeSmoke", 0, 0, 4, Random(-1,1), Random(-1,1), Random(-1,1), 0, 128, 0)
		goto Spawn+2
	Death:
		64PG A 0 A_PlaySound("PlutoniumGrenadeExplode")
		64PG A 0 A_Explode(72, 192)
		64PG AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEX("PlutoniumMist", Random(-56,56), Random(-56, 56), Random(-56, 56), Random(-12,12), Random(-12,12), Random(-8,8), 0, 128, 0)
		TNT1 A 1
		stop
	}
}

actor SledgeHammerMode : Puzzleitem
{
inventory.amount 1
inventory.maxamount 1
-INVBAR
+INVENTORY.UNDROPPABLE
}

actor ServoKineticMode : Puzzleitem
{
inventory.amount 1
inventory.maxamount 1
-INVBAR
+INVENTORY.UNDROPPABLE
}

actor ValkrieMode : Puzzleitem
{
inventory.amount 1
inventory.maxamount 1
-INVBAR
+INVENTORY.UNDROPPABLE
}

actor SledgeSelector : Puzzleitem
{
inventory.amount 1
inventory.maxamount 1
-INVBAR
+INVENTORY.UNDROPPABLE
}

actor ValkrieCannons : Weapon
{
  radius 20
  height 16
  weapon.selectionorder 1
  weapon.kickback 300
  weapon.ammouse 0
  +WEAPON.CHEATNOTWEAPON
  +WEAPON.DONTBOB
  +WEAPON.ALT_AMMO_OPTIONAL
  +WEAPON.NOLMS
  States
  {
  Select:
  TNT1 A 1 A_Raise
  TNT1 AAAAAAAAAAAA 0 BRIGHT A_Raise
  loop

  Deselect:
  TNT1 A 1 A_Lower
  TNT1 AAAAAAAAAAAA 0 A_Lower
  loop

  Ready:
  TNT1 A 1 A_WeaponReady
  loop

  Fire:
  TNT1 A 0 A_JumpIfInventory("SledgeHammerMode", 1, "SledgeHammerFire")
  TNT1 A 0 A_JumpIfInventory("ServoKineticMode", 1, "ServoKineticFire")
  TNT1 A 0 A_PlayWeaponSound("ValkrieFire")
  TNT1 A 1 A_FireCustomMissile("ValkrieShot", 0, 0, 45, -18)
  TNT1 A 5
  TNT1 A 0 A_PlayWeaponSound("ValkrieFire")
  TNT1 A 1 A_FireCustomMissile("ValkrieShot", 0, 0, -45, -18)
  TNT1 A 5
  TNT1 A 0 A_Refire
  goto Ready

  AltFire:
  TNT1 A 0 A_JumpIfInventory("SledgeHammerMode", 1, "ValkrieMode")
  TNT1 A 0 A_JumpIfInventory("ServoKineticMode", 1, "SledgeHammerMode")
  TNT1 A 0
  goto ServoKineticMode
  ServoKineticMode:
  TNT1 A 0 A_GiveInventory("ServoKineticMode", 1)
  TNT1 A 0 A_TakeInventory("SledgeHammerMode", 1)
  TNT1 A 0 A_TakeInventory("ValkrieMode", 1)
  TNT1 A 10 A_PlayWeaponSound("ChangeMode")
  goto Ready
  SledgeHammerMode:
  TNT1 A 0 A_GiveInventory("SledgeHammerMode", 1)
  TNT1 A 0 A_TakeInventory("ServoKineticMode", 1)
  TNT1 A 0 A_TakeInventory("ValkrieMode", 1)
  TNT1 A 10 A_PlayWeaponSound("ChangeMode")
  goto Ready
  ValkrieMode:
  TNT1 A 0 A_TakeInventory("SledgeHammerMode", 1)
  TNT1 A 0 A_TakeInventory("ServoKineticMode", 1)
  TNT1 A 0 A_GiveInventory("ValkrieMode", 1)
  TNT1 A 10 A_PlayWeaponSound("ChangeMode")
  goto Ready

  SledgeHammerFire:
  TNT1 A 0 A_JumpIfInventory("ProtonAmmo", 2, "SledgeFireLeft")
  TNT1 A 10
  goto Ready
  SledgeFireLeft:
  TNT1 A 0
  TNT1 A 0 A_JumpIfInventory("SledgeSelector", 1, "SledgeFireRight")
  TNT1 A 0 A_FireCustomMissile("SledgeHammerRocket", 0, 2, -40, -16)
  TNT1 A 0 A_TakeInventory("ProtonAmmo", 2)
  TNT1 A 0 A_GiveInventory("SledgeSelector", 1)
  TNT1 A 2
  TNT1 A 10
  TNT1 A 0 A_Refire
  goto Ready
  SledgeFireRight:
  TNT1 A 0
  TNT1 A 0 A_FireCustomMissile("SledgeHammerRocket", 0, 2, 40, -16)
  TNT1 A 0 A_TakeInventory("ProtonAmmo", 2)
  TNT1 A 0 A_TakeInventory("SledgeSelector", 1)
  TNT1 A 2
  TNT1 A 10
  TNT1 A 0 A_Refire
  goto Ready
  ServoKineticFire:
  TNT1 A 0 A_FireCustomMissile("ServoShot", 0, 0, 60, -16)
  TNT1 A 0 A_FireCustomMissile("ServoShot", 0, 0, -60, -16)
  TNT1 A 6
  TNT1 A 0 A_Refire
  goto Ready
  }
}

actor DeathbringerCannons : ValkrieCannons
{
	States
	{
	Fire:
		TNT1 A 0 A_JumpIfInventory("SledgeHammerMode", 1, "SledgeHammerFire")
		TNT1 A 0 A_JumpIfInventory("ServoKineticMode", 1, "ServoKineticFire")
		TNT1 A 0 A_PlayWeaponSound("ServoFire")
		TNT1 A 1 A_FireCustomMissile("RFLShot", 0, 0, 45, -18)
		TNT1 A 5
		TNT1 A 0 A_PlayWeaponSound("ServoFire")
		TNT1 A 1 A_FireCustomMissile("RFLShot", 0, 0, -45, -18)
		TNT1 A 5
		TNT1 A 0 A_Refire
		goto Ready
	ServoKineticFire:
		TNT1 A 0 A_FireCustomMissile("DeathbringerServoShot", 0, 0, 60, -16)
		TNT1 A 0 A_FireCustomMissile("DeathbringerServoShot", 0, 0, -60, -16)
		TNT1 A 6
		TNT1 A 0 A_Refire
		goto Ready
	}
}

Actor ValkrieTrail
{
	Radius 1
	Height 1
	Speed  0
	Damage 0
	+CORPSE
	+DONTSPLASH
	+NOGRAVITY
	-ACTIVATEPCROSS
	+FORCEXYBILLBOARD
	States
	{
	Spawn:
		VALK A 6 Bright
		stop
	Death:
		TNT1 A 1 Bright
		TNT1 A 1 Bright
		Stop
	}
}

Actor ValkrieHit
{
	Radius 1
	Height 1
	Speed  0
	Damage 0
	+CORPSE
	+DONTSPLASH
	+NOGRAVITY
	-ACTIVATEPCROSS
	+ROCKETTRAIL
	States
	{
	Spawn:
		TNT1 A 5 BRIGHT
		stop
	Death:
		TNT1 A 1 Bright
		TNT1 A 1 Bright
		Stop
	}
}

actor ValkrieShot : FastProjectile
{
	Radius 12
	Height 12
	Projectile
	+EXTREMEDEATH
	+FORCEXYBILLBOARD
	obituary "%o was turned to a bloody pile of mush by %k's Valkrie Cannons."
	Speed 225
	SeeSound "ValkrieFire"
	Damage 12
	States
	{
	Spawn:
		VALK AB 1 BRIGHT
		loop

	Death:
		TNT1 A 0
		TNT1 A 1 A_SpawnItemEx("ValkrieHit", 0, 0, 0, 0, 0, 0, 0, SXF_CLIENTSIDE, 0)
		stop
	}
}

actor RFLShot : FastProjectile
{
	Radius 12
	Height 12
	Projectile
	+EXTREMEDEATH
	+FORCEXYBILLBOARD
	obituary "%o was wiped from existence by %k's RFLs."
	Speed 225
	SeeSound "ServoFire"
	Damage 12
	States
	{
	Spawn:
		SERV A 1 BRIGHT
		loop

	Death:
		TNT1 A 0 A_SpawnItemEx("ServoHit", 0, 0, 0, 0, 0, 0, 0, SXF_CLIENTSIDE, 0)
		TNT1 A 1
		stop
	}
}

Actor ServoHit
{
	Radius 1
	Height 1
	Speed  0
	Damage 0
	Scale 0.8
	+CORPSE
	+DONTSPLASH
	+NOGRAVITY
	+FORCEXYBILLBOARD
	-ACTIVATEPCROSS
	-ACTIVATEIMPACT
	States
	{
	Spawn:
		HBEX ABCDEFGHIJKLMNOP 2 Bright
		stop
	Death:
		TNT1 A 1 Bright
		TNT1 A 1 Bright
		Stop
	}
}

actor ServoShot : FastProjectile
{
 Radius 12
 Height 12
 Projectile
 +EXTREMEDEATH
 -BLOODSPLATTER
 +BLOODLESSIMPACT
 +FORCEXYBILLBOARD
 +FORCERADIUSDMG
 obituary "%o had %p molecules scrambled by %k's servo-kinetic lasers."
 Speed 100
 SeeSound "ServoFire"
 DamageType "ServoLaser"
 Damage 8
 States
 {
 Spawn:
 SERV A 1 BRIGHT
 loop

 Death:
 TNT1 A 0 A_SpawnItemEx("ServoHit", 0, 0, 0, 0, 0, 0, 0, SXF_CLIENTSIDE, 0)
 TNT1 A 0 A_Explode(28, 48, 0)
 TNT1 A 1
 stop
 }
}

actor DeathbringerServoShot : ServoShot
{
	SeeSound "DeathbringerServoFire"
}

Actor SledgeHammerTrail
{
	Radius 1
	Height 1
	Speed  0
	Damage 0
	Renderstyle Add
	Alpha 0.9
	+CORPSE
	+DONTSPLASH
	+NOGRAVITY
	+FORCEXYBILLBOARD
	-ACTIVATEPCROSS
	-ACTIVATEIMPACT
	States
	{
	Spawn:
		SPAR A 0
		SPAR A 0 A_Jump(164, "SpawnB", "SpawnC", "SpawnD", "SpawnE", "SpawnF", "SpawnG")
		SPAR A 1 Bright A_FadeOut(0.05)
		goto Spawn+2
	SpawnB:
		SPAR B 1 Bright A_FadeOut(0.03)
		loop
	SpawnC:
		SPAR C 1 Bright A_FadeOut(0.03)
		loop
	SpawnD:
		SPAR D 1 Bright A_FadeOut(0.03)
		loop
	SpawnE:
		SPAR E 1 Bright A_FadeOut(0.03)
		loop
	SpawnF:
		SPAR F 1 Bright A_FadeOut(0.03)
		loop
	SpawnG:
		SPAR G 1 Bright A_FadeOut(0.03)
		loop
	Death:
		TNT1 A 1 Bright
		TNT1 A 1 Bright
		Stop
	}
}

Actor SledgeHammerExplosionSmall
{
	Radius 1
	Height 1
	Speed  0
	Damage 0
	Scale 1.5
	+CORPSE
	+DONTSPLASH
	+NOGRAVITY
	+FORCEXYBILLBOARD
	-ACTIVATEPCROSS
	-ACTIVATEIMPACT
	States
	{
	Spawn:
		HBEX A 0
		HBEX A 0 A_Jump(127, "SpawnB", "SpawnC", "SpawnD", "SpawnE", "SpawnF")
		HBEX ABCDEFGHIJKLMNOP 4 Bright
		stop
	SpawnB:
		HBEX ABCDEFGHIJKLMNOP 2 Bright
		stop
	SpawnC:
		HBEX HIJKLMNOP 3 Bright
		stop
	SpawnD:
		HBEX HIJKLMNOP 2 Bright
		stop
	SpawnE:
		HBEX CDEFGHIJKLMNOP 3 Bright
		stop
	SpawnF:
		HBEX LMNOP 3 Bright
		stop
	Death:
		TNT1 A 1 Bright
		TNT1 A 1 Bright
		Stop
	}
}

Actor SledgeHammerExplosionLarge
{
	Radius 1
	Height 1
	Speed  0
	Damage 0
	Scale 4
	+CORPSE
	+DONTSPLASH
	+NOGRAVITY
	+FORCEXYBILLBOARD
	-ACTIVATEPCROSS
	-ACTIVATEIMPACT
	States
	{
	Spawn:
		HBEX ABCDEFGHIJKLMNOP 5 Bright
		stop
	Death:
		TNT1 A 1 Bright
		TNT1 A 1 Bright
		Stop
	}
}

actor SledgeHammerRocket
{
  radius 14
  height 14
  speed 50
  damage 36
  Scale 1.5
  SeeSound "SledgeHammerFire"
  deathsound "MassiveExplosion"
  obituary "%o was blasted away by %k's Sledgehammer Rockets"
  PROJECTILE
  +RANDOMIZE
  +FORCEXYBILLBOARD
  states
  {
  Spawn:
	DEVM A 1 bright A_SpawnItemEx("SledgeHammerTrail", -32, Random(-2, 2), Random(-2, 2), Random(0,-6), 0, 0, 0, 128, 0)
	DEVM AAAAAA 0 bright A_SpawnItemEx("SledgeHammerTrail", -32, Random(-2, 2), Random(-2, 2), Random(0, -6), 0, 0, 0, 128, 0)
	loop
  Death:
	MISL B 0 bright A_Explode(132, 256, 1)
	TNT1 A 0 bright A_SpawnItemEx("SledgeHammerExplosionLarge", 0, 0, 0, 0, 0, 0, 0, 128, 0)
	TNT1 AAAAAA 0 bright A_SpawnItemEx("SledgeHammerExplosionSmall", Random(-48, 48), Random(-48, 48), Random(-48, 48), 0, 0, 0, 0, 128, 0)
	TNT1 A 1
	TNT1 AAAAAA 0 bright A_SpawnItemEx("SledgeHammerExplosionSmall", Random(-48, 48), Random(-48, 48), Random(-48, 48), 0, 0, 0, 0, 128, 0)
	stop
  }
}

actor AcousticGuitar 11832
{
	Height 56
	Radius 10
	Scale 0.3
	+SOLID
	States
	{
		Spawn:
		GUIT A -1
		loop
	}
}

//Noisy cricket
//coded by Ruin and StrikerMan780

actor Noisy_Cricket : Weapon 12345
{
  inventory.pickupmessage "\cdNoisy Cricket \cc/ \ciSonic Wave Cannon"
  obituary "%o was reduced to nothing by %k's noisy cricket."
  radius 20
  height 16
  weapon.kickback 100
  weapon.ammotype "CricketAmmo"
  weapon.ammouse 1
  weapon.ammogive 1
  DamageType "Obliterate"
  attacksound "CricketFire"
  +WEAPON.BFG
  +WEAPON.NOLMS
  states
  {
  Ready:
	CRKG A 0 A_JumpIfInventory("TailsClassCheck", 1, "SWCReady")
	CRKG A 1 A_WeaponReady
	loop
  SWCReady:
	SWCG A 1 A_WeaponReady
	loop
  Deselect:
	CRKG A 0 A_JumpIfInventory("TailsClassCheck", 1, "SWCDeselect")
	CRKG A 1 A_Lower
	loop
  SWCDeselect:
	SWCG A 1 A_Lower
	loop
  Select:
	CRKG A 0 A_JumpIfInventory("TailsClassCheck", 1, "SWCSelect")
	CRKG A 0 A_Jump(127, "LolSelect")
	CRKG A 1 A_Raise
	goto Select+2
  LolSelect:
	CRKG A 0 A_PlayWeaponSound("BreakDamnThing")
	CRKG A 1 A_Raise
	goto LolSelect+1
  SWCSelect:
	SWCG A 1 A_Raise
	loop
  Fire:
	CRKG A 0 A_JumpIfInventory("TailsClassCheck", 1, "SWCFire")
	CRKG A 14 A_PlaySound("CricketCharge")
	CRKG A 1
	CRKG B 0 Radius_Quake(4, 6, 0, 1, 0)
	CRKG B 0 A_PlaySoundEx("CricketWave", "auto", 0)
	CRKG B 0 A_FireCustomMissile("CricketBeam", 0, 1, 8, 0)
	CRKG B 2 A_GunFlash
	CRKG C 2
	CRKG D 2
	CRKG E 0 ThrustThingZ(0, 40, 0, 0)
	CRKG E 2 A_Recoil (50)
	CRKG F 2
	CRKG A 5 A_ReFire
	goto Ready
  SWCFire:
	SWCG A 15 A_PlaySound("RailgunIn")
	SWCG B 0 A_FireCustomMissile("SonicWave", 0, 0, 2, 0)
	SWCG B 2 A_FireBullets (5.6, 0, 1, 1000, "SonicWaveBlast")
	SWCG B 0 A_Recoil (50)
	SWCG CDEF 3
	SWCG A 17
	goto SWCReady
  Flash:
	CRKF A 2 bright A_Light1
	CRKF A 0 bright A_Light0
	stop
  Spawn:
	CRKK A -1
	stop
  }
}

Actor SonicWaveTrail
{
	RenderStyle Add
	Radius 1
	Height 1
	Speed  0
	Damage 0
	+CORPSE
	+DONTSPLASH
	+NOGRAVITY
	-ACTIVATEPCROSS
	+FORCEXYBILLBOARD
	States
	{
	Spawn:
		CRTL ABCB 3 Bright
		stop
	Death:
		TNT1 A 1 Bright
		TNT1 A 1 Bright
		Stop
	}
}

actor SonicWave : FastProjectile
{
  RenderStyle Add
  radius 2
  height 2
  speed 255
  damage 0
  ReactionTime 10
  SeeSound "CricketWave"
  obituary "%o was disintegrated by %k's sonic wave cannon"
  +FORCEXYBILLBOARD
  PROJECTILE
  +RIPPER
  states
  {
  Spawn:
	CRTL ABCB 1 bright A_SpawnItemEX("SonicWaveTrail", 0, 0, 0, 0, 0, 0, 0, 128, 0)
	CRTL A 0 A_CountDown
	loop
  Death:
	TNT1 AAA 1
	stop
  }
}

actor CricketBeam : FastProjectile
{
  RenderStyle Add
  Alpha 1.0
  radius 2
  height 2
  speed 200
  damage 1000
  SeeSound "CricketWave"
  obituary "%o was vaporized by %k's noisy cricket"
  DamageType "Obliterate"
  +FORCEXYBILLBOARD
  PROJECTILE
  states
  {
  Spawn:
	SERV A 1 bright
	loop
  Death:
	TNT1 A 0
	TNT1 A 1 A_SpawnItemEx("CricketBlast", 0, 0, 0, 0, 0, 0, random(-180, 180), 0, 0)
	TNT1 A 1
	stop
  }
}

actor RoflBoom 12362
{
 Radius 20
 Height 56
 Health 800
 Mass 1400
 +Solid
 +SHOOTABLE
 +NOBLOOD
 DeathSound "weapons/grenlx"
 States
	{
	Spawn:
	ROFL AB 6
	loop

	Death:
	TNT1 A 0 A_Scream
	TNT1 A 0 Bright A_CustomMissile("NukeRadiation", 32, 0, 0)
	NEXP A 0 A_Explode(600, 356)
	NEXP ABCDEFGHIJKLMNOPQRSTU 1 bright
	stop
	}
}

actor Raining64 12363
{
	Radius 32
	Height 1
	Speed 0
	Mass 9999999
	+SPAWNCEILING
	+NOGRAVITY
	+CORPSE
	States
	{
	Spawn:
		TNT1 A 6 A_SpawnItemEX("Rain", Random(-32,32), Random(-32,32), 0, 0, 0, 0, 0, 128, 128)
		Loop
	}
}

actor Raining128 12364
{
	Radius 64
	Height 1
	Speed 0
	Mass 9999999
	+SPAWNCEILING
	+NOGRAVITY
	+CORPSE
	States
	{
	Spawn:
		TNT1 A 6 A_SpawnItemEX("Rain", Random(-64,64), Random(-64,64), 0, 0, 0, 0, 0, 128, 128)
		Loop
	}
}

actor RainingBlood128 21112
{
	Radius 64
	Height 1
	Speed 0
	Mass 9999999
	+SPAWNCEILING
	+NOGRAVITY
	+CORPSE
	States
	{
	Spawn:
		TNT1 A 4 A_SpawnItemEX("BloodRain", Random(-64,64), Random(-64,64), 0, 0, 0, 0, 0, 128, 128)
		Loop
	}
}

actor Raining512HQ 18424
{
	Radius 256
	Height 1
	Speed 0
	Mass 9999999
	+SPAWNCEILING
	+NOGRAVITY
	+CORPSE
	States
	{
	Spawn:
		TNT1 A -1
		loop
	Raining:
		TNT1 A 3 A_SpawnItemEX("Rain", Random(-256,256), Random(-256,256), 0, 0, 0, 0, 0, 128, 128)
		loop
	}
}

actor Raining1024HQ 18425
{
	Radius 512
	Height 1
	Speed 0
	Mass 9999999
	+SPAWNCEILING
	+NOGRAVITY
	+CORPSE
	States
	{
	Spawn:
		TNT1 A -1
		loop
	Raining:
		TNT1 A 2 A_SpawnItemEX("Rain", Random(-512,512), Random(-512,512), 0, 0, 0, 0, 0, 128, 128)
		loop
	}
}

actor Raining2048HQ 18426
{
	Radius 1024
	Height 1
	Speed 0
	Mass 9999999
	+SPAWNCEILING
	+NOGRAVITY
	+CORPSE
	States
	{
	Spawn:
		TNT1 A -1
		loop
	Raining:
		TNT1 A 1 A_SpawnItemEX("Rain", Random(-1024,1024), Random(-1024,1024), 0, 0, 0, 0, 0, 128, 128)
		loop
	}
}

actor Booze1 : CustomInventory 30100
{
 //$SPRITE BOZEA0
 //Booze1
 inventory.pickupmessage "Drank an Entire 40oz Jug of Malt Liquor!"
 inventory.pickupsound "drinkpickup"
 inventory.maxamount 0
 Radius 6
 Height 16
 Scale 0.8
 +COUNTITEM
 +INVENTORY.AUTOACTIVATE
 States
 {
 Spawn:
 BOZE A -1
 stop
 Use:
 TNT1 A 0
 TNT1 A 1 A_Print("Sorry, Drunk Mode Script Needs Fixing")
 stop
 }
}

actor Booze2 30101
{
 //$SPRITE BOZEB0
 //Booze2
 Radius 6
 Height 16
 Scale 0.8
 +SOLID
 States
 {
 Spawn:
 BOZE B -1
 stop
 }
}

actor Booze3 30102
{
 //$SPRITE BOZEC0
 //Booze3
 Radius 6
 Height 16
 Scale 0.8
 +SOLID
 States
 {
 Spawn:
 BOZE C -1
 stop
 }
}

actor Booze4 30103
{
 //$SPRITE BOZED0
 //Booze4
 Radius 6
 Height 16
 Scale 0.8
 +SOLID
 States
 {
 Spawn:
 BOZE D -1
 stop
 }
}

actor Booze5 30104
{
 //$SPRITE BOZEE0
 //Booze5
 Radius 6
 Height 16
 Scale 0.8
 +SOLID
 States
 {
 Spawn:
 BOZE E -1
 stop
 }
}

actor Booze6 30105
{
 //$SPRITE BOZEF0
 //Booze6
 Radius 6
 Height 16
 Scale 0.8
 +SOLID
 States
 {
 Spawn:
 BOZE F -1
 stop
 }
}

actor Booze7 30106
{
 //$SPRITE BOZEG0
 //Booze7
 Radius 6
 Height 16
 Scale 0.8
 +SOLID
 States
 {
 Spawn:
 BOZE G -1
 stop
 }
}

actor Stripper 30107
{
 //$SPRITE STRPA0
 //Stripper
 Radius 16
 Height 56
 Scale 0.62
 +SOLID
 +USESPECIAL
 States
 {
 Spawn:
 STRP ABCDEDCB 5
 loop
 Strip:
 STRP F 10 A_Playsound("stripper")
 STRP GHGHGHGHGHGHGHGHGH 3
 STRP F 7
 goto Spawn
 }
}

ACTOR MiniPalmTree 30001
{
	  Radius 4
	  Height 8
	  Scale 0.08
	  +SOLID
	  +FORCEYBILLBOARD
	States
	{
	Spawn:
		PALM A -1
		Loop
	}
}

ACTOR SeaGull 30002
{
	  Radius 2
	  Height 2
	  Scale 0.90
	  +NOBLOCKMAP
	  +NOGRAVITY
	States
	{
	Spawn:
		GULL ABCD 4
		Loop
	}
}

ACTOR BigPalmTree 30003
{
	  Radius 16
	  Height 162
	  Scale 0.88
	  +SOLID
	  +FORCEYBILLBOARD
	States
	{
	Spawn:
		PALM A -1
		Loop
	}
}

actor RageRune2 : RageRune Replaces RageRune
{
  Scale 0.66
  States
  {
  Spawn:
  RAGR ABCD 6
  loop
  }
}

actor NewShotgun : Weapon Replaces Shotgun
{
  Decal BulletChip
  spawnid 27
  obituary "%o chewed on %k's boomstick."
  radius 20
  height 16
  inventory.pickupmessage "You got the shotgun!"
  weapon.selectionorder 1300
  weapon.kickback 100
  Weapon.AmmoType "SpreadAmmo"
  weapon.ammouse 1
  weapon.ammogive 8
  states
  {
  Ready:
	SHTG A 0 A_JumpIfInventory("TailsClassCheck", 1, "TailsReady")
	SHTG A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeReady")
	SHTG A 1 A_WeaponReady
	goto Ready+2
  Deselect:
	SHTG A 0 A_JumpIfInventory("TailsClassCheck", 1, "TailsDeselect")
	SHTG A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeDeselect")
	SHTG A 1 A_Lower
	goto Deselect+2
  Select:
	SHTG A 0 A_JumpIfInventory("TailsClassCheck", 1, "TailsSelect")
	SHTG A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeSelect")
	SHTG A 1 A_Raise
	goto Select+2
  Fire:
	SHTG A 0 A_JumpIfInventory("TailsClassCheck", 1, "TailsFire")
	SHTG B 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeFire")
	SHTG B 0 A_FireCustomMissile("ShotgunSmoke", random(-1, 1), 0, 3, 7)
	SHTG B 0 A_GunFlash
	SHTG B 0 Radius_Quake(2, 3, 0, 1, 0)
	SHTG B 0 bright A_PlayWeaponSound("weapons/shotgf")
	SHTG B 1 Bright A_FireBullets (5.6, 3.5, 10, 5, "NewBulletPuff")
	SHTG CDEF 1
	SHTG G 3
	SHTG H 2 A_PlaySoundEx("ShotgunCock", "auto", 0)
	SHTG IJKL 2
	SHTG M 0 A_FireCustomMissile("ShellCasingSpawnerRight",-45+random(-8,8),0,12,3)
	SHTG MNOPQRS 2
	SHTG A 0 A_Refire
	goto Ready
  Flash:
	SHTG A 0 A_JumpIfInventory("TailsClassCheck", 1, "TailsFlash")
	SHTF A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeFlash")
	SHTF A 2 Bright A_Light1
	SHTF A 0 Bright A_Light0
	stop

  DukeReady:
	DHTG A 1 A_WeaponReady
	goto DukeReady
  DukeDeselect:
	DHTG A 1 A_Lower
	loop
  DukeSelect:
	DHTG A 0 A_PlayWeaponSound("DukeShotgunCock")
	DHTG A 0 A_Jump(48, "DukeSpeak")
	DHTG A 1 A_Raise
	goto DukeSelect+2
  DukeSpeak:
  	DHTG A 0 A_PlaySoundEx("DukeShotgunRaise", "SoundSlot5", 0, 0.3)
  	goto DukeSelect+2
  DukeFire:
	DHTG E 0 bright A_PlayWeaponSound("DukeShotgunFire")
	DHTG E 0 A_FireBullets (4, 2, 6, 7, "DukeShotgunBulletPuff")
	DHTG A 3 A_GunFlash
	DHTG EFE 2
	DHTG A 3
	DHTG BC 3
	DHTG G 3 A_PlaySound("DukeShotgunCock")
	DHTG D 4
	DHTG G 3 A_FireCustomMissile("ShellCasingSpawnerLeft",45+random(-8,8),0,0,6)
	DHTG CB 3
	DHTG A 1
	DHTG A 5 A_ReFire
	goto DukeReady
  DukeFlash:
	DHTF A 3 bright A_Light1
	DHTF B 2 bright A_Light2
	DHTF B 0 bright A_Light0
	stop
	
  TailsSelect:
	PIPS A 1 A_Raise
	loop
  TailsDeselect:
    PIPS A 1 A_Lower
	loop
  TailsReady:
    PIPS A 1 A_WeaponReady
	loop
  TailsFire:
	PIPS B 0 Radius_Quake(2, 3, 0, 1, 0)
	PIPS B 0 A_PlayWeaponSound("PIPS")
	PIPS B 0 A_GunFlash
	PIPS BBBBB 0 A_FireCustomMissile("PIPS_Shot",random(-4,4),0,10,0,0,random(-2,2))
	PIPS B 1 A_FireCustomMissile("PIPS_Shot",random(-4,4),1,10,0,0,random(-2,2))
	PIPS C 1
	PIPS DE 2
	PIPS A 8
    PIPS A 0 A_Refire
	goto TailsReady
  TailsFlash:
	PIPF A 2 A_Light2
	TNT1 A 0 A_Light0
	stop
  Spawn:
	SHOT A -1
	stop
  }
}

actor ForceThrust : CustomInventory 18635
{
  inventory.pickupmessage "Force Thrust!"
  inventory.pickupsound "misc/p_pkup"
  inventory.icon ARTITHRU
  inventory.amount 5
  inventory.maxamount 30
  Scale 0.2
  Renderstyle Add
  Alpha 0.8
  +COUNTITEM
  +FLOATBOB
  +INVBAR
  States
  {
  Spawn:
  THRU A 1 Bright
  loop
  Use:
  TNT1 A 0 A_PlaySound("ForceThrust")
  TNT1 A 0 ThrustThingZ(0, 30, 0, 0)
  TNT1 A 0 A_Recoil(-24)
  TNT1 A 0 A_SpawnItem("ForceFX", 0, 24, 0, 0)
  stop
  }
}

actor TechPlasmaTrail
{
	Radius 2
	Height 2
	RenderStyle Add
	Alpha 0.8
	Scale 0.5
	Projectile
	+FORCEXYBILLBOARD
	States
	{
		Spawn:
			TNT1 A 2
			TPT1 IJKLMNOPQRSTUVWXYZ 1 BRIGHT A_FadeOut(0.08)
			TPT2 ABC 1 BRIGHT A_FadeOut(0.08)
			stop
		Death:
			TNT1 AA 1
			stop
	}
}

actor TechPlasmaBurst : TechPlasmaTrail
{
	Scale 0.6
	states
	{
	Spawn:
		TPT1 ABCDEFGHIJKLMNOPQRSTUVXYZ 1 BRIGHT A_FadeOut(0.01)
		TPT2 ABC 1 BRIGHT
		stop
	}
}

actor TechPlasmaBurst2 : TechPlasmaBurst
{
	states
	{
	Spawn:
		TPT1 ABCDEFGHIJKLMNOPQRSTUVXYZ 1 BRIGHT A_FadeOut(0.05)
		TPT2 ABC 1 BRIGHT
		stop
	}
}

actor TechPlasma
{
  Radius 8
  Height 8
  Speed 50
  Damage 7
  Scale 0.75
  Seesound "TechPlasmaBounce"
  BounceCount 2
  BounceFactor 1
  Projectile
  RenderStyle Add
  Alpha 1.0
  +HEXENBOUNCE
  +FORCEXYBILLBOARD
  States
  {
	Spawn:
		TPLA A 0 BRIGHT
		TPLA A 0 BRIGHT A_StopSound
		TPLA A 1 BRIGHT A_SpawnItemEX("TechPlasmaTrail", 0, 0, 0, MOMX/2+Random(-1,1), MOMY/2+Random(-1,1), MOMZ/2+Random(-1,1), random(-360,360), SXF_CLIENTSIDE | SXF_ABSOLUTEMOMENTUM, 0)
		goto Spawn+2
	XDeath:
		TNT1 A 0
		TNT1 A 0 A_GiveToTarget("HitConfirmation", 1)
		goto Death
	Death:
		TPLA B 0
		TPLA B 0 A_PlaySound("TechPlasmaHit")
		TPLA BBBBBBBBBB 0 A_SpawnItemEX("TechPlasmaBurst2", 0, 0, 0, Random(-3,3), Random(-3,3), Random(-3,3), random(-360,360), 128, 0)
		TPLA BBBCCCDDD 1 BRIGHT A_SpawnItemEX("TechPlasmaBurst", 0, 0, 0, Random(-1,1), Random(-1,1), Random(-1,1), random(-360,360), 128, 0)
		stop
  }
}

actor SuperTechPlasma
{
  Radius 11
  Height 22
  Speed 50
  Damage 12
  Obituary "%o wasn't aware of %k's technological genius."
  ReactionTime 128
  Seesound "weapons/plasmax"
  BounceCount 2
  BounceFactor 1
  Projectile
  +HEXENBOUNCE
  +FORCERADIUSDMG
  +EXTREMEDEATH
  +FORCEXYBILLBOARD
  States
  {
	Spawn:
		TPS2 A 0
		TPS2 A 0 A_StopSound
		TPS2 A 1 BRIGHT A_SpawnItemEX("SuperTechPlasmaTrail", Random(-16, 16), Random(-16, 16), Random(-16, 16), 0, 0, 0, 0, 128, 0)
		TPS2 A 0 BRIGHT A_SpawnItemEX("SuperTechPlasmaTrail", Random(-16, 16), Random(-16, 16), Random(-16, 16), 0, 0, 0, 0, 128, 0)
		TPS2 B 1 BRIGHT A_SpawnItemEX("SuperTechPlasmaTrail", Random(-16, 16), Random(-16, 16), Random(-16, 16), 0, 0, 0, 0, 128, 0)
		TPS2 B 0 BRIGHT A_SpawnItemEX("SuperTechPlasmaTrail", Random(-16, 16), Random(-16, 16), Random(-16, 16), 0, 0, 0, 0, 128, 0)
		TPS2 A 0 A_CountDown
		goto Spawn+2
	XDeath:
		TNT1 A 0
		TNT1 A 0 A_GiveToTarget("HitConfirmation", 1)
		goto Death
	Death:
		MISL B 0 A_PlaySound("TechPlasmaSuperBoom")
		MISL B 0 A_SetTranslucent(0.9, 1)
		MISL B 0 A_Explode(24, 64, 0)
		MISL BCD 1 BRIGHT
		stop
  }
}

actor SuperTechPlasmaTrail
{
	Radius 1
	Height 1
	RenderStyle Add
	Alpha 0.8
	Scale 0.4
	Projectile
	+CORPSE
	+FORCEXYBILLBOARD
	+NOINTERACTION
	States
	{
		Spawn:
			TPS2 BCDE 4 BRIGHT
			stop
		Death:
			TNT1 A 1
			stop
	}
}

actor Railmode : Puzzleitem
{
	inventory.amount 1
	inventory.maxamount 1
	-INVBAR
	+INVENTORY.UNDROPPABLE
}

actor TechUpgraded : PuzzleItem
{
  inventory.amount 1
  inventory.maxamount 1
  -INVBAR
  +INVENTORY.UNDROPPABLE
  states
  {
  Spawn:
	TNT1 A -1
	loop
  }
}

actor Tails_TechPistol : MageWeapon
{
  Decal TechRailScorch
  attacksound "TechRail"
  obituary "%o was blasted by %k's TechPistol."
  weapon.selectionorder 1300
  weapon.kickback 100
  weapon.ammotype "CellAmmo"
  weapon.ammouse 1
  weapon.ammogive 0
  +WEAPON.CHEATNOTWEAPON
  states
  {
  Ready:
	TEKP A 0 A_JumpIfInventory("RailMode", 1, "RailModeReady")
	TEKP A 0 A_JumpIfInventory("RailGunCoreInstagib", 1, "RailModeReady")
	TEKP A 0 A_JumpIfInventory("TechUpgraded", 1, "PowerReady")
	TEKP A 1 A_WeaponReady
	goto Ready+2
  RailModeReady:
	TEKR A 1 A_WeaponReady
	loop
  PowerReady:
	TEKS A 1 A_WeaponReady
	loop
  Deselect:
	TEKP A 0 A_JumpIfInventory("RailMode", 1, "RailModeDeselect")
	TEKP A 0 A_JumpIfInventory("RailGunCoreInstagib", 1, "RailModeDeselect")
	TEKP A 0 A_JumpIfInventory("TechUpgraded", 1, "PowerDeselect")
	TEKP A 1 A_Lower
	TEKP A 0 A_Lower
	goto Deselect+3
  RailModeDeselect:
	TEKR A 1 A_Lower
	TEKR A 0 A_Lower
	loop
  PowerDeselect:
	TEKS A 1 A_Lower
	loop
  Select:
	TEKP A 0 A_JumpIfInventory("RailMode", 1, "RailModeSelect")
	TEKP A 0 A_JumpIfInventory("RailGunCoreInstagib", 1, "RailModeSelect")
	TEKP A 0 A_JumpIfInventory("TechUpgraded", 1, "PowerSelect")
	TEKP A 1 A_Raise
	TEKP A 0 A_Raise
	goto Select+3
  RailModeSelect:
	TEKR A 1 A_Raise
	TEKR A 0 A_Raise
	loop
  PowerSelect:
	TEKS A 1 A_Raise
	loop
  Fire:
	TEKP A 0 A_JumpIfInventory("RailMode", 1, "RailFire")
	TEKP A 0 A_JumpIfInventory("RailGunCoreInstagib", 1, "RailFire")
	TEKP A 0 A_JumpIfInventory("TechUpgraded", 1, "PowerFire")
	TEKP A 1
	TEKP B 0 Radius_Quake(1, 3, 0, 1, 0)
	TEKP B 0 A_GunFlash
	TEKP B 0 A_PlayWeaponSound("TechPlasma")
	TEKP B 2 A_FireCustomMissile("TechPlasma", 0, 1, 13, 0)
	TEKP C 2
	TEKP D 2
	TEKP E 2
	TEKP F 2
	TEKP G 3
	TEKP A 2
	TEKP A 0 A_Refire
	goto Ready
  PowerFire:
	TEKS A 1
	TEKS B 0 Radius_Quake(4, 3, 0, 1, 0)
	TEKS B 0 A_GunFlash
	TEKS B 0 A_PlayWeaponSound("TechPlasmaSuper")
	TEKS B 2 A_FireCustomMissile("SuperTechPlasma", 0, 1, 13, 0)
	TEKS C 2
	TEKS D 2
	TEKS E 2
	TEKS F 2
	TEKS G 3
	TEKS A 2
	TEKS A 0 A_Refire
	goto Ready
  RailFire:
  	TEKR B 0 Radius_Quake(2, 3, 0, 1, 0)
	TEKR B 0 A_GunFlash
	TEKR B 0 A_PlayWeaponSound("TechPlasma")
	TEKR B 0 A_RailAttack(65, 8, 1, "00 40 FF", "AA FF FF")
	TEKR B 2 A_TakeInventory("CellAmmo", 4)
	TEKR C 2
	TEKR D 2
	TEKR E 2
	TEKR F 2
	TEKR G 3
	TEKR A 13
	TEKR A 0 A_Refire
	goto Ready
  Altfire:
	TEKP A 0 A_JumpIfInventory("RailMode", 1, "PlasmaMode")
	TEKP A 0 A_JumpIfInventory("RailGunCore", 1, "RailMode")
	goto Ready
  RailMode:
	TEKR A 0 A_PlayWeaponSound("ChangeMode")
	TEKR A 10
	TEKR A 0 A_GiveInventory("RailMode", 1)
	goto Ready
  PlasmaMode:
  	TEKP A 0 A_JumpIfInventory("TechUpgraded", 1, "SuperPlasmaMode")
	TEKP A 0 A_PlayWeaponSound("ChangeMode")
	TEKP A 10
	TEKP A 0 A_TakeInventory("RailMode", 1)
	goto Ready
  SuperPlasmaMode:
	TEKS A 0 A_PlayWeaponSound("ChangeMode")
	TEKS A 10
	TEKS A 0 A_TakeInventory("RailMode", 1)
	goto Ready
  Flash:
	TNT1 A 1 bright A_Light1
	TNT1 A 1 bright A_Light2
	TNT1 A 0 bright A_Light0
	stop
  }
}

actor TailsFlightTrigger : CustomInventory
{
  inventory.icon "ARTIFLY"
  inventory.amount 1
  inventory.maxamount 1
  +INVENTORY.QUIET
  +INVENTORY.INVBAR
  +INVENTORY.HUBPOWER
  +INVENTORY.KEEPDEPLETED
  +INVENTORY.ALWAYSPICKUP
  -INVENTORY.AUTOACTIVATE
  -INVENTORY.INTERHUBSTRIP
  +INVENTORY.UNDROPPABLE
  +COUNTITEM
  states
  {
  Spawn:
	LCHN A -1
	stop
  Use:
  	TNT1 A 0
	TNT1 A 0 A_JumpifInventory("CannotUse", 1, "GoDie")
	TNT1 A 0 A_Jumpifinventory("RedFlag", 1, "GoDie")
	TNT1 A 0 A_Jumpifinventory("BlueFlag", 1, "GoDie")
	TNT1 A 0 A_Jumpifinventory("WhiteFlag", 1, "GoDie")
	TNT1 A 0 A_Jumpifinventory("RedSkullST", 1, "GoDie")
	TNT1 A 0 A_Jumpifinventory("BlueSkullST", 1, "GoDie")
	TNT1 A 0 A_JumpIfInventory("PowerPossessionArtifact", 1, "GoDie")
	TNT1 A 0 A_Jumpifinventory("PowerFlight", 1, "GoDie")
	TNT1 A 0
	goto GoFly
  GoFly:
	TNT1 A 0 A_GiveInventory("TailsFlight", 1)
	stop
  GoDie:
	TNT1 A 0
	stop
  }
}

actor TailsFlight : PowerupGiver
{
  inventory.amount 1
  inventory.maxamount 1
  powerup.duration 372
  powerup.type "Flight"
  +INVENTORY.QUIET
  +INVENTORY.ALWAYSPICKUP
  +INVENTORY.AUTOACTIVATE
  +INVENTORY.UNDROPPABLE
  +COUNTITEM
  states
  {
  Spawn:
	TNT1 A 1
	loop
  }
}

actor PlasmaMist
{
	Projectile
	Radius 1
	Height 1
	Damage 0
	Speed 10
	Scale 0.18
	RenderStyle Add
	Alpha 1.0
	+FORCEXYBILLBOARD
	+DONTSPLASH
	-BLOODSPLATTER
	+BLOODLESSIMPACT
	States
	{
	Spawn:
		TNT1 A 0
		PLSE ABCDE 1 BRIGHT
		stop
	Death:
		TNT1 A 0
		TNT1 A 1
		stop
	}
}

actor BluePlasmaMist : PlasmaMist
{
	States
	{
	Spawn:
		TNT1 A 0
		BLSE ABCDE 1 BRIGHT
		stop
	Death:
		TNT1 A 0
		TNT1 A 1
		stop
	}
}

actor NewPlasma : PlasmaBall Replaces PlasmaBall
{
	seesound ""
	decal PlasmaScorch
	Speed 38
	Alpha 1.0
	Obituary "%o stared at %k's pretty orange plasma for too long."
	+FORCEXYBILLBOARD
	RenderStyle Add
	scale 0.09
	States
	{
	Spawn:
		PLSS ABCD 1 BRIGHT
		loop
	XDeath:
		TNT1 A 0
		TNT1 A 0 A_GiveToTarget("HitConfirmation", 1)
		goto Death
	Death:
		PLSE AAAAAAA 0 A_SpawnItemEx("PlasmaMist", 0, 0, 0, random(-5,5), Random(-5,5), Random(-5,5), 0, 128, 0)
		PLSE ABCDE 2 Bright
		Stop
	}
}

actor BluePlasma : PlasmaBall
{
	decal BluePlasmaScorch
	Damage 6
	Speed 25
	obituary "%k gave %o a serious case of Plasma Burn"
	Alpha 1.0
	RenderStyle Add
	SeeSound "HaloPlasmaRifle"
	DeathSound "HaloPlasmaHit"
	scale 0.09
	States
	{
	Spawn:
		BLSS A 0
		BLSS A 0 ThrustThingZ(0, Random(0,3), Random(0,1), 1)
		BLSS AB 2 BRIGHT
		goto Spawn+2
	XDeath:
		TNT1 A 0
		TNT1 A 0 A_GiveToTarget("HitConfirmation", 1)
		goto Death
	Death:
		BLSE AAAAAAA 0 A_SpawnItemEx("BluePlasmaMist", 0, 0, 0, random(-5,5), Random(-5,5), Random(-5,5), 0, 128, 0)
		BLSE ABCDE 2 Bright
		Stop
	}
}

actor FireRodTrail
{
  Radius 1
  Height 1
  RenderStyle Add
  Alpha 0.8
  Scale .5
  -SOLID
  +NOGRAVITY
  +CLIENTSIDEONLY
  +ALLOWCLIENTSPAWN
  +NOINTERACTION
  +FORCEXYBILLBOARD
  States
  {
  Spawn:
  TNT1 A 2 BRIGHT
  FORA ABCD 1 BRIGHT
  FORA ABCD 1 BRIGHT A_Fadeout
  goto Spawn+5
  }
}


actor FireRodShot : FastProjectile
{
	Projectile
	Radius 8
	Height 8
	Damage 8
	DamageType "Fire"
	Speed 50
	obituary "%o was scorched by %k's Fire Rod"
	Alpha 1.0
	RenderStyle Add
	SeeSound "FireRod"
	DeathSound "vile/firecrkl"
	+FORCEXYBILLBOARD
	States
	{
	Spawn:
		RODF AABBCCDD 1 BRIGHT A_SpawnItemEx("FireRodTrail", random(-6,6), random(-6,6), random(-10,-6), random(-1,1), random(-1,1), random(-1,1), 0, 128, 0)
		loop
	XDeath:
		TNT1 A 0
		TNT1 A 0 A_GiveToTarget("HitConfirmation", 1)
		goto Death
	Death:
		TNT1 A 0 A_FadeOut(0.03)
		TNT1 A 0 A_Explode(4, 12)
		TNT1 A 1 A_SpawnItemEx("OrangeFloatingFlame", Random(-6,6), Random(-6,6), Random(-12, -8), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
		loop
	}
}

actor FreezeHit
{
	Scale 0.25
	Radius 1
	Height 1
	RenderStyle Add
	Alpha 0.7
	-SOLID
	+NOBLOCKMAP
	+DROPOFF
	+NOINTERACTION
	+FORCEXYBILLBOARD
	states
	{
		Spawn:
			FRZE ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 BRIGHT
			FRZ2 ABCDEFGHI 1 BRIGHT
			stop
	}
}

actor Freezeplasma
{
	Projectile
	Radius 11
	Height 8
	Speed 30
	RenderStyle Add
	Alpha 0.7
	bouncefactor 1.0
	bouncecount 2
	Damage 5
	DamageType Ice
	Scale 0.09
	+HEXENBOUNCE
	+FORCEXYBILLBOARD
	+CANBOUNCEWATER
	obituary "%o was turned into a meat popsicle by %k."
	states
	{
		Spawn:
			FRZP AABBCC 1 BRIGHT
			loop
		XDeath:
			TNT1 A 0
			TNT1 A 0 A_GiveToTarget("HitConfirmation", 1)
			goto Death
		Death:
			TNT1 A 0
			TNT1 A 1 A_SpawnItemEx("FreezeHit", 0, 0, 0, 0, 0, 0, 0, SXF_CLIENTSIDE, 0)
			stop
	}
}

actor PlasmaCannon : Weapon replaces PlasmaRifle
{
  spawnid 30
  radius 20
  height 16
  inventory.pickupmessage "You got the Plasma Cannon!"
  weapon.selectionorder 100
  weapon.kickback 100
  weapon.ammotype "CellAmmo"
  weapon.ammouse 1
  weapon.ammogive 40
  states
  {
  Ready:
	PLSG A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeReady")
	PLSG A 0 A_JumpIfInventory("TailsClassCheck", 1, "TailsReady")
	PLSG A 0 A_JumpIfInventory("LinkClassCheck", 1, "LinkReady")
	PLSG ABCABCB 1 A_WeaponReady
	goto Ready+3
  TailsReady:
	HLOP A 1 A_WeaponReady
	loop
  Deselect:
	PLSG A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeDeselect")
	PLSG A 0 A_JumpIfInventory("TailsClassCheck", 1, "TailsDeselect")
	PLSG A 0 A_JumpIfInventory("LinkClassCheck", 1, "LinkDeselect")
	PLSG A 1 A_Lower
	goto Deselect+3
  TailsDeselect:
	HLOP A 1 A_Lower
	loop
  Select:
	PLSG A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeSelect")
	PLSG A 0 A_JumpIfInventory("TailsClassCheck", 1, "TailsSelect")
	PLSG A 0 A_JumpIfInventory("LinkClassCheck", 1, "LinkSelect")
	PLSG A 1 A_Raise
	goto Select+3
  TailsSelect:
	HLOP A 1 A_Raise
	loop
  Hold:
  	PLSG A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeHold")
  	goto Fire
  Fire:
	PLSG A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeFire")
	PLSG A 0 A_JumpIfInventory("TailsClassCheck", 1, "TailsFire")
	PLSG A 0 A_JumpIfInventory("LinkClassCheck", 1, "LinkFire")
	PLSG A 0 radius_quake(1, 2, 0, 1, 0)
	PLSG A 0 A_PlayWeaponSound("weapons/plasmaf")
	PLSG A 0 A_FireCustomMissile("NewPlasma", 0, 1, 7, 1)
	PLSG F 1 BRIGHT A_Light2
	PLSG G 1 BRIGHT A_Light1
	PLSG H 2 BRIGHT
	PLSG H 0 BRIGHT A_Light0
	PLSG D 10 A_ReFire
	goto Ready
  AltFire:
	 HLOP A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeAltFire")
	 HLOP A 0 A_JumpIfInventory("TailsClassCheck", 1, "TailsAltFire")
	 HLOP A 0 A_JumpIfInventory("LinkClassCheck", 1, "LinkAltFire")
	 PLSG A 1
	 goto Ready
  TailsFire:
	HLOP B 2 BRIGHT A_FireCustomMissile("BluePlasma", Random(-2,2), 1, 8, 0)
	HLOP C 2
	HLOP D 1
	HLOP D 0 A_ReFire
	HLOP EFG 2
	goto TailsReady
  TailsAltFire:
	HLOP AA 1
	goto TailsReady
  DukeReady:
	 FRTH A 1 A_WeaponReady
	 loop
  DukeDeselect:
  	 FRTH A 0 A_StopSoundEx("Weapon")
	 FRTH A 1 A_Lower
	 goto DukeDeselect+1
  DukeSelect:
	 FRTH A 0 A_PlayWeaponSound("DukeWeaponSelect")
	 FRTH A 1 A_Raise
	 goto DukeSelect+1
  DukeFire:
  	 FRTH B 0 Bright A_PlaySoundEx("FreezeThrowerStart", "Auto", 0)
	 FRTH B 2 Bright A_PlaySoundEx("FreezeThrower", "Weapon", 1)
	 FRTH C 1 Bright
	 FRTH D 2 Bright A_FireCustomMissile("FreezePlasma", 0,1,8,0)
	 FRTH B 0 A_Refire
	 FRTH A 0 A_PlaySoundEx("FreezeThrowerEnd", "Auto", 0)
	 FRTH A 3 A_StopSoundEx("Weapon")
	 goto DukeReady
  DukeHold:
  	 FRTH B 2 Bright A_PlaySoundEx("FreezeThrower", "Weapon", 1)
	 FRTH C 1 Bright
	 FRTH D 2 Bright A_FireCustomMissile("FreezePlasma", 0,1,8,0)
	 FRTH B 0 A_Refire
	 FRTH A 0 A_PlaySoundEx("FreezeThrowerEnd", "Auto", 0)
	 FRTH A 3 A_StopSoundEx("Weapon")
	 goto DukeReady
  DukeAltFire:
	 FRTK A 6
	 FRTK B 4 A_CustomPunch(6, 0, 0, "KickPuff")
	 FRTK A 4
	 FRTK A 2
	 FRTH A 1 A_Refire
	 Goto DukeReady
  LinkReady:
	 FROD A 1 A_WeaponReady
	 loop
  LinkDeselect:
	 FROD A 1 A_Lower
	 loop
  LinkSelect:
	 FROD A 1 A_Raise
	 loop
  LinkFire:
	 FROD B 0 BRIGHT A_PlayWeaponSound("FireRod")
	 FROD B 2 BRIGHT A_FireCustomMissile("FireRodShot", Random(-1,1),1,0,0)
	 FROD CB 2 BRIGHT
	 FROD A 4
	 FROD A 0 A_Refire
	 goto LinkReady
  LinkAltFire:
	FROD AA 1
	goto LinkReady
  Spawn:
	PLAS A -1
	stop
  }
}

actor CoolingSmoke
{
 Radius 6
 Height 6
 Speed 7
 Scale 0.4
 RenderStyle Add
 Alpha 0.4
 Projectile
 +GHOST
 +HEXENBOUNCE
 +THRUGHOST
 +CORPSE
 +FORCEXYBILLBOARD
 +DONTSPLASH
 +CLIENTSIDEONLY
 States
 {
 Spawn:
 TNT1 A 0
 TNT1 A 1 ThrustThingZ(0, Random(0, 2), random(0,1), 1)
 PUF2 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1
 PUF3 ABC 1
 stop
 }
}

actor CoolingSmoke2
{
 Radius 6
 Height 6
 Speed 7
 Scale 0.25
 RenderStyle Add
 Alpha 0.4
 Projectile
 +GHOST
 +HEXENBOUNCE
 +THRUGHOST
 +CORPSE
 +FORCEXYBILLBOARD
 +DONTSPLASH
 +CLIENTSIDEONLY
 States
 {
 Spawn:
 TNT1 A 0
 TNT1 A 1 ThrustThingZ(0, Random(0, 2), random(0,1), 1)
 PUF2 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1
 PUF3 ABC 1
 stop
 }
}

actor RailSmoke
{
 Radius 6
 Height 6
 Speed 3
 Scale 0.3
 RenderStyle Add
 Alpha 0.5
 Projectile
 +GHOST
 +HEXENBOUNCE
 +THRUGHOST
 +CORPSE
 +FORCEXYBILLBOARD
 +DONTSPLASH
 +CLIENTSIDEONLY
 States
 {
 Spawn:
 PUF2 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1
 PUF3 ABC 1
 stop
 }
}

actor SniperSmoke
{
 Radius 6
 Height 6
 Speed 5
 Scale 0.32
 RenderStyle Translucent
 Alpha 0.5
 Projectile
 +GHOST
 +HEXENBOUNCE
 +THRUGHOST
 +CORPSE
 +FORCEXYBILLBOARD
 +DONTSPLASH
 +CLIENTSIDEONLY
 States
 {
 Spawn:
 PUF2 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1
 PUF3 ABC 1
 stop
 }
}

actor SniperSmokeSmall
{
 Radius 6
 Height 6
 Speed 4
 Scale 0.20
 RenderStyle Translucent
 Alpha 0.3
 Projectile
 +GHOST
 +HEXENBOUNCE
 +THRUGHOST
 +CORPSE
 +FORCEXYBILLBOARD
 +DONTSPLASH
 +CLIENTSIDEONLY
 States
 {
 Spawn:
 PUF2 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1
 PUF3 ABC 1
 stop
 }
}

actor SniperSmokeSmall2
{
 Radius 6
 Height 6
 Speed 3
 Scale 0.18
 RenderStyle Translucent
 Alpha 0.3
 Projectile
 +GHOST
 +HEXENBOUNCE
 +THRUGHOST
 +CORPSE
 +FORCEXYBILLBOARD
 +DONTSPLASH
 +CLIENTSIDEONLY
 States
 {
 Spawn:
 PUF2 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1
 PUF3 ABC 1
 stop
 }
}

actor ShotgunSmoke
{
 Radius 6
 Height 6
 Speed 6
 Scale 0.6
 RenderStyle Translucent
 Alpha 0.3
 Projectile
 +GHOST
 +HEXENBOUNCE
 +THRUGHOST
 +CORPSE
 +FORCEXYBILLBOARD
 +DONTSPLASH
 +CLIENTSIDEONLY
 States
 {
 Spawn:
 PUF2 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1
 PUF3 ABC 1
 stop
 }
}

ACTOR RailClip : Ammo
{
	Inventory.MaxAmount 40 // size of the clip
	Ammo.BackpackAmount 0
	Ammo.BackpackMaxAmount 40 //MUST be the same as Inventory.MaxAmmount
	Inventory.Icon TNT1A0
	+IGNORESKILL
}

actor RailGunCorePickup : CustomInventory 16789
{
  //SpawnID 252
  Scale 0.80
  inventory.amount 1
  inventory.maxamount 1
  inventory.pickupmessage "Railgun Core"
  -INVBAR
  +FLOATBOB
  +NOGRAVITY
  +INVENTORY.UNDROPPABLE
  states
  {
  Spawn:
	RCOR A -1
	loop
  Pickup:
  	RCOR A 0 A_JumpIfInventory("RailGunCore", 1, "FuckOff")
  	RCOR A 0 A_JumpIfInventory("RailGunCoreInstagib", 1, "FuckOff")
	RCOR A 1 A_JumpIfInventory("TailsClassCheck", 1, "Working")
	stop
  Working:
	RCOR A 1 A_GiveInventory("RailGunCore", 1)
	RCOR A 0 A_SpawnItemEx("RailgunCoreRespawner", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION, 0)
	stop
  FuckOff:
  	TNT1 A 1
  	stop
  }
}

actor RailgunCoreRespawner
{
	radius 1
	height 1
	+NOCLIP
	+NOINTERACTION
	+NOBLOCKMAP
	+NOGRAVITY
	States
	{
		Spawn:
			TNT1 A 76
			TNT1 A 0 A_PlaySoundEx("misc/spawn", "auto", 0)
			TNT1 A 0 A_SpawnItemEx("ItemFog", 0, 0, 0, 0, 0, 0, 0, 128, 0)
			TNT1 A 0 A_SpawnItemEx("RailgunCorePickup", 0, 0, 0, 0, 0, 0, 0, 0, 0)
			stop
	}
}

actor RailGunCore : PuzzleItem
{
  inventory.amount 1
  inventory.maxamount 1
  inventory.pickupmessage "Railgun Core"
  -INVBAR
  +INVENTORY.UNDROPPABLE
  states
  {
  Spawn:
	RCOR A -1
	loop
  }
}

actor RailGunCoreInstagib : PuzzleItem
{
  inventory.amount 1
  inventory.maxamount 1
  inventory.pickupmessage "Railgun Core"
  -INVBAR
  +INVENTORY.UNDROPPABLE
  states
  {
  Spawn:
	RCOR A -1
	loop
  }
}

ACTOR Railgun : ClericWeapon 5012
{
	Decal RailScorch
	SpawnID 164
	Radius 20
	Height 16
	Weapon.Selectionorder 100
	Weapon.AmmoUse 10
	Weapon.AmmoGive2 40
	Weapon.AmmoType "RailClip"
	Weapon.AmmoType2 "CellAmmo"
	Attacksound "NewRailgunFire"
	Inventory.PickupMessage "You got the Railgun!"
	Obituary "%o was surgically removed by %k's rail."
	States
	{
	Ready:
		RLGG A 0 A_WeaponReady
		goto ReloadCheck
		RLGG A 1 A_WeaponReady
		goto Ready+1
	Deselect:
		RLGG A 1 A_Lower
		loop
		Select:
		RLGG A 1 A_Raise
		loop
	Fire:
		RLGG A 0 A_FireCustomMissile("RailSmoke", random(-1, 1), 0, 0, 7)
		RLGG A 0 A_PlaySoundEx("NewRailgunStereo", Auto, 0)
		RLGG B 2 BRIGHT A_RailAttack(100, 6, 1, "00 00 FF", "FF FF FF")
		RLGG CDEF 2
		RLGG GH 1
		RLGG A 0 A_JumpIfNoAmmo("ReloadCheck")
		RLGG A 6
		RLGG M 0 A_ReFire
		goto Ready+1

	Altfire:
		RLGG A 0
		goto ReloadCheck

	ReloadCheck:
		RLGR A 0 A_JumpIfInventory("RailClip",40,2)
		RLGR A 0 A_JumpIfInventory("CellAmmo",1,"ReloadStart")
		RLGR A 0
		goto Ready+1

	ReloadStart:
		RLGR A 0 A_PlayWeaponSound("RailGunOut")
		RLGR ABC 3
		RLGR DEFGHIJ 3
		goto ReloadAmmo

	ReloadAmmo:
		TNT1 A 0 A_TakeInventory("CellAmmo",1)
		TNT1 A 0 A_GiveInventory("RailClip",1)
		TNT1 A 0 A_JumpIfInventory("RailClip",40,"ReloadDone")
		TNT1 A 0 A_JumpIfInventory("CellAmmo",1,"ReloadAmmo")
		goto ReloadDone

	ReloadDone:
		RLGR K 3 A_PlayWeaponSound("RailGunIn")
		RLGR LMNO 3
		RLGG A 6
		goto Ready+1

	Flash:
		TNT1 A 5 bright A_Light1
		TNT1 A 5 bright A_Light2
		TNT1 A 0 bright A_Light0
		Goto LightDone
	Spawn:
		RAIL A 0
		RAIL A 0 Thing_ChangeTID(0, 1337)
		RAIL A -1
		loop
	}
}

actor SMArachnotron : Arachnotron Replaces Arachnotron
{
Dropitem "Beamer", 128
DropItem "Stinger", 64
DropItem "CricketAmmo", 28
DropItem "LightningGun", 20
DropItem "FreezeBolt", 54
DropItem "LaserRifle1", 64
DropItem "WeatherMaker", 38
DropItem "CellAmmo", 10
}

actor DinFireball
{
	Projectile
	Radius 3
	Height 4
	Scale 0.2
	Damage (random(1,3)*4)
	Speed 75
	RenderStyle Add
	Alpha 0.9
	obituary "%k burned %o with Din's Fire"
	DamageType "Fire"
	SeeSound "DinFly"
	Deathsound "DinExplode"
	+FORCEXYBILLBOARD
	States
	{
		Spawn:
			DINF A 0
			DINF A 0 ThrustThingZ(0, Random(0, 19), Random(0,1), 1)
			DINF ABCDEFGHIJ 1 BRIGHT A_SpawnItemEx("DinFireballTrail", 0, 0, 0, Random(-1,1), Random(-1,1), Random(-1,1), 0, SXF_CLIENTSIDE, 0)
			goto Spawn+2
		XDeath:
			TNT1 A 0
			TNT1 A 0 A_GiveToTarget("HitConfirmation", 1)
			goto Death
		Death:
			DINX ABCDEFGHI 1 BRIGHT A_SpawnItemEx("DinFireballExplosion", Random(-8,8), Random(-8,8), Random(-8,8), 0, 0, 0, 0, SXF_CLIENTSIDE, 0)
			stop
	}
}

actor DinFireballTrail
{
	Projectile
	Radius 2
	Height 4
	Scale 0.2
	Speed 0
	Damage 0
	RenderStyle Add
	Alpha 0.9
	Gravity 0.8
	+DONTSPLASH
	+FORCEXYBILLBOARD
	+NOINTERACTION
	States
	{
		Spawn:
		TNT1 A 1
		DINF ABCDEFGHIJ 1 BRIGHT A_FadeOut(0.08)
		loop
	}
}

actor DinFireballExplosion
{
	Radius 2
	Height 4
	Scale 0.3
	RenderStyle Add
	Alpha 0.9
	+NOGRAVITY
	+DONTSPLASH
	+NOCLIP
	+FORCEXYBILLBOARD
	+NOINTERACTION
	States
	{
		Spawn:
		DINX ABCDEFGHI 1 BRIGHT A_FadeOut(0.04)
		loop
	}
}

actor SlamshotBulletPuff : NewBulletPuff
{
	obituary "%o was violated by %k's Slamshot."
}

actor SSGCasing : ShellCasing
{
	States
	{
	Spawn:
	  TNT1 A 0
	  TNT1 A 0 A_StopSound
	  TNT1 A 0 ThrustThingZ(0, Random(26, 36), 0, 1)
	  12CA C 3
	  12CA C 0 A_CountDown
	  12CA CDEFGHAB 1
	  Goto Spawn+4
	}
}

actor SM_SuperShotgun : Weapon Replaces SuperShotgun
{
  Decal BulletChip
  spawnid 33
  obituary "%k turned %o's torso into a gold-speckled pile of mush."
  radius 20
  height 16
  inventory.pickupmessage "\cdGolden SSG \cc/ \ciSilver Bullet Gun \cc/ \cfDin's Fire \cc/ \crSlamshot"
  weapon.selectionorder 400
  weapon.kickback 100
  Weapon.AmmoType "SpreadAmmo"
  weapon.ammouse 2
  weapon.ammogive 8
  states
  {
  Ready:
	SHT2 A 0 A_JumpIfInventory("TailsClassCheck", 1, "SBGReady")
	SHT2 A 0 A_JumpIfInventory("LinkClassCheck", 1, "DinReady")
	SHT2 A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeReady")
	SHT2 A 1 A_WeaponReady
	goto Ready+3
  Deselect:
	SHT2 A 0 A_JumpIfInventory("TailsClassCheck", 1, "SBGDeselect")
	SHT2 A 0 A_JumpIfInventory("LinkClassCheck", 1, "DinDeselect")
	SHT2 A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeDeselect")
	SHT2 A 1 A_Lower
	goto Deselect+3
  Select:
	SHT2 A 0 A_JumpIfInventory("TailsClassCheck", 1, "SBGSelect")
	SHT2 A 0 A_JumpIfInventory("LinkClassCheck", 1, "DinSelect")
	SHT2 A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeSelect")
	SHT2 A 1 A_Raise
	goto Select+3
  Fire:
	SHT2 A 0 A_JumpIfInventory("TailsClassCheck", 1, "SBGFire")
	SHT2 A 0 A_JumpIfInventory("LinkClassCheck", 1, "DinFire")
	SHT2 A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeFire")
	SHT2 A 2
	SHT2 A 0 radius_quake(4, 3, 0, 1, 0)
	SHT2 A 0 A_PlayWeaponSound("weapons/sshotf")
	// ----------- SHT2 AAAA 0 A_FireCustomMissile("GoldSpray",Random(-20,20),0,0,0)
	SHT2 A 0 A_FireBullets (11.2, 7.1, 20, 5, "NewBulletPuff")
	SHT2 A 2 A_GunFlash
	SHT2 BCDEF 1
	SHT2 AA 1
	SHT2 GH 2
	SHT2 I 3 A_CheckReload
	SHT2 J 2
	SHT2 K 3 A_PlaySoundEx("weapons/sshoto", "auto", 0)
	SHT2 LL 0 A_FireCustomMissile("SSGCasing", Random(-14,8),0,2,0)
	SHT2 L 2
	SHT2 M 3
	SHT2 N 2
	SHT2 O 2 A_PlaySoundEx("weapons/sshotl", "auto", 0)
	SHT2 P 2
	SHT2 Q 3
	SHT2 R 3
	SHT2 S 0 A_PlaySoundEx("weapons/sshotc", "auto", 0)
	SHT2 S 7
	SHT2 A 7 A_ReFire
	goto Ready
  Flash:
	SHT2 A 0 A_JumpIfInventory("TailsClassCheck", 1, "SBGFlash")
	SHT2 T 2 bright A_Light1
	SHT2 U 1 bright A_Light2
	SHT2 U 0 bright A_Light0
	stop

// Silver Bullet Gun
  SBGReady:
	SBGN A 1 A_WeaponReady
	loop
  SBGSelect:
	SBGN A 1 A_Raise
	loop
  SBGDeselect:
	SBGN A 1 A_Lower
	loop
  SBGFire:
	SBGN A 0 A_GunFlash
	SBGN A 0 A_PlayWeaponSound("SilverBulletFire")
	SBGN A 4 A_FireBullets (3, 3, 2, 20, "SilverBulletPuff")
	SBGN A 20
	SBGN B 0 A_PlayWeaponSound("SilverBulletLoad")
	SBGN BB 4 A_FireCustomMissile("SilverBulletCasing",45+random(-8,8),0,0,5)
	SBGN A 9
	SBGN A 0 A_Refire
	goto SBGReady
  SBGFlash:
	SBGF A 3 BRIGHT A_Light2
	SBGF B 2 BRIGHT A_Light1
	SBGF A 0 BRIGHT A_Light0
	stop

// Din's Fire
  DinReady:
	DINW A 1 A_WeaponReady
	loop
  DinSelect:
	DINW A 1 A_Raise
	loop
  DinDeselect:
	DINW A 1 A_Lower
	loop
  DinFire:
	DINW B 2 BRIGHT A_PlayWeaponSound("DinFire")
	DINW C 2 BRIGHT
	DINW D 2 BRIGHT
	DINW E 2 BRIGHT
	DINW FFFFFFFFFFFFF 0 BRIGHT A_FireCustomMissile("DinFireball",Random(-10,10),0,-7,0)
	DINW F 2 BRIGHT A_FireCustomMissile("DinFireball",Random(-10,10),1,-7,0)
	DINW A 30
	DINW A 0 A_Refire
	goto DinReady

// SlamShot
  DukeReady:
	D6SG A 1 A_WeaponReady
	loop
  DukeSelect:
	D6SG A 0 A_PlayWeaponSound("SlamShotCock2")
	D6SG A 1 A_Raise
	goto DukeSelect+1
  DukeDeselect:
	D6SG A 1 A_Lower
	loop
  DukeFire:
	D6SG A 0 A_PlayWeaponSound("SlamshotFire")
	D6SG A 0 A_Light2
	D6SG A 0 radius_quake(3, 3, 0, 1, 0)
	D6SG B 1 BRIGHT A_FireBullets(10, 6, 16, 5, "SlamshotBulletPuff")
	D6SG B 0 A_Light0
	D6SG CDE 2
	D6SG A 2
	D6SG FGH 4
	D6SG I 0 A_PlaySoundEx("SlamshotCock1", "Auto")
	D6SG I 1 A_FireCustomMissile("ShellCasingSpawnerLeft",45+random(-8,8),0,1,6)
	D6SG I 1 A_FireCustomMissile("ShellCasingSpawnerLeft",45+random(-8,8),0,1,6)
	D6SG I 4
	D6SG H 4 A_PlaySoundEx("SlamshotCock2", "Auto")
	D6SG GF 4
	D6SG A 6
	D6SG A 0 A_Refire
	goto DukeReady
  Spawn:
	SGN2 A -1
	stop
  }
}

/*
actor FlashLight : Weapon
{
	Decal Flashlight
	Radius 20
	Height 16
	weapon.selectionorder 9999
	weapon.kickback 0
	weapon.ammotype "None"
	weapon.ammouse 0
	weapon.ammogive 0
	+WEAPON.WIMPY_WEAPON
	+WEAPON.NOALERT
	States
	{
	Select:
	FLAS A 1 A_Raise
	loop
	Deselect:
	FLAS A 0 A_Light0
	FLAS A 1 A_Lower
	loop
	Ready:
	FLAS A 0 A_FireBullets (0, 0, 0, 0, "FlashLightPoint")
	FLAS A 0 A_Light1
	FLAS A 1 A_WeaponReady
	loop
	Fire:
	FLAS A 1 A_Light0
	FLAS A 1 A_Refire
	goto Ready
	}
}
*/

actor FlashLightPoint
{
 Radius 8
 Height 8
 +PUFFONACTORS
 +NOBLOOD
 +BLOODLESSIMPACT
 -BLOODSPLATTER
 States
 {
 Spawn:
 NULL A 2 BRIGHT
 NULL A 2 BRIGHT
 stop
 }
}

actor SM_ExplosiveBarrel : ExplosiveBarrel Replaces ExplosiveBarrel
{
  spawnid 125
  obituary "%o went boom."
  health 20
  radius 10
  height 34
  deathsound "world/barrelx"
  +SOLID
  +SHOOTABLE
  +NOBLOOD
  +DONTGIB
  +NOICEDEATH
  //+PUSHABLE
  states
  {
  Spawn:
	BAR1 AB 6
	loop
  Death:
	BEXP A 5
	XPLO A 0 A_SetTranslucent (0.5, 1)
	XPLO A 0 A_SpawnItemEX("Duke64ExplosionRing", 0, 0, 1, 0, 0, 0, 0, 128, 0)
	XPLO AAAAAAAA 0 A_SpawnItemEX("GrenadeSpark", Random(-16,16), Random(-16,16), Random(0, 24), Random(-5,5), Random(-5,5), Random(6, 12), 0, SXF_CLIENTSIDE, 0)
	XPLO A 2 BRIGHT A_Scream
	XPLO B 0 BRIGHT radius_quake(3, 12, 0, 4, 0)
	XPLO B 2 bright A_Explode(256, 128)
	XPLO CDEFGHIJKLM 2 BRIGHT
	TNT1 A 10
	TNT1 A 1050 A_BarrelDestroy
	TNT1 A 0 A_SetTranslucent(1.0, 0)
	TNT1 A 0 A_ClearShadow
	TNT1 A 5 A_Respawn
	wait
  }
}

ACTOR RipperShotCount : Inventory
{
   Inventory.Amount 1
   Inventory.MaxAmount 3
   -INVBAR
}

ACTOR ChaingunShotCount : Inventory
{
   Inventory.Amount 1
   Inventory.MaxAmount 3
   -INVBAR
}

actor SM_Chaingun : Weapon Replaces Chaingun
{
  spawnid 28
  obituary "%o was turned into swiss-cheese by %k's gatling gun."
  radius 20
  height 16
  inventory.pickupmessage "\cdGatling Gun \cc/ \ciDual Micro-Repeaters"
  weapon.selectionorder 700
  weapon.kickback 100
  weapon.ammotype "MechAmmo"
  weapon.ammouse 1
  weapon.ammogive 20
  states
  {
  Ready:
	CHGG A 0 A_JumpIfInventory("TailsClassCheck", 1, "TailsReady")
	CHGG A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeReady")
	CHGG A 1 A_WeaponReady
	loop
  Deselect:
	CHGG A 0 A_JumpIfInventory("TailsClassCheck", 1, "TailsDeselect")
	CHGG A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeDeselect")
	CHGG A 1 A_Lower
	loop
  Select:
	CHGG A 0 A_JumpIfInventory("TailsClassCheck", 1, "TailsSelect")
	CHGG A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeSelect")
	CHGG A 1 A_Raise
	loop
  Fire:
	CHGG B 0 A_JumpIfInventory("TailsClassCheck", 1, "TailsFire")
	CHGG B 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeFire")
	CHGG B 0 A_JumpIfInventory("ChaingunShotCount", 3, "Fire4")
	CHGG B 0 A_JumpIfInventory("ChaingunShotCount", 2, "Fire3")
	CHGG B 0 A_JumpIfInventory("ChaingunShotCount", 1, "Fire2")
	CHGG B 2 BRIGHT A_GunFlash
	CHGG C 2
	CHGG D 2 BRIGHT A_GunFlash
	CHGG E 2 A_GiveInventory("ChaingunShotCount", 1)
	CHGG F 0 A_Refire
	CHGG F 0 A_TakeInventory("ChaingunShotCount", 3)
	goto Ready
  Fire2:
	CHGG F 2 BRIGHT A_GunFlash
	CHGG G 2
	CHGG H 2 BRIGHT A_GunFlash
	CHGG I 2 A_GiveInventory("ChaingunShotCount", 1)
	CHGG J 0 A_Refire
	CHGG J 0 A_TakeInventory("ChaingunShotCount", 3)
	goto Ready
  Fire3:
	CHGG J 2 BRIGHT A_GunFlash
	CHGG K 2
	CHGG L 2 BRIGHT A_GunFlash
	CHGG M 2 A_GiveInventory("ChaingunShotCount", 1)
	CHGG N 0 A_Refire
	CHGG N 0 A_TakeInventory("ChaingunShotCount", 3)
	goto Ready
  Fire4:
	CHGG N 2 BRIGHT A_GunFlash
	CHGG O 2
	CHGG P 2 BRIGHT A_GunFlash
	CHGG A 2 A_TakeInventory("ChaingunShotCount", 3)
	CHGG B 0 A_ReFire
	goto Ready
  Flash:
  	TNT1 A 0 A_JumpIfInventory("TailsClassCheck", 1, "NoFlash")
	TNT1 A 0 A_JumpIfInventory("DukeClassCheck", 1, "NoFlash")
	TNT1 A 0 A_PlayWeaponSound("weapons/chngun")
	TNT1 A 0 A_FireBullets (5, 1.5, 1, 6, "SuperChaingunHit")
	TNT1 A 0 A_FireCustomMissile("BulletCasingSpawnerRight",-45+random(-8,8),0,12,3)
	TNT1 A 0 radius_quake(1, 2, 0, 1, 0)
	TNT1 A 0 A_CheckForReload(2, "Flash1")
	goto Flash2
  Flash1:
	CHGF A 2 BRIGHT A_Light2
	TNT1 A 1 BRIGHT A_Light0
  	stop
  Flash2:
  	CHGF B 2 BRIGHT A_Light2
  	TNT1 A 0 BRIGHT A_ResetReloadCounter
	TNT1 A 1 BRIGHT A_Light0
	stop
  NoFlash:
  	TNT1 A 1
  	stop

  TailsReady:
	DAUT A 1 A_WeaponReady
	loop
  TailsDeselect:
	DAUT A 1 A_Lower
	loop
  TailsSelect:
	DAUT A 1 A_Raise
	loop
  TailsFire:
	DAUT A 2
	DAUT B 0 A_PlayWeaponSound("TailsRepeater")
	DAUT B 0 A_Light1
	DAUT B 0 A_FireCustomMissile("RepeaterCasingSpawnerRight",-45+random(-8,8),0,6,7)
	DAUT B 1 BRIGHT A_FireBullets (4.5, 1.5, 1, 5, "RepeaterPuff")
	DAUT A 1 A_Light0
	DAUT A 2
	DAUT C 0 A_PlayWeaponSound("TailsRepeater")
	DAUT C 0 A_Light1
	DAUT C 0 A_FireCustomMissile("RepeaterCasingSpawnerLeft",45+random(-8,8),0,-6,7)
	DAUT C 1 BRIGHT A_FireBullets (4.5, 1.5, 1, 5, "RepeaterPuff")
	DAUT A 0 A_Light0
	DAUT A 0 A_ReFire
	goto Ready

  DukeReady:
	RIPG A 1 A_WeaponReady
	loop
  DukeSelect:
	RIPG A 0 A_PlayWeaponSound("DukeWeaponSelect")
	RIPG A 1 A_Raise
	goto DukeSelect+1
  DukeDeselect:
	RIPG A 1 A_Lower
	loop
  DukeFire:
	RIPG B 0 BRIGHT A_JumpIfInventory("RipperShotCount", 3, "DukeFire4")
	RIPG B 0 BRIGHT A_JumpIfInventory("RipperShotCount", 2, "DukeFire3")
	RIPG B 0 BRIGHT A_JumpIfInventory("RipperShotCount", 1, "DukeFire2")
	RIPG B 0 BRIGHT A_FireCustomMissile("BulletCasingSpawnerRight",-45+random(-8,8),0,5,4)
	RIPG B 0 BRIGHT A_PlayWeaponSound("DukeRipper")
	RIPG B 0 radius_quake(1, 2, 0, 1, 0)
	RIPG B 2 BRIGHT A_FireBullets(5, 2, 1, 6, "NewBulletPuff")
	RIPG A 0 BRIGHT A_GiveInventory("RipperShotCount", 1)
	RIPG A 0 A_Refire
	RIPG A 0 A_TakeInventory("RipperShotCount", 3)
	goto DukeReady
  DukeFire2:
	RIPG C 2 BRIGHT
	RIPG D 0 BRIGHT A_FireCustomMissile("BulletCasingSpawnerRight",-45+random(-8,8),0,5,4)
	RIPG D 0 BRIGHT A_PlayWeaponSound("DukeRipper")
	RIPG D 0 radius_quake(1, 2, 0, 1, 0)
	RIPG D 2 BRIGHT A_FireBullets(5, 2, -1, 5, "NewBulletPuff")
	RIPG E 1 BRIGHT A_GiveInventory("RipperShotCount", 1)
	RIPG A 0 A_Refire
	RIPG A 0 A_TakeInventory("RipperShotCount", 3)
	goto DukeReady
  DukeFire3:
	RIPG F 0 BRIGHT A_FireCustomMissile("BulletCasingSpawnerRight",-45+random(-8,8),0,5,4)
	RIPG F 0 BRIGHT A_PlayWeaponSound("DukeRipper")
	RIPG F 0 radius_quake(1, 2, 0, 1, 0)
	RIPG F 2 BRIGHT A_FireBullets(5, 2, -1, 5, "NewBulletPuff")
	RIPG G 2 BRIGHT A_GiveInventory("RipperShotCount", 1)
	RIPG A 0 A_Refire
	RIPG A 0 A_TakeInventory("RipperShotCount", 3)
	goto DukeReady
  DukeFire4:
	RIPG H 0 BRIGHT A_FireCustomMissile("BulletCasingSpawnerRight",-45+random(-8,8),0,5,4)
	RIPG H 0 BRIGHT A_PlayWeaponSound("DukeRipper")
	RIPG H 0 radius_quake(1, 2, 0, 1, 0)
	RIPG H 2 BRIGHT A_FireBullets(5, 2, -1, 5, "NewBulletPuff")
	RIPG I 1 BRIGHT A_TakeInventory("RipperShotCount", 3)
	RIPG A 0 A_Refire
	goto DukeReady

  Spawn:
	MGUN A -1
	stop
  }
}

actor Trite 17121
{
  Monster
  Radius 12
  Height 16
  Health 10
  SpawnID 251
  Scale 0.4
  Damage 2
  PoisonDamage 3
  Speed 25
  Painchance 255
  hitobituary "%o got his PENISH bitten off by a trite!"
  obituary "%o got his PENISH bitten off by a trite!"
  Gravity 0.7
  DamageType "Trite"
  DamageFactor "Trite", 0
  Bloodcolor "00 FF 00"
  Seesound "tritesee"
  Deathsound "tritedeath"
  PainSound "tritepain"
  MinMissileChance 225
  MaxTargetRange 256
  +DROPOFF
  +LOOKALLAROUND
  States
  {
  Spawn:
  TRIT A 10 A_Look
  loop
  See:
  TRIT ABCD 3 A_Chase
  TRIT A 0 A_PlaySound("TriteStep")
  loop
  Missile:
  TRIT E 8 A_FaceTarget
  TRIT E 0 A_PlaySound("triteattack")
  TRIT E 0 A_Recoil(-18)
  TRIT E 0 ThrustThingZ(0, 26, 0, 0)
  TRIT FFFFFF 3 A_CustomBulletAttack (4, 1, 1, 1, "TriteHit", 32)
  TRIT E 4
  goto See
  Pain:
  TRIT E 2
  TRIT F 2 A_Pain
  goto See
  Death:
  TRIT G 0 A_Scream
  TRIT G 0 A_Fall
  TRIT GHIJ 4
  TRIT J 180
  TRIT JJJJJJJJJJJJ 2 A_FadeOut
  stop

  Disabled:
   TNT1 A 0
   TNT1 A 0 A_JumpIfHealthLower(1, "Death")
   TNT1 A 1 A_ChangeFlag("SOLID", 0)
   TNT1 A 1 A_ChangeFlag("SHOOTABLE", 0)
   TNT1 A 1
   TNT1 A -1
   loop

  Enabled:
   TNT1 A 0
   TNT1 A 0 A_JumpIfHealthLower(1, "Death")
   TNT1 A 1 A_ChangeFlag("SOLID", 1)
   TNT1 A 1 A_ChangeFlag("SHOOTABLE", 1)
   TNT1 A 1
   goto Spawn
  }
}

actor TriteHit : BulletPuff
{
 DamageType "Trite"
 PoisonDamage 2
 +BLOODLESSIMPACT
 +NOBLOOD
 +PUFFONACTORS
 -BLOODSPLATTER
 States
 {
 Spawn:
  TNT1 A 0
  TNT1 A 1 A_PlaySound("TriteBite")
  stop
 }
}

actor TurretExplosion : RocketFire
{
	Scale 1.0
	States
	{
		Spawn:
			EXPL ABCDEFGHIJKLMNOPQRST 1 BRIGHT
			stop
	}
}

actor HangingTurret 16093
{
 Monster
 Decal Bulletchip
 height 33
 radius 12
 Scale 0.8
 health 300
 Mass 9999999
 AttackSound "TurretFire"
 DeathSound "BigExplosion"
 +NOBLOOD
 +SPAWNCEILING
 +NOGRAVITY
 +NOICEDEATH
 States
 {
 Spawn:
 TURR A 12 A_LookEx (LOF_NOSOUNDCHECK, 0, 0, 0, 360, "See")
 loop
 See:
 TURR A 4 A_Chase
 loop
 Missile:
 TURR A 0 A_PlaySound("TurretReady")
 TURR AAAAAAA 7 A_FaceTarget
 TURR A 0
 TURR A 0 A_SpawnItemEx ("BulletCasing", 12, 0, 6, Random(5, 8), Random(0, 1), 0, -56+Random(-8, 8), SXF_CLIENTSIDE, 0)
 TURR B 2 A_CustomBulletAttack(16, 7, 1, 5, "NewBulletPuff")
 TURR A 0 A_SpawnItemEx ("BulletCasing", 12, 0, 6, Random(5, 8), Random(0, 1), 0, -56+Random(-8, 8), SXF_CLIENTSIDE, 0)
 TURR C 2 A_CustomBulletAttack(16, 7, 1, 5, "NewBulletPuff")
 TURR C 0 A_FaceTarget
 TURR C 0 A_CposRefire
 goto Missile+8
 Death:
 TNT1 A 0
 TNT1 A 0 A_Scream
 TNT1 A 0 A_Fall
 TNT1 A 0 A_Explode
 TNT1 A 0 A_NoGravity
 EXPL ABCDEFGHIJKLMNOPQRST 2 BRIGHT A_SpawnItemEx("TurretExplosion", 0, 0, 0, random(-3,3), random(-3,3), random(-3,3), 0, 128, 0)
 stop
 }
}

actor RevenantHellFire
{
  radius 6
  height 6
  speed 15
  health 1
  damage 6
  Scale 0.45
  obituary "%o couldn't evade a Revenant's Missile"
  Seesound "skeleton/attack"
  deathsound "TechPlasmaSuperBoom"
  PROJECTILE
  -NOBLOCKMAP
  +GHOST
  +NOBLOOD
  +THRUGHOST
  +SHOOTABLE
  +SEEKERMISSILE
  +RANDOMIZE
  +FORCEXYBILLBOARD
  states
  {
 Spawn:
	DEVM A 0
	DEVM A 0 ThrustThingZ(0, random(0,4), random(0,1), 1)
	DEVM A 8 Bright A_PlaySoundEx("HellFly", SoundSlot7, 1)
	DEVM A 0 Bright A_PlaySoundEx("HellFly", SoundSlot7, 1)
	DEVM A 2 bright A_Tracer2
	DEVM A 2 bright
	DEVM A 2 bright A_Tracer2
	DEVM A 2 bright
	DEVM A 2 bright A_Tracer2
	DEVM A 2 bright
	DEVM A 2 bright A_Tracer2
	DEVM A 2 bright
	DEVM A 2 bright A_Tracer2
	DEVM A 2 bright
	DEVM A 2 bright A_Tracer2
	DEVM A 2 bright
	DEVM A 2 bright A_Tracer2
	DEVM A 2 bright
	DEVM A 2 bright A_Tracer2
	DEVM A 2 bright
	DEVM A 2 bright A_Tracer2
	DEVM A 2 bright
	DEVM A 2 bright A_Tracer2
	DEVM A 2 bright
	DEVM A 2 bright A_Tracer2
	DEVM A 2 bright
	DEVM A 2 bright A_Tracer2
	goto Spawn+3
  Death:
	MISL B 0 A_StopSoundEx("SoundSlot7")
	MISL B 0 A_NoGravity
	MISL B 2 bright
	MISL C 2 bright
	MISL D 2 bright
	stop
  }
}

actor RevenantHellfire2 : RevenantHellfire
{
	Speed 14
	obituary "%o couldn't evade a Revenant's Missile"
}

actor RevenantHellfireFast : RevenantHellfire
{
	obituary "%o couldn't dodge a Revenant's fast shot"
	Radius 8
	Height 8
	Damage 6
	Speed 18
	-SEEKERMISSILE
	States
	{
	Spawn:
	DEVM A 0
	DEVM A 10 Bright A_PlaySoundEx("HellFly", SoundSlot7, 1)
	DEVM A 0 Bright A_PlaySoundEx("HellFly", SoundSlot7, 1)
	DEVM AAAAAAAAAAAAAAAAAAAAAAA 2 bright
	goto Spawn+2
	}
}

actor SM_Revenant : Revenant Replaces Revenant
{
  DamageFactor "Fire", 1.2
  DropItem "HellFireCannon", 76
  DropItem "HellfireAmmo", 196
  DropItem "Lightsaber", 44
  DropItem "FlakCannon", 46
  DropItem "FartBombs", 16
  DropItem "GrapplerShot", 5
  DropItem "IpodLauncher", 1
  DropItem "WeatherMaker", 2
  DropItem "DemonicPower", 196
  States
  {
	Missile:
		SKEL J 0 BRIGHT A_Jump(64, "Missile2")
		SKEL J 1 BRIGHT A_FaceTarget
		SKEL J 9 BRIGHT A_FaceTarget
		SKEL K 0 A_CustomMissile("RevenantHellfire", 64, -10, Random(10, 26), 0, 0)
		SKEL K 10 A_CustomMissile("RevenantHellfire2", 64, 10, Random(-26, -10), 0, 0)
		SKEL K 10 A_FaceTarget
		Goto See
	Missile2:
		SKEL J 1 BRIGHT A_FaceTarget
		SKEL J 4 BRIGHT A_FaceTarget
		SKEL K 0 A_CustomMissile("RevenantHellfireFast", 64, -10, 1, 0, 0)
		SKEL K 5 A_CustomMissile("RevenantHellfireFast", 64, 10, -1, 0, 0)
		SKEL K 5 A_FaceTarget
		Goto See
  }
}

actor RedFloatingFlameGenerator 15116
{
  Radius 6
  Height 16
  -SOLID
  +NOGRAVITY
  +ALLOWCLIENTSPAWN
  +CLIENTSIDEONLY
  //+FLOATBOB
  States
  {
  Spawn:
  TNT1 A 0
  TNT1 A 0 A_PlaySoundEx("SmallBurningFire", "SoundSlot7", 1, -1)
  TNT1 A 1 A_SpawnItemEx ("RedFloatingFlame", Random(-6,6), Random(-6,6), Random(1, 3), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
  goto Spawn+2
  }
}

actor RedFloatingFlame
{
  Radius 4
  Height 4
  RenderStyle Add
  Alpha 0.8
  -SOLID
  +NOGRAVITY
  +CLIENTSIDEONLY
  +ALLOWCLIENTSPAWN
  States
  {
  Spawn:
  FRED ABCD 1 BRIGHT
  FRED ABCD 1 BRIGHT
  FRED ABCD 1 A_Fadeout
  goto Spawn+8
  }
}

actor BlueFloatingFlameGenerator : RedFloatingFlameGenerator 15117
{
  States
  {
  Spawn:
  TNT1 A 0
  TNT1 A 0 A_PlaySoundEx("SmallBurningFire", "SoundSlot7", 1, -1)
  TNT1 A 1 A_SpawnItemEx ("BlueFloatingFlame", Random(-6,6), Random(-6,6), Random(1, 3), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
  goto Spawn+2
  }
}

actor BlueFloatingFlame : RedFloatingFlame
{
  States
  {
  Spawn:
  FBLU ABCD 1 BRIGHT
  FBLU ABCD 1 BRIGHT
  FBLU ABCD 1 A_Fadeout
  goto Spawn+8
  }
}

actor GreenFloatingFlameGenerator : RedFloatingFlameGenerator 15118
{
  States
  {
  Spawn:
  TNT1 A 0
  TNT1 A 0 A_PlaySoundEx("SmallBurningFire", "SoundSlot7", 1, -1)
  TNT1 A 1 A_SpawnItemEx ("GreenFloatingFlame", Random(-6,6), Random(-6,6), Random(1, 3), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
  goto Spawn+2
  }
}

actor GreenFloatingFlame : RedFloatingFlame
{
  States
  {
  Spawn:
  FGRE ABCD 1 BRIGHT
  FGRE ABCD 1 BRIGHT
  FGRE ABCD 1 A_Fadeout
  goto Spawn+8
  }
}

actor OrangeFloatingFlame : RedFloatingFlame
{
  States
  {
  Spawn:
  FORA ABCD 1 BRIGHT
  FORA ABCD 1 BRIGHT
  FORA ABCD 1 A_Fadeout
  goto Spawn+8
  }
}

actor Needler : Weapon 10021
{
  obituary "%o was spiked by %k's needler."
  radius 20
  height 16
  attacksound "NeedlerFire"
  inventory.pickupmessage "You got the needler!"
  weapon.selectionorder 200
  weapon.kickback 100
  weapon.ammotype "MechAmmo"
  weapon.ammouse 1
  weapon.ammogive 50
  decal BulletChip
  Scale 0.6
  states
  {
  Ready:
	NEED A 1 A_WeaponReady
	loop
  Deselect:
	NEED A 1 A_Lower
	loop
  Select:
	NEED A 1 A_Raise
	loop
  Fire:
  	TNT1 A 0 radius_quake(2, 2, 0, 1, 0)
	TNT1 A 0 A_GunFlash
	TNT1 A 0 A_FireCustomMissile("NeedlerFlare", 0, 0, 2, -8)
	NEED A 2 A_FireCustomMissile("NeedlerCrystal", random(-2, 2), 1, 2, 0)
	NEED B 2
	TNT1 A 0 radius_quake(2, 2, 0, 1, 0)
	TNT1 A 0 A_GunFlash
	TNT1 A 0 A_FireCustomMissile("NeedlerFlare", 0, 0, 2, -8)
	NEED C 2 A_FireCustomMissile("NeedlerCrystal", random(-2, 2), 1, 2, 0)
	NEED D 2
	TNT1 A 0 radius_quake(2, 2, 0, 1, 0)
	TNT1 A 0 A_GunFlash
	TNT1 A 0 A_FireCustomMissile("NeedlerFlare", 0, 0, 2, -8)
	NEED C 2 A_FireCustomMissile("NeedlerCrystal", random(-2, 2), 1, 2, 0)
	NEED B 2
	TNT1 A 0 radius_quake(2, 2, 0, 1, 0)
	TNT1 A 0 A_GunFlash
	TNT1 A 0 A_FireCustomMissile("NeedlerFlare", 0, 0, 2, -8)
	NEED A 2 A_FireCustomMissile("NeedlerCrystal", random(-2, 2), 1, 2, 0)
	NEED C 2
	NEED A 0 A_Refire
	goto Ready
  Flash:
	NEEF A 2 BRIGHT A_Light2
	NEEF A 0 BRIGHT A_Light0
	stop
  Spawn:
	NEEP A -1
	stop
  }
}

actor NeedlerFlare
{
  RenderStyle Add
  Scale 0.25
  Damage 0
  Speed 45
  SpawnId 244
  PROJECTILE
  +NOCLIP
  +FORCEXYBILLBOARD
  States
  {
  Spawn:
	NEFL A 0
	NEFL A 1 bright
	Stop
  }
}

ACTOR FartBombs : CustomInventory 14221
{
   inventory.pickupmessage "Fart Grenade"
   inventory.pickupsound "misc/p_pkup"
   inventory.icon ARTIFART
   inventory.amount 1
   inventory.maxamount 3
   obituary "%o was out-farted by %k's fart bomb."
   +FLOATBOB
   +INVBAR
   States
   {
   Spawn:
	  FARG A -1
	  Loop
   Use:
	  TNT1 A 10 A_FireCustomMissile("FartGrenade", 0, 0, 0, 5)
	  stop
   }
}

Actor FartCloud
{
		Projectile
		Radius 8
		Height 8
		explosionradius 45
		explosiondamage 10
		RenderStyle Add
		Alpha 0.4
		obituary "%o was out-farted by %k's fart bomb."
		Reactiontime 50
		+NOGRAVITY
		+NODAMAGETHRUST
		+HEXENBOUNCE
		+FORCERADIUSDMG
		+FORCEXYBILLBOARD
		+FLOATBOB
		States
		{
		Spawn:
			PSNE ABCDEFG 4 A_Explode
			PSNE A 0 A_Countdown
			Goto Spawn+3
		Death:
			PSNE ABCDEFG 4 A_Fadeout
			loop
		}
}

actor FartGrenade
{
  Projectile
  Speed 15
  Radius 16
  Height 24
  +DOOMBOUNCE
  -NOGRAVITY
 States
 {
 Spawn:
 FART ABCDEGH 4
 loop
 Death:
 FART E 0
 FART E 0 A_PlaySound("FartGrenade1") // Part1
 FART E 0 ThrustThing(Random(0, 255), Random(0, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 86 ThrustThingZ(0, Random(15, 30), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(0, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 86 ThrustThingZ(0, Random(15, 30), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(0, 5), 0, 0)
  TNT1 A 0 A_PlaySound("FartGrenade2")	// Part2
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 12 ThrustThingZ(0, Random(12, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(0, 5), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 12 ThrustThingZ(0, Random(12, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(0, 5), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 12 ThrustThingZ(0, Random(12, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(0, 5), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 15 ThrustThingZ(0, Random(12, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(0, 5), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 15 ThrustThingZ(0, Random(12, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(0, 5), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 18 ThrustThingZ(0, Random(12, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(0, 5), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 22 ThrustThingZ(0, Random(12, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(0, 5), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 35 ThrustThingZ(0, Random(12, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(0, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 86 ThrustThingZ(0, Random(15, 30), 0, 0)
  TNT1 A 0 A_PlaySound("FartGrenade3") // Part3
 FART E 0 ThrustThing(Random(0, 255), Random(0, 5), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 15 ThrustThingZ(0, Random(12, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(0, 5), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 15 ThrustThingZ(0, Random(12, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(0, 5), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 15 ThrustThingZ(0, Random(12, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(0, 5), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 18 ThrustThingZ(0, Random(12, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(0, 5), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 20 ThrustThingZ(0, Random(12, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(0, 5), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 22 ThrustThingZ(0, Random(12, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(0, 5), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 28 ThrustThingZ(0, Random(12, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(0, 5), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 35 ThrustThingZ(0, Random(12, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(0, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 60 ThrustThingZ(0, Random(15, 30), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(0, 5), 0, 0) // Part3
 TNT1 A 0 A_PlaySound("FartGrenade4")
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 10 ThrustThingZ(0, Random(12, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(0, 5), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 10 ThrustThingZ(0, Random(12, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(0, 5), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 10 ThrustThingZ(0, Random(12, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
  FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
  FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
   FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
  FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
   FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
  FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
   FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
  FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
  FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
  FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
  FART E 0 ThrustThing(Random(0, 255), Random(0, 5), 0, 0) // Part5
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 10 ThrustThingZ(0, Random(12, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(0, 5), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 10 ThrustThingZ(0, Random(12, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(0, 5), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 10 ThrustThingZ(0, Random(12, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(0, 5), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 10 ThrustThingZ(0, Random(12, 20), 0, 0)
  FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0) // Part6
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
 FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
  FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 FART E 5 ThrustThingZ(0, Random(0, 20), 0, 0)
  FART E 0 ThrustThing(Random(0, 255), Random(2, 10), 0, 0)
  FART E 0 A_CustomMissile("FartCloud", Random(24, 76), 0, 0, 6, 0)
 NEXP A 0 A_Explode(200, 256, 0)
 NEXP A 0 A_PlaySound("weapons/grenlx")
 NEXP A 0 A_NoGravity
 NEXP A 0 A_SetTranslucent(0.9, 1)
 NEXP A 0 A_Stop
 NEXP ABCDEFGHIJKLMNOPQRSTU 1 bright
 stop
 }
}

actor EtherealCrossbow : Weapon 13321
{
 Scale 0.86
 radius 20
 height 16
 inventory.pickupmessage "You got the Ethereal Crossbow!"
 weapon.selectionorder 9999
 weapon.kickback 100
 Weapon.Ammotype "DemonicPower"
 Weapon.AmmoUse 5
 weapon.ammogive 0
 States
 {
  Ready:
   ECRO ABC 2 A_WeaponReady
   loop
  Select:
   ECRO AABBCC 1 A_Raise
   loop
  Deselect:
   ECRO AABBCC 1 A_Lower
   loop
  Fire:
   ECRO D 0 A_FireCustomMissile("BowSide",6,0,0,0) // Left
   ECRO D 0 A_FireCustomMissile("BowJet",3,0,0,0) // Left Jet
   ECRO D 0 A_FireCustomMissile("BowSide",-6,0,0,0) // Right
   ECRO D 0 A_FireCustomMissile("BowJet",-3,0,0,0) // Right Jet
   ECRO D 6 Bright A_FireCustomMissile("BowCenter",0,1,0,0)
   ECRO EFGH 3
   ECRO A 12
   ECRO A 0 A_Refire
   goto Ready
  Spawn:
   ECRP A -1
   loop
 }
}

actor BowCenter : CrossbowFX1 Replaces CrossbowFX1
{
	Speed 70
	Obituary "%o was vanquished by %k's ethereal Crossbow"
	Damage 12
	Decal CrossbowScorch
	DamageType "Ethereal"
	+FORCEXYBILLBOARD
  	States
  	{
		Spawn:
			FX03 B 1 BRIGHT A_SpawnItemEx("EtherealMist2", 0, 0, 0, 0, 0, 0, 0, 128, 0)
			loop
		XDeath:
			TNT1 A 0
			TNT1 A 0 A_GiveToTarget("HitConfirmation", 1)
			goto Death
  	}
}

actor BowSide : CrossbowFX3 Replaces CrossbowFX3
{
	Speed 50
	Obituary "%o was vanquished by %k's ethereal Crossbow"
	Damage 8
	Decal CrossbowScorch2
	DamageType "Ethereal"
	+FORCEXYBILLBOARD
	States
	{
		Spawn:
			FX03 A 1 BRIGHT A_SpawnItemEx("EtherealSideTrail", 0, 0, 0, 0, 0, 0, 0, 128, 0)
			loop
		XDeath:
			TNT1 A 0
			TNT1 A 0 A_GiveToTarget("HitConfirmation", 1)
			goto Death
	}
}

actor BowJet
{
  Projectile
  Radius 4
  Height 4
  Speed 20
  ReactionTime 12
  RenderStyle Add
  Alpha 0.5
  Scale 0.22
  obituary "%o breathed in %k's deadly jet of ethereal mist"
  Damage 3
  +RIPPER
  -BLOODSPLATTER
  +BLOODLESSIMPACT
  +FORCEXYBILLBOARD
  States
  {
   Spawn:
   TNT1 A 0 BRIGHT A_CountDown
   TNT1 A 1 BRIGHT A_SpawnItemEx("EtherealMist3", 0, 0, 0, 0, 0, 0, 0, 128, 0)
   loop
  }
}

actor EtherealSideTrail
{
 Alpha 0.9
 RenderStyle Add
 Radius 1
 Height 1
 Gravity 0.03
 +NOCLIP
 +CORPSE
 +FORCEXYBILLBOARD
 +NOINTERACTION
 States
 {
   Spawn:
	TNT1 A 2 BRIGHT
	FX03 F 4 BRIGHT
	FX03 K 4 BRIGHT
	FX03 G 4 BRIGHT A_FadeOut
	goto Spawn+3
 }
}

actor Etherealmist2
{
	Radius 1
	Height 1
	Speed 2
	Scale 0.6
	RenderStyle Add
	Alpha 0.5
	Translation "176:191=112:127", "32:47=112:127"
	PROJECTILE
	+CORPSE
	+FORCEXYBILLBOARD
	+NOINTERACTION
	States
	{
	Spawn:
		EPF4 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 BRIGHT
		EPF5 AB 1 BRIGHT
		Stop
	Death:
		NADA A 1
		Stop
	}
}

actor Etherealmist3
{
	Radius 1
	Height 1
	Speed 2
	Scale 0.22
	RenderStyle Add
	Alpha 0.5
	Translation "176:191=112:127", "32:47=112:127"
	PROJECTILE
	+CORPSE
	+FORCEXYBILLBOARD
	+NOINTERACTION
	States
	{
	Spawn:
		EPF4 ABCDEFGHIJKLMNOPQRSTUVWXYZ 1 BRIGHT
		EPF5 AB 1 BRIGHT
		Stop
	Death:
		NADA A 1
		Stop
	}
}

actor RPGSmoke : Duke64GrenadeSmoke
{
	Scale 0.3
	States
	{
	Death:
	Spawn:
	TNT1 A 2
	SMK1 A 1
	SMK1 A 1 A_FadeOut(0.04)
	goto Spawn+2
	}
}

actor RPGSpark : GunSpark
{
	Scale 0.72
	States
	{
	Spawn:
		PUFF A 0 A_JumpIf(WaterLevel >= 1, "Death")
		PUFF A 1 BRIGHT A_FadeOut(0.1)
		loop
	}
}

actor DukeRocket : ProtonTorpedo
{
	Speed 35
	Damage 30
	obituary "%o challenged %k to a rocket eating contest and won."
	SeeSound ""
	DeathSound ""
	RenderStyle Normal
	Alpha 1.0
	Scale 0.76
	+EXTREMEDEATH
	+BLOODSPLATTER
	States
	{
		Spawn:
			RPGM A 0 BRIGHT A_SpawnItemEx("RPGSmoke", 0, 0, 0, Random(-1,1), Random(-1,1), Random(-1,1), 0, 128, 0)
			RPGM A 1 BRIGHT A_SpawnItemEx("RPGSmoke", 0, 0, 0, Random(-1,1), Random(-1,1), Random(-1,1), 0, 128, 0)
			loop
		XDeath:
			TNT1 A 0
			TNT1 A 0 A_GiveToTarget("HitConfirmation", 1)
			goto Death
		Death:
			NULL A 0
			NULL A 0 radius_quake(3, 16, 0, 4, 0)
			NULL A 0 A_PlaySoundEx ("DukeExplosion", "Auto", 0, 0.4)
			NULL A 0 A_Explode(116, 132)
			NULL AAAA 0 A_SpawnItemEX("Duke64ExplosionSmoke", Random(-48,48), Random(-32,48), Random(-28, 36), Random(-1,1), Random(-1,1), Random(-1,1), 0, 128, 0)
			NULL AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("RPGSpark", Random(-32,48), Random(-32,32), Random(-48,48), Random(-10,10), Random(-10,10), Random(-10,10), 0, 128, 0)
			NULL A 0 A_SpawnItemEX("Duke64ExplosionRing", 0, 0, 2, 0, 0, 0, 0, 128, 0)
			NULL A 1 A_SpawnItemEx("DukeExplode", 0, 0, -24, 0, 0, 0, 0, 128, 0)
			NULL A 4
			NULL A 3
			stop
	}
}

actor ProtonTorpedoLauncher : Weapon Replaces RocketLauncher
{
  spawnid 29
  radius 20
  height 16
  inventory.pickupmessage "You got the Proton Torpedo launcher!"
  weapon.selectionorder 2500
  weapon.kickback 100
  weapon.ammotype "ProtonAmmo"
  weapon.ammouse 1
  weapon.ammogive 2
  +WEAPON.NOAUTOFIRE
  +WEAPON.EXPLOSIVE
  states
  {
  Ready:
	MISG A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeReady")
	MISG A 0 A_JumpIfInventory("LinkClassCheck", 1, "LinkReady")
	MISG A 1 A_WeaponReady
	goto Ready+1
  Deselect:
	MISG A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeDeselect")
	MISG A 0 A_JumpIfInventory("LinkClassCheck", 1, "LinkDeselect")
	MISG A 1 A_Lower
	goto Deselect+1
  Select:
	MISG A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeSelect")
	MISG A 0 A_JumpIfInventory("LinkClassCheck", 1, "LinkSelect")
	MISG A 1 A_Raise
	goto Select+1
  Fire:
	MISG A 0 A_JumpIfInventory("DukeClassCheck", 1, "DukeFire")
	MISG A 0 A_JumpIfInventory("LinkClassCheck", 1, "LinkFire")
	MISG A 0 BRIGHT A_GunFlash
	MISG A 0 BRIGHT radius_quake(2, 3, 0, 1, 0)
	MISG B 2 BRIGHT A_FireCustomMissile("ProtonTorpedo", 0, 1, 9, 0)
	MISG CDEFGHIJK 2 
	MISG B 0 A_ReFire
	goto Ready
  Flash:
	TNT1 A 0 bright A_JumpIfInventory("DukeClassCheck", 1, "DukeFlash")
	TNT1 A 2 bright A_Light1
	TNT1 A 4 bright
	TNT1 A 8 bright A_Light2
	TNT1 D 0 bright A_Light0
	stop
  DukeReady:
	RPGG A 1 A_WeaponReady
	loop
  DukeDeselect:
	RPGG A 1 A_Lower
	loop
  DukeSelect:
	RPGG A 0 A_PlayWeaponSound("DukeWeaponSelect")
	RPGG A 1 A_Raise
	goto DukeSelect+1
  DukeFire:
	RPGG B 0 A_GunFlash
	RPGG B 0 A_PlaySoundEx("DukeRpg", "weapon", 0)
	RPGG B 1 A_FireCustomMissile("DukeRocket", 0, 1, 10, 1)
	RPGG CDEFGHIJKLMNOPQRSTUV 1
	RPGG A 4
	RPGG A 0 A_ReFire
	goto Ready
  DukeFlash:
	RPGF A 1 bright A_Light1
	RPGF B 1 bright
	RPGF C 1 bright A_Light2
	RPGF D 1 bright
	NULL A 0 bright A_Light0
	stop
  LinkReady:
	IROD A 1 A_WeaponReady
	loop
  LinkSelect:
	IROD A 1 A_Raise
	loop
  LinkDeselect:
	IROD A 1 A_Lower
	loop
  LinkFire:
	IROD A 1
	IROD B 3
	IROD C 3 BRIGHT
	IROD D 0 BRIGHT radius_quake(2, 3, 0, 1, 0)
	IROD D 0 BRIGHT A_Recoil(5)
	IROD DDDDDDDDDD 0 BRIGHT A_SpawnItemEx("IceRodFog1", 16, 0, 32, 0.5, 0, Random(-0.5, 0.5), Random(-50, 50), 128)
	IROD D 1 BRIGHT A_FireCustomMissile("IceRodShot")
	IROD E 1 BRIGHT
	IROD CB 4
	IROD A 12
	IROD A 0 A_Refire
	goto LinkReady
  Spawn:
	LAUN A -1
	stop
  }
}

actor IceRodShot
{
	Projectile
	Obituary "%o was chilled to the soul by %k"
	Radius 8
	Height 11
	Speed 40
	Damage 15
	RenderStyle Add
	DamageType "IceRod"
	SeeSound "IceRod"
	Alpha 1.0
	decal IceRodHit
	+FORCEXYBILLBOARD
	-NOTELEPORT
	States
	{
		Spawn:
			RODI A 0 BRIGHT A_SpawnItemEx("IceRodTrail1", Random(-8,8), Random(-8,8), Random(-8,8), 0, 0, 0, 0, 128, 0)
			RODI A 0 BRIGHT A_SpawnItemEx("IceRodFog5", 0, 0, 0, 0, -4, 0, 0, 128, 0)
			RODI A 0 BRIGHT A_SpawnItemEx("IceRodFog5", 0, 0, 0, 0, 4, 0, 0, 128, 0)
			RODI A 1 BRIGHT A_SpawnItemEx("IceRodTrail1", Random(-8,8), Random(-8,8), Random(-8,8), 0, 0, 0, 0, 128, 0)
			loop
		Death:
			NULL A 0
			NULL A 0 A_Explode(96, 96)
			NULL A 0 A_PlaySoundEx("misc/icebreak", "auto", 0)
			NULL A 0 A_PlaySoundEx("misc/freeze", "auto", 0)
			NULL A 0 A_SpawnItemEx("IceRodFog3", 0, 0, 0, 0, 0, 0, 0, 128, 0)
			NULL AAAAAA 0 A_SpawnItemEx("IceRodFog4", 0, 0, 0, random(-8,8), random(-8,8), random(-8,8), 0, 128, 0)
			NULL AAAAAAAAAA 0 A_SpawnItemEx("IceChunk", 0, 0, 0, random(-3,3), random(-3,3), random(0,5), 0, 128, 0)
			NULL AAAAAAAAAAAAA 0 A_SpawnItemEx("IceRodFog2", Random(-32,32), Random(-32,32), Random(-32,32), 0, 0, 0, 0, 128, 0)
			NULL AAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("IceRodHitGlitter", Random(-48,48), Random(-48,48), Random(-48,48), 0, 0, 0, 0, 128, 0)
			NULL AAAAAA 2 A_SpawnItemEx("IceRodFog2", Random(-32,32), Random(-32,32), Random(-32,32), 0, 0, 0, 0, 128, 0)
			stop
	}
}

actor IceRodTrail1
{
	Radius 1
	Height 1
	Scale 0.009
	Alpha 1.0
	RenderStyle Add
	+FORCEXYBILLBOARD
	+NOINTERACTION
	+NOCLIP
	+NOGRAVITY
	States
	{
		Spawn:
			BLSS AB 1 BRIGHT A_FadeOut(0.02)
			loop
	}
}

actor IceRodHitGlitter
{
	Radius 1
	Height 1
	Scale 0.01
	Alpha 1.0
	RenderStyle Add
	Gravity 0.08
	+FORCEXYBILLBOARD
	+CORPSE
	+NOCLIP
	States
	{
		Spawn:
			BLSS AB 1 BRIGHT A_FadeOut(0.02)
			loop
		Crash:
			TNT1 A 1
			stop
	}
}

Actor IceRodFog1
{
  Radius 1
  Height 1
  RenderStyle Add
  Alpha 0.2
  XScale 0.6
  YScale 0.4
  +NOGRAVITY
  +NOCLIP
  +NOINTERACTION
  +FORCEXYBILLBOARD
  States
  {
  Spawn:
	IRFO A 1 A_FadeOut(0.0075)
	loop
  }
}

actor IceRodFog2 : IceRodFog1
{
	XScale 1.4
	YScale 1.4
}

actor IceRodFog3 : IceRodFog1
{
	Alpha 0.3
	XScale 2.0
	YScale 2.0
	States
	{
		Spawn:
			IRFO A 1 A_FadeOut(0.003)
			loop
	}
}

actor IceRodFog4 : IceRodFog1
{
	-NOINTERACTION
	Projectile
	Alpha 0.4
	XScale 0.6
	YScale 0.6
	States
	{
		Spawn:
			IRFO A 1 A_FadeOut(0.04)
			loop
		Death:
			TNT1 AA 1
			stop
	}
}

actor IceRodFog5 : IceRodFog1
{
	Alpha 0.3
	XScale 0.6
	YScale 0.4
	States
	{
		Spawn:
			IRFO A 1 A_FadeOut(0.03)
			loop
	}
}

ACTOR VictimsSoul : DemonicPower
{
   Radius 10
   Height 12
   Speed 16
   Damage 0
   RENDERSTYLE ADD
   ALPHA 0.6
   Scale 0.3
   ReactionTime 76
   Inventory.PickupMessage "Gathered a Soul!"
   Inventory.PickupSound "demonpowerpickup"
   Inventory.Amount 30
   SeeSound "demonicpowerpickup"
   +NOGRAVITY
   +SEEKERMISSILE
   +DROPOFF
   +NOBLOCKMONST
   +CANPASS
   -COUNTITEM
   States
   {
   Spawn:
	  PSOU A 0 Bright
	  PSOU A 0 Bright A_ChangeFlag("Noblockmap",1)
	  PSOU A 1 Bright
	  PSOU A 0 Bright A_ChangeFlag("Noblockmap",0)
	  PSOU A 1 Bright A_CStaffMissileSlither
	  PSOU A 0 Bright A_SeekerMissile(20,35)
	  PSOU A 0 Bright A_SpawnItemEx("SoulTrail", 0, 0, 0, 0, 0, 0, 0, 128, 0)
	  PSOU A 1 Bright A_CStaffMissileSlither
	  PSOU A 0 Bright A_SeekerMissile(20,35)
	  PSOU A 0 Bright A_SpawnItemEx("SoulTrail", 0, 0, 0, 0, 0, 0, 0, 128, 0)
	  PSOU A 0 Bright A_CountDown
	  goto Spawn+4
   Death:
	  PSOU A 0
	  stop
   }
}

actor SoulTrail
{
 Projectile
 Radius 1
 Height 1
 Speed 0
 Renderstyle Add
 Scale 0.3
 Alpha 0.6
 States
 {
 Spawn:
  PSOU BCDE 3
  stop
 Death:
  TNT1 A 1
  stop
 }
}

ACTOR SoulGiver1
{
   Radius 1
   Height 1
   Speed 0
   RENDERSTYLE NONE
   +LOOKALLAROUND
   +NOGRAVITY
   +NOCLIP
   States
   {
   Spawn:
	  NULL A 0
	  NULL A 1 Bright A_Look
	  loop
   See:
	  NULL A 0
	  NULL A 0 A_FaceTarget
	  NULL A 0 A_CustomMissile("VictimsSoul",0,0,0,0)
	  stop
   }
}

actor ChaosFlames : MageWeapon
{
  radius 20
  height 16
  inventory.pickupmessage "Chaos Flames"
  weapon.selectionorder 1
  weapon.kickback 100
  weapon.ammotype "DemonicPower"
  obituary "%o was banished into the void by %k's chaos flames"
  weapon.ammouse 100
  weapon.ammogive 0
  +WEAPON.NOAUTOFIRE
  +WEAPON.EXPLOSIVE
  +WEAPON.NOLMS
  +WEAPON.CHEATNOTWEAPON
  states
  {
  Ready:
	CHFL A 1 A_WeaponReady
	loop
  Deselect:
	CHFL A 1 A_Lower
	CHFL A 0 A_ClearShadow
	loop
  Select:
	CHFL A 1 A_Raise
	loop
  Fire:
	CHFL B 10
	CHFL B 1 A_SetBlend("64 FF 00", 0.6, 10)
	CHFL B 0 A_Light0
	CHFL B 0 A_SetTranslucent(1.0, 0)
	CHFL CDE 3
	CHFL B 4
	CHFL F 3 A_PlayWeaponSound("ChaosReady")
	CHFL F 0 A_SetReflectiveInvulnerable
	CHFL F 6 A_LightInverse
	CHFL F 3 A_Light0
	CHFL B 4
	CHFL GHIJ 5
	CHFL J 3
	CHFL J 0 A_PlayWeaponSound("ChaosFire")
	CHFL K 1 A_FireCustomMissile("ChaosFlameStream", -16, 1, 10, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL L 1 A_FireCustomMissile("ChaosFlameStream", -8, 0, 8, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL M 1 A_FireCustomMissile("ChaosFlameStream", 0, 0, 6, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL N 1 A_FireCustomMissile("ChaosFlameStream", 4, 0, 4, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL O 1 A_FireCustomMissile("ChaosFlameStream", 8, 0, 2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL P 1 A_FireCustomMissile("ChaosFlameStream", 16, 0, -2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL Q 1 A_FireCustomMissile("ChaosFlameStream", 24, 0, -5, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL P 1 A_FireCustomMissile("ChaosFlameStream", 16, 0, -2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL O 1 A_FireCustomMissile("ChaosFlameStream", 8, 0, 2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL N 1 A_FireCustomMissile("ChaosFlameStream", 4, 0, 4, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL M 1 A_FireCustomMissile("ChaosFlameStream", 0, 0, 6, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL L 1 A_FireCustomMissile("ChaosFlameStream", -8, 0, 8, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL K 1 A_FireCustomMissile("ChaosFlameStream", -16, 0, 10, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
		CHFL L 1 A_FireCustomMissile("ChaosFlameStream", -8, 0, 8, -5)
		TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL M 1 A_FireCustomMissile("ChaosFlameStream", 0, 0, 6, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL N 1 A_FireCustomMissile("ChaosFlameStream", 4, 0, 4, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL O 1 A_FireCustomMissile("ChaosFlameStream", 8, 0, 2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL P 1 A_FireCustomMissile("ChaosFlameStream", 16, 0, -2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL Q 1 A_FireCustomMissile("ChaosFlameStream", 24, 0, -5, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL P 1 A_FireCustomMissile("ChaosFlameStream", 16, 0, -2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL O 1 A_FireCustomMissile("ChaosFlameStream", 8, 0, 2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL N 1 A_FireCustomMissile("ChaosFlameStream", 4, 0, 4, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL M 1 A_FireCustomMissile("ChaosFlameStream", 0, 0, 6, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL L 1 A_FireCustomMissile("ChaosFlameStream", -8, 0, 8, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL K 1 A_FireCustomMissile("ChaosFlameStream", -16, 0, 10, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
		CHFL L 1 A_FireCustomMissile("ChaosFlameStream", -8, 0, 8, -5)
		TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL M 1 A_FireCustomMissile("ChaosFlameStream", 0, 0, 6, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL N 1 A_FireCustomMissile("ChaosFlameStream", 4, 0, 4, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL O 1 A_FireCustomMissile("ChaosFlameStream", 8, 0, 2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL P 1 A_FireCustomMissile("ChaosFlameStream", 16, 0, -2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL Q 1 A_FireCustomMissile("ChaosFlameStream", 24, 0, -5, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL P 1 A_FireCustomMissile("ChaosFlameStream", 16, 0, -2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL O 1 A_FireCustomMissile("ChaosFlameStream", 8, 0, 2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL N 1 A_FireCustomMissile("ChaosFlameStream", 4, 0, 4, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL M 1 A_FireCustomMissile("ChaosFlameStream", 0, 0, 6, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL L 1 A_FireCustomMissile("ChaosFlameStream", -8, 0, 8, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL K 1 A_FireCustomMissile("ChaosFlameStream", -16, 0, 10, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
		CHFL L 1 A_FireCustomMissile("ChaosFlameStream", -8, 0, 8, -5)
		TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL M 1 A_FireCustomMissile("ChaosFlameStream", 0, 0, 6, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL N 1 A_FireCustomMissile("ChaosFlameStream", 4, 0, 4, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL O 1 A_FireCustomMissile("ChaosFlameStream", 8, 0, 2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL P 1 A_FireCustomMissile("ChaosFlameStream", 16, 0, -2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL Q 1 A_FireCustomMissile("ChaosFlameStream", 24, 0, -5, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL P 1 A_FireCustomMissile("ChaosFlameStream", 16, 0, -2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL O 1 A_FireCustomMissile("ChaosFlameStream", 8, 0, 2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL N 1 A_FireCustomMissile("ChaosFlameStream", 4, 0, 4, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL M 1 A_FireCustomMissile("ChaosFlameStream", 0, 0, 6, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL L 1 A_FireCustomMissile("ChaosFlameStream", -8, 0, 8, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL K 1 A_FireCustomMissile("ChaosFlameStream", -16, 0, 10, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
		CHFL L 1 A_FireCustomMissile("ChaosFlameStream", -8, 0, 8, -5)
		TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL M 1 A_FireCustomMissile("ChaosFlameStream", 0, 0, 6, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL N 1 A_FireCustomMissile("ChaosFlameStream", 4, 0, 4, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL O 1 A_FireCustomMissile("ChaosFlameStream", 8, 0, 2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL P 1 A_FireCustomMissile("ChaosFlameStream", 16, 0, -2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL Q 1 A_FireCustomMissile("ChaosFlameStream", 24, 0, -5, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL P 1 A_FireCustomMissile("ChaosFlameStream", 16, 0, -2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL O 1 A_FireCustomMissile("ChaosFlameStream", 8, 0, 2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL N 1 A_FireCustomMissile("ChaosFlameStream", 4, 0, 4, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL M 1 A_FireCustomMissile("ChaosFlameStream", 0, 0, 6, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL L 1 A_FireCustomMissile("ChaosFlameStream", -8, 0, 8, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL K 1 A_FireCustomMissile("ChaosFlameStream", -16, 0, 10, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
		CHFL L 1 A_FireCustomMissile("ChaosFlameStream", -8, 0, 8, -5)
		TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL M 1 A_FireCustomMissile("ChaosFlameStream", 0, 0, 6, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL N 1 A_FireCustomMissile("ChaosFlameStream", 4, 0, 4, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL O 1 A_FireCustomMissile("ChaosFlameStream", 8, 0, 2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL P 1 A_FireCustomMissile("ChaosFlameStream", 16, 0, -2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL Q 1 A_FireCustomMissile("ChaosFlameStream", 24, 0, -5, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL P 1 A_FireCustomMissile("ChaosFlameStream", 16, 0, -2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL O 1 A_FireCustomMissile("ChaosFlameStream", 8, 0, 2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL N 1 A_FireCustomMissile("ChaosFlameStream", 4, 0, 4, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL M 1 A_FireCustomMissile("ChaosFlameStream", 0, 0, 6, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL L 1 A_FireCustomMissile("ChaosFlameStream", -8, 0, 8, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL K 1 A_FireCustomMissile("ChaosFlameStream", -16, 0, 10, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
		CHFL L 1 A_FireCustomMissile("ChaosFlameStream", -8, 0, 8, -5)
		TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL M 1 A_FireCustomMissile("ChaosFlameStream", 0, 0, 6, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL N 1 A_FireCustomMissile("ChaosFlameStream", 4, 0, 4, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL O 1 A_FireCustomMissile("ChaosFlameStream", 8, 0, 2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL P 1 A_FireCustomMissile("ChaosFlameStream", 16, 0, -2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL Q 1 A_FireCustomMissile("ChaosFlameStream", 24, 0, -5, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL P 1 A_FireCustomMissile("ChaosFlameStream", 16, 0, -2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL O 1 A_FireCustomMissile("ChaosFlameStream", 8, 0, 2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL N 1 A_FireCustomMissile("ChaosFlameStream", 4, 0, 4, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL M 1 A_FireCustomMissile("ChaosFlameStream", 0, 0, 6, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL L 1 A_FireCustomMissile("ChaosFlameStream", -8, 0, 8, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL K 1 A_FireCustomMissile("ChaosFlameStream", -16, 0, 10, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
		CHFL L 1 A_FireCustomMissile("ChaosFlameStream", -8, 0, 8, -5)
		TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL M 1 A_FireCustomMissile("ChaosFlameStream", 0, 0, 6, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL N 1 A_FireCustomMissile("ChaosFlameStream", 4, 0, 4, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL O 1 A_FireCustomMissile("ChaosFlameStream", 8, 0, 2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL P 1 A_FireCustomMissile("ChaosFlameStream", 16, 0, -2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL Q 1 A_FireCustomMissile("ChaosFlameStream", 24, 0, -5, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL P 1 A_FireCustomMissile("ChaosFlameStream", 16, 0, -2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL O 1 A_FireCustomMissile("ChaosFlameStream", 8, 0, 2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL N 1 A_FireCustomMissile("ChaosFlameStream", 4, 0, 4, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL M 1 A_FireCustomMissile("ChaosFlameStream", 0, 0, 6, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL L 1 A_FireCustomMissile("ChaosFlameStream", -8, 0, 8, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL K 1 A_FireCustomMissile("ChaosFlameStream", -16, 0, 10, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
		CHFL L 1 A_FireCustomMissile("ChaosFlameStream", -8, 0, 8, -5)
		TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL M 1 A_FireCustomMissile("ChaosFlameStream", 0, 0, 6, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL N 1 A_FireCustomMissile("ChaosFlameStream", 4, 0, 4, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL O 1 A_FireCustomMissile("ChaosFlameStream", 8, 0, 2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL P 1 A_FireCustomMissile("ChaosFlameStream", 16, 0, -2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL Q 1 A_FireCustomMissile("ChaosFlameStream", 24, 0, -5, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL P 1 A_FireCustomMissile("ChaosFlameStream", 16, 0, -2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL O 1 A_FireCustomMissile("ChaosFlameStream", 8, 0, 2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL N 1 A_FireCustomMissile("ChaosFlameStream", 4, 0, 4, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL M 1 A_FireCustomMissile("ChaosFlameStream", 0, 0, 6, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL L 1 A_FireCustomMissile("ChaosFlameStream", -8, 0, 8, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL K 1 A_FireCustomMissile("ChaosFlameStream", -16, 0, 10, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
		CHFL L 1 A_FireCustomMissile("ChaosFlameStream", -8, 0, 8, -5)
		TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL M 1 A_FireCustomMissile("ChaosFlameStream", 0, 0, 6, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL N 1 A_FireCustomMissile("ChaosFlameStream", 4, 0, 4, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL O 1 A_FireCustomMissile("ChaosFlameStream", 8, 0, 2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL P 1 A_FireCustomMissile("ChaosFlameStream", 16, 0, -2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL Q 1 A_FireCustomMissile("ChaosFlameStream", 24, 0, -5, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL P 1 A_FireCustomMissile("ChaosFlameStream", 16, 0, -2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL O 1 A_FireCustomMissile("ChaosFlameStream", 8, 0, 2, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL N 1 A_FireCustomMissile("ChaosFlameStream", 4, 0, 4, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL M 1 A_FireCustomMissile("ChaosFlameStream", 0, 0, 6, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL L 1 A_FireCustomMissile("ChaosFlameStream", -8, 0, 8, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL K 1 A_FireCustomMissile("ChaosFlameStream", -16, 0, 10, -5)
	TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
	CHFL B 0 A_PlayWeaponSound("ChaosDone")
	CHFL B 0 A_UnSetReflectiveInvulnerable
	CHFL B 8 A_LightInverse
	CHFL B 1 A_Light0
	CHFL B 1 A_SetTranslucent(0.7, 2)
	CHFL B 10
	CHFL A 20
	CHFL A 0 A_Refire
	goto Ready
  Flash:
	TNT1 A 3 bright A_Light1
	TNT1 A 4 bright
	TNT1 A 8 bright A_Light2
	TNT1 D 0 bright A_Light0
	stop
  }
}

actor ChaosFlameStream
{
 projectile
 Radius 4
 Height 20
 obituary "%o was banished into the void by %k's chaos flames"
 speed 40
 damage 6
 alpha 0.7
 seesound "vile/firestrt"
 renderstyle Translucent
 DamageType "ChaosFire"
 +RIPPER
 -BLOODSPLATTER
 +BLOODLESSIMPACT
 +NODAMAGETHRUST
 States
 {
 Spawn:
 CFLM AAAABBBBCCCCDDDD 1
 stop
 Death:
 TNT1 A 1 A_CustomMissile("ChaosIgnitedSurface", random(5,15), random(-15, 15), 0, 0)
 stop
 }
}

actor ChaosIgnitedSurface
{
 Projectile
 Height 5
 Radius 2
 BounceFactor 0.0
 obituary "%o got caught in %k's chaos flames"
 RenderStyle Translucent
 Alpha 0.7
 Scale 0.5
 ReactionTime 12
 DamageType "ChaosFire"
 -SOLID
 +NODAMAGETHRUST
 +LOWGRAVITY
 -NOGRAVITY
 +HEXENBOUNCE
 +DONTSPLASH
 +FORCERADIUSDMG
 States
 {
 Spawn:
 CFIR A 0 A_CountDown
 CFIR ABCDEFGHIJKLMN 2 A_Explode(6, 20, 0)
 loop
 Death:
 CFEX A 0 A_PlaySound("vile/firestrt")
 CFEX A 2 A_Explode(26, 64, 0)
 CFEX BCDE 2
 stop
 }
}

actor BlackFlameDeath
{
  Radius 6
  Height 16
  ReactionTime 64
  -SOLID
  +NOGRAVITY
  //+FLOATBOB
  States
  {
  Spawn:
  TNT1 A 0
  TNT1 A 0 A_PlaySoundEX("vile/firecrkl", auto)
  TNT1 A 0 A_PlaySoundEX("ChaosBanish", auto)
  TNT1 A 1 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
  TNT1 AA 0 A_SpawnItemEx ("BlackFloatingFlame", Random(-24,24), Random(-24,24), Random(0, 56), Random(-0.5, 0.5), Random(-0.5, 0.5), Random(1, 3), Random(-360, 360), 128, 0)
  TNT1 A 0 A_CountDown
  goto Spawn+3
  }
}

actor BlackFloatingFlame
{
  Radius 4
  Height 4
  RenderStyle Translucent
  Alpha 0.8
  -SOLID
  +NOGRAVITY
  Translation "112:127=5:8"
  States
  {
  Spawn:
  FGRE ABCD 1
  FGRE ABCD 1
  FGRE ABCD 1 A_Fadeout
  goto Spawn+8
  }
}

actor WrathoftheWickedSpirits : ClericWeapon
{
  radius 20
  height 16
  inventory.pickupmessage "Wrath of the Wicked Spirits"
  obituary "%o was devoured by %k's wicked spirits"
  weapon.selectionorder 1
  weapon.kickback 100
  weapon.ammotype "DemonicPower"
  weapon.ammouse 100
  weapon.ammogive 0
  +WEAPON.NOAUTOFIRE
  +WEAPON.EXPLOSIVE
  +WEAPON.NOLMS
  +WEAPON.CHEATNOTWEAPON
  states
  {
  Ready:
	POWR AABBCC 1 A_WeaponReady
	loop
  Deselect:
	POWR AABBCC 1 A_Lower
	loop
  Select:
	POWR AABBCC 1 A_Raise
	loop
  Fire:
	POWR ABC 2
	POWR D 6
	POWR E 6
	POWR A 0 A_FireCustomMissile("HolyMissile2", Random(-8,8), 1, Random(-4,4), 0)
	POWR F 4 A_SpawnItemEx ("WrathSymbol", 48, 0, 32, 0, 0, 0, 0, 128, 0)
	POWR E 4 A_SpawnItemEx ("WrathSymbol", 32, 32, 32, 0, 0, 0, 0, 128, 0)
	POWR A 0 A_FireCustomMissile("HolyMissile2", Random(-8,8), 0, Random(-4,4), 0)
	POWR F 4 A_SpawnItemEx ("WrathSymbol", 0, 48, 32, 0, 0, 0, 0, 128, 0)
	POWR E 4 A_SpawnItemEx ("WrathSymbol", -32, 32, 32, 0, 0, 0, 0, 128, 0)
	POWR A 0 A_FireCustomMissile("HolyMissile2", Random(-8,8), 0, Random(-4,4), 0)
	POWR F 4 A_SpawnItemEx ("WrathSymbol", -48, 0, 32, 0, 0, 0, 0, 128, 0)
	POWR E 4 A_SpawnItemEx ("WrathSymbol", -32, -32, 32, 0, 0, 0, 0, 128, 0)
	POWR A 0 A_FireCustomMissile("HolyMissile2", Random(-8,8), 0, Random(-4,4), 0)
	POWR F 4 A_SpawnItemEx ("WrathSymbol", 0, -48, 32, 0, 0, 0, 0, 128, 0)
	POWR E 4 A_SpawnItemEx ("WrathSymbol", 32, -32, 32, 0, 0, 0, 0, 128, 0)
	POWR A 0 A_FireCustomMissile("HolyMissile2", Random(-8,8), 0, Random(-4,4), 0)
	POWR F 4 A_SpawnItemEx ("WrathSymbol", 48, 0, 32, 0, 0, 0, 0, 128, 0)
	POWR E 4 A_SpawnItemEx ("WrathSymbol", 32, 32, 32, 0, 0, 0, 0, 128, 0)
	POWR A 0 A_FireCustomMissile("HolyMissile2", Random(-8,8), 0, Random(-4,4), 0)
	POWR F 4 A_SpawnItemEx ("WrathSymbol", 0, 48, 32, 0, 0, 0, 0, 128, 0)
	POWR E 4 A_SpawnItemEx ("WrathSymbol", -32, 32, 32, 0, 0, 0, 0, 128, 0)
	POWR A 0 A_FireCustomMissile("HolyMissile2", Random(-8,8), 0, Random(-4,4), 0)
	POWR F 4 A_SpawnItemEx ("WrathSymbol", -48, 0, 32, 0, 0, 0, 0, 128, 0)
	POWR E 4 A_SpawnItemEx ("WrathSymbol", -32, -32, 32, 0, 0, 0, 0, 128, 0)
	POWR A 0 A_FireCustomMissile("HolyMissile2", Random(-8,8), 0, Random(-4,4), 0)
	POWR F 4 A_SpawnItemEx ("WrathSymbol", 0, -48, 32, 0, 0, 0, 0, 128, 0)
	POWR E 4 A_SpawnItemEx ("WrathSymbol", 32, -32, 32, 0, 0, 0, 0, 128, 0)
	POWR F 6
	POWR G 7
	POWR ABCABCABCABC 2
	POWR A 0 A_Refire
	goto Ready
  }
}

actor HolyMissile2 : HolyMissile Replaces HolyMissile
{
 Speed 0
}

actor HolySpirit2 : HolySpirit Replaces HolySpirit
{
 Projectile
 Speed 14
 RenderStyle Add
 DamageType "Demonic"
 Alpha 0.9
 obituary "%o was devoured by %k's wicked spirits"
 -BLOODSPLATTER
 +BLOODLESSIMPACT
 +LOOKALLAROUND
}

actor HolyTail2 : HolyTail Replaces HolyTail
{
  RenderStyle Add
  Alpha 0.9
}

actor HolyTailTrail2 : HolyTailTrail Replaces HolyTailTrail
{
  RenderStyle Add
  Alpha 0.9
}

actor Wrathsymbol
{
	Radius 1
	Height 1
	Speed 0
	Scale 0.18
	RenderStyle Add
	Alpha 0.8
	PROJECTILE
	+CORPSE
	+FORCEXYBILLBOARD
	+NOINTERACTION
	States
	{
	Spawn:
		WRAT A 0
		WRAT A 0 A_PlaySound("WrathSpawn")
		WRAT A 20 BRIGHT
		WRAT BCDEFGHIJKL 2 BRIGHT
		Stop
	Death:
		NADA A 1
		Stop
	}
}

actor EnemyShip 16771
{
 Monster
 Radius 64
 Height 56
 Speed 20
 DamageFactor "ServoLaser", 0.4
 DamageFactor "Electric", 2.0
 FloatSpeed 20
 Health 500
 Mass 500
 Scale 1.5
 ReactionTime 8
 MeleeRange 300
 Painchance 18
 PainSound "SpaceShipHit"
 ActiveSound "EnemyShipEngine"
 +NOGRAVITY
 +FLOAT
 +DROPOFF
 +NOBLOCKMONST
 +FLOATBOB
 +MISSILEMORE
 +MISSILEEVENMORE
 +LOOKALLAROUND
 +QUICKTORETALIATE
 +NOTARGET
 +NOBLOOD
 -FRIGHTENED
 +DONTRIP
 +NOINFIGHTING
 +NEVERRESPAWN
 States
 {
  Spawn:
   ENSH A 1 A_Look
   loop
  See:
   ENSH AAAAAAAAAAAAAAA 1 A_Chase
   ENSH A 0 ThrustThingZ(0, Random(0, 32), Random(0, 1), 0)
   loop
  Missile:
   ENSH A 0 A_FaceTarget
   ENSH A 1 BRIGHT A_CustomMissile("EnemyValkrieShot", 0, 0, 0)
   goto See
  Melee:
   ENSH A 0 A_FaceTarget
   ENSH A 1 A_Recoil(20)
   ENSH A 0 A_PlaySound("ShipThrust")
   ENSH AAAAAA 0 A_SpawnItemEX("RocketFire", Random(-8, 8), Random(-8, 8), Random(-8, 8), Random(2, 5), Random(2, 5), Random(2, 5), Random(-360, 360), 128, 0)
   ENSH AAAAAAAAAA 2 A_SpawnItemEX("RocketFire", Random(-8, 8), Random(-8, 8), Random(-8, 8), Random(2, 5), Random(2, 5), Random(2, 5), Random(-360, 360), 128, 0)
   ENSH A 0 A_CustomMissile("EnemyValkrieShot", 0, 0, 0)
   ENSH AAAAAAAAAAAAAA 2 A_SpawnItemEX("RocketFire", Random(-8, 8), Random(-8, 8), Random(-8, 8), Random(2, 5), Random(2, 5), Random(2, 5), Random(-360, 360), 128, 0)
   ENSH A 0 A_CustomMissile("EnemyValkrieShot", 0, 0, 0)
   ENSH A 0 A_Stop
   goto See
  Pain:
   ENSH AA 1 A_Pain
   goto See
  Death:
   ENSH A 0 A_Stop
   ENSH A 0 A_LowGravity
   ENSH AAAAA 0 A_SpawnItemEX("ShipBurnSmoke", Random(-8,8), Random(-8,8), Random(-8,8), 0, 0, 0, 0, 128, 0)
   ENSH A 6 A_SpawnItemEX("ShipBurnTrail", 0, 0, 0, 0, 0, 0, 0, 128, 0)
   goto Death+2
  Crash:
   TNT1 A 0 A_Explode
   TNT1 A 0 A_PlaySound("weapons/grenlx")
   TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAA 3 A_SpawnItemEX("DukeExplosion", Random(-32, 32), Random(-32, 32), Random(0, 32), 0, 0, 0, 0, 0, 0)
   stop
 }
}

actor EnemyValkrieShot
{
 Radius 8
 Height 8
 Projectile
 obituary "%o was shot down by an enemy spacecraft"
 Speed 50
 Scale 0.8
 SeeSound "ValkrieFire"
 Damage 6
 States
 {
 Spawn:
 VALK A 1 BRIGHT A_CustomMissile("ValkrieTrail", 0, 0, 0)
 loop

 Death:
 TNT1 A 0
 TNT1 A 1 A_CustomMissile("ValkrieHit", 0, 0, 0)
 stop
 }
}

actor DukeExplosion
{
  Height 1
  Radius 1
  Speed 0
  RenderStyle Add
  Alpha 0.8
  Projectile
  -MISSILE
  +FORCEXYBILLBOARD
  States
  {
   Spawn:
	DEXP A 0
	DEXP A 0 A_Explode(256, 256, 1)
	DEXP A 0 A_PlaySound("weapons/grenlx")
	DEXP ABCDEFGHIJKLMNOPQRSTU 2 BRIGHT
	stop
  }
}

actor ShipBurnTrail
{
  Height 1
  Radius 1
  Speed 0
  RenderStyle Add
  Alpha 0.8
  Scale 0.5
  Projectile
  -MISSILE
  +FORCEXYBILLBOARD
  States
  {
   Spawn:
	DEXP ABCDEFGHIJKLMNOPQRSTU 2 BRIGHT
	stop
  }
}

actor ShipBurnSmoke
{
 Radius 6
 Height 6
 Speed 0
 Scale 0.5
 RenderStyle Translucent
 Alpha 0.5
 Projectile
 +GHOST
 +HEXENBOUNCE
 +THRUGHOST
 +CORPSE
 +FORCEXYBILLBOARD
 +DONTSPLASH
 States
 {
 Spawn:
 PUF2 FGHIJKLMNOPQRSTUVWXYZ 1
 PUF3 ABC 1
 stop
 }
}

actor LightningGun : Weapon 18004
{
   Inventory.PickupSound "misc/w_pkup"
   Inventory.PickupMessage "Picked up a Lightning Gun!"
   Obituary "%o was Electrocuted by %k"
   Weapon.AmmoType "CellAmmo"
   Weapon.AmmoGive 60
   Weapon.AmmoUse 2
   States
   {
   Spawn:
   LIGP A -1
   loop
   Ready:
   LIGH A 1 A_WeaponReady
   loop
   Select:
   LIGH A 1 A_Raise
   loop
   Deselect:
   LIGH A 1 A_Lower
   loop
   Fire:
   LIGH B 0 A_PlayWeaponSound("MageLightningReady")
   LIGH BC 2
   LIGH D 2 radius_quake(2, 10, 0, 1, 0)
   LIGH E 0 A_PlayWeaponSound("MageLightningFire")
   LIGH E 0 A_SetBlend("FF FF FF", 0.9, 10)
   LIGH E 2 A_FireCustomMissile("LightningGunBolt", Random(-4,4), 1, 8, Random(-8, 8), 1)
   LIGH FGFEGHI 1 A_FireCustomMissile("LightningGunBolt", Random(-4,4), 1, 8, Random(-8, 8), 1)
   LIGH A 10
   LIGH A 10 A_PlaySound("LightningGunClose")
   LIGH A 6
   LIGH A 0 A_Refire
   goto Ready
   }
}

actor LightningGunBolt
{
 Radius 8
 Height 8
 Speed 80
 Damage 8
 RenderStyle Add
 Obituary "%o was Electrocuted by %k"
 Alpha 0.8
 Scale 0.8
 DamageType "Electric"
 Projectile
 +FORCEXYBILLBOARD
 SeeSound "MageLightningContinuous"
 DeathSound "MageLightningZap"
 States
 {
  Spawn:
  	TNT1 A 0
  	HLPS ABC 2 BRIGHT
  	stop
  XDeath:
	TNT1 A 0
	TNT1 A 0 A_GiveToTarget("HitConfirmation", 1)
	goto Death
  Death:
  	HLPS DEFGH 4 BRIGHT
  	stop
 }
}

ACTOR PlasmaDebris : CustomInventory
{
   inventory.pickupmessage ""
   inventory.pickupsound "misc/i_pkup"
   inventory.icon ICONJNK1
   inventory.amount 1
   inventory.maxamount 2
   +INVBAR
   States
   {
   Spawn:
	  UJUN A -1
	  Loop
   Use:
	  TNT1 A 0 A_PlayWeaponSound("skeleton/swing")
	  TNT1 A 10 A_FireCustomMissile("ThrownDebris1", 0, 0, 0, 1)
	  stop
   }
}

ACTOR ProtonTorpedoDebris : CustomInventory
{
   inventory.pickupmessage ""
   inventory.pickupsound "misc/i_pkup"
   inventory.icon ICONJNK2
   inventory.amount 1
   inventory.maxamount 2
   +INVBAR
   States
   {
   Spawn:
	  UJUN B -1
	  Loop
   Use:
	  TNT1 A 0 A_PlayWeaponSound("skeleton/swing")
	  TNT1 A 10 A_FireCustomMissile("ThrownDebris2", 0, 0, 0, 1)
	  stop
   }
}

ACTOR ProtonGrenadeDebris : CustomInventory
{
   inventory.pickupmessage ""
   inventory.pickupsound "misc/i_pkup"
   inventory.icon ICONJNK3
   inventory.amount 1
   inventory.maxamount 2
   +INVBAR
   States
   {
   Spawn:
	  UJUN C -1
	  Loop
   Use:
	  TNT1 A 0 A_PlayWeaponSound("skeleton/swing")
	  TNT1 A 10 A_FireCustomMissile("ThrownDebris3", 0, 0, 0, 1)
	  stop
   }
}

actor ThrownDebris1
{
 Projectile
 Radius 16
 Height 16
 Damage 16
 Speed 58
 Obituary "%k beaned %o in the head with a broken plasma gun barrel."
 BounceCount 4
 BounceFactor 0.6
 SeeSound "Junk"
 +HEXENBOUNCE
 +NOEXTREMEDEATH
 -NOGRAVITY
 +CANBOUNCEWATER
 States
 {
 Spawn:
  UJUN A 0
  UJUN A 0 A_StopSound
  UJUN A 2
  goto Spawn+2
 Death:
  TNT1 A 0
  TNT1 A 0 A_SpawnItem("PlasmaDebris", 8)
  stop
 XDeath:
  TNT1 A 0
  TNT1 A 0 A_PlaySound("JunkSmack")
  TNT1 A 0 A_SpawnItem("PlasmaDebris", 8)
  stop
 }
}

actor ThrownDebris2
{
 Projectile
 Radius 12
 Height 12
 Damage 10
 Speed 58
 Obituary "%k biffed a piece of a proton torpedo launcher at %o."
 BounceCount 4
 BounceFactor 0.6
 SeeSound "Junk"
 +HEXENBOUNCE
 +NOEXTREMEDEATH
 -NOGRAVITY
 +CANBOUNCEWATER
 States
 {
 Spawn:
  UJUN B 0
  UJUN B 0 A_StopSound
  UJUN B 2
  goto Spawn+2
 Death:
  TNT1 A 0
  TNT1 A 0 A_SpawnItem("ProtonTorpedoDebris", 8)
  stop
 XDeath:
  TNT1 A 0
  TNT1 A 0 A_PlaySound("JunkSmack")
  TNT1 A 0 A_SpawnItem("ProtonTorpedoDebris", 8)
  stop
 }
}

actor ThrownDebris3
{
 Projectile
 Radius 14
 Height 14
 Damage 14
 Speed 58
 Obituary "%k jabbed a broken Grenade launcher handle in %o's eye."
 BounceCount 4
 BounceFactor 0.6
 SeeSound "Junk"
 +HEXENBOUNCE
 +NOEXTREMEDEATH
 -NOGRAVITY
 +CANBOUNCEWATER
 States
 {
 Spawn:
  UJUN C 0
  UJUN C 0 A_StopSound
  UJUN C 2
  goto Spawn+2
 Death:
  TNT1 A 0
  TNT1 A 0 A_SpawnItem("ProtonGrenadeDebris", 8)
  stop
 XDeath:
  TNT1 A 0
  TNT1 A 0 A_PlaySound("JunkSmack")
  TNT1 A 0 A_SpawnItem("ProtonGrenadeDebris", 8)
  stop
 }
}

ACTOR VilesBane : CustomInventory
{
   inventory.pickupmessage "Vile's Bane"
   inventory.pickupsound "misc/i_pkup"
   inventory.icon ICONVILE
   inventory.amount 1
   inventory.maxamount 5
   +INVBAR
   +FLOATBOB
   +INVENTORY.HUBPOWER
   -INVENTORY.INTERHUBSTRIP
   States
   {
   Spawn:
	  VBAN A -1
	  Loop
   Use:
	  TNT1 A 0 A_PlayWeaponSound("skeleton/swing")
	  TNT1 A 10 A_FireCustomMissile("VilesBaneSyringe", 0, 0, 0, 1)
	  stop
   }
}

actor VilesBaneSyringe
{
 Projectile
 Radius 1
 Height 1
 Damage 2
 Speed 50
 DamageType "VilesBane"
 Obituary "%k stabbed %o with a Syringe."
 DeathSound "JunkSmack"
 +NOEXTREMEDEATH
 +SEEKERMISSILE
 States
 {
 Spawn:
  WB3P ABCD 2 A_Tracer2
  loop
 Death:
  TNT1 A 1
  TNT1 A 1
  stop
 }
}

ACTOR BFG_SMMP : BFG9000 Replaces BFG9000
{
	Game Doom
	+WEAPON.NOAUTOFIRE
	+WEAPON.NOLMS
	Weapon.Ammotype "CellAmmo"
	Inventory.PickupMessage "$GOTBFG9000"
	States
	{
	Ready:
		BFGG A 1 A_WeaponReady
		Loop
	Deselect:
		BFGG A 1 A_Lower
		Loop
	Select:
		BFGG A 1 A_Raise
		Loop
	Hold:
	Fire:
		BFGG A 20 A_BFGsound
		BFGG B 5 A_GunFlash
		BFGG B 5
		BFGG C 0 Radius_Quake(4, 6, 0, 1, 0)
		BFGG C 0 A_Recoil(2)
		BFGG C 10 A_FireBFG
		BFGG B 20 A_ReFire
		Goto Ready
	Flash:
		BFGF A 6 Bright A_Light1
		BFGF B 6 Bright A_Light2
		Goto LightDone
	Spawn:
		BFUG A -1
		Stop
	}
}

actor BFGTrail
{
	Radius 2
	Height 2
	RenderStyle Add
	Alpha 1.0
	Scale 0.18
	+HEXENBOUNCE
	+CLIENTSIDEONLY
	+ALLOWCLIENTSPAWN
	+FORCEXYBILLBOARD
	+NOBLOCKMAP
	+NOGRAVITY
	States
	{
		Spawn:
		BFGS A 1 BRIGHT A_FadeOut(0.05)
		loop
		Death:
		TNT1 A 1
		TNT1 A 1
		stop
	}
}

actor BFGBlastFog : BFGTrail
{
	Projectile
	Scale 1.0
	-HEXENBOUNCE
	States
	{
		Spawn:
			GTKE A 1 BRIGHT
			GTKE BCDEFGHIJKLMNOPQRS 2 BRIGHT
			stop
	}
}

actor BFGBlastFog2 : BFGBlastFog
{
	States
	{
	Spawn:
			GTKE A 1 BRIGHT
			GTKE BCDEFGHIJKLMNOPQRS 1 BRIGHT
			stop
	}
}

ACTOR FastBFGBall Replaces BFGBall
{
	Decal BFGLightning
	Game Doom
	SpawnID 128
	Radius 13
	Height 8
	Speed 35
	Damage 100
	Projectile
	+RANDOMIZE
	+FORCEXYBILLBOARD
	+EXTREMEDEATH
	RenderStyle Add
	Alpha 0.85
	DeathSound "weapons/bfgx"
	Obituary "$OB_MPBFG_BOOM"
	States
	{
	Spawn:
		BFS1 A 0 Bright A_SpawnItemEx("BFGTrail", Random(-24,24), Random(-24,24), Random(-24,24), 0, 0, 0, 0, 128, 0)
		BFS1 A 1 Bright A_SpawnItemEx("BFGTrail", Random(-24,24), Random(-24,24), Random(-24,24), 0, 0, 0, 0, 128, 0)
		BFS1 A 0 Bright A_SpawnItemEx("BFGTrail", Random(-24,24), Random(-24,24), Random(-24,24), 0, 0, 0, 0, 128, 0)
		BFS1 A 1 Bright A_SpawnItemEx("BFGTrail", Random(-24,24), Random(-24,24), Random(-24,24), 0, 0, 0, 0, 128, 0)
		BFS1 B 0 Bright A_SpawnItemEx("BFGTrail", Random(-24,24), Random(-24,24), Random(-24,24), 0, 0, 0, 0, 128, 0)
		BFS1 B 1 Bright A_SpawnItemEx("BFGTrail", Random(-24,24), Random(-24,24), Random(-24,24), 0, 0, 0, 0, 128, 0)
		BFS1 B 0 Bright A_SpawnItemEx("BFGTrail", Random(-24,24), Random(-24,24), Random(-24,24), 0, 0, 0, 0, 128, 0)
		BFS1 B 1 Bright A_SpawnItemEx("BFGTrail", Random(-24,24), Random(-24,24), Random(-24,24), 0, 0, 0, 0, 128, 0)
		Loop
	XDeath:
		TNT1 A 0
		TNT1 A 0 A_GiveToTarget("HitConfirmation", 1)
		goto Death
	Death:
		BFE1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("BFGTrail", Random(-24,24), Random(-24,24), Random(-24,24), Random(-16,16), Random(-16,16), Random(-16,16), 0, 128, 0)
		BFE1 AAAAAAAAAAA 0 A_SpawnItemEx("BFGBlastFog", 0, 0, 0, random(-2, 2), random(-2, 2), random(-2, 2), 0, 128, 0)
		BFE1 A 0 Radius_Quake(2, 18, 0, 4, 0)
		BFE1 AB 8 Bright
		BFE1 C 6 Bright A_BFGSpray("BFGExtra", 32)
		BFE1 DEF 4 Bright
		Stop
	}
}

actor VolumetricFogSpawner 20001
{
	Radius 64
	+ALLOWCLIENTSPAWN
	+CLIENTSIDEONLY
	+NOINTERACTION
	+NOCLIP
	+NOBLOCKMAP
	states
	{
	Spawn:
		TNT1 A 1
		TNT1 AAAAAAAA 0 A_SpawnItemEx("VolumetricFogSprite", Random(-64, 64), Random(-64, 64), 0, 0, 0, 0, 0, 128, 48)
		stop
	}
}

actor Bubble
{
	Projectile
	Radius 2
	Height 4
	Speed 0
	Damage 0
	Scale 0.07
	+FORCEXYBILLBOARD
	+CLIENTSIDEONLY
	+ALLOWCLIENTSPAWN
	States
	{
		Spawn:
			BUBB A 1 A_JumpIf(WaterLevel <= 2, "Death")
			loop
		Death:
			TNT1 A 1
			stop
	}
}

actor BubbleSpawner 20002
{
	Radius 32
	+ALLOWCLIENTSPAWN
	+NOINTERACTION
	+NOCLIP
	+NOBLOCKMAP
	states
	{
	Spawn:
		TNT1 A 8 A_SpawnItemEx("Bubble", Random(-32, 32), Random(-32, 32), Random(0, 20), 0, 0, Random(1,2), 0, 128, 48)
		loop
	}
}


actor VolumetricFogSprite
{
	yscale 0.08
	renderstyle Add
	alpha 0.6
	+FORCEXYBILLBOARD
	+NOINTERACTION
	+ALLOWCLIENTSPAWN
	+CLIENTSIDEONLY
	+NOCLIP
	+NOBLOCKMAP
	states
	{
	Spawn:
		FOG1 A -1
		loop
	}
}

actor Kamikaze : Inventory 19312
{
  inventory.amount 1
  inventory.maxamount 1
  inventory.pickupmessage "Picked up the Kamikaze Artifact!"
  -INVBAR
  -INTERHUBSTRIP
  +INVENTORY.UNDROPPABLE
  +INVENTORY.HUBPOWER
  +FLOATBOB
  +NOGRAVITY
  Scale 0.4
  states
  {
  Spawn:
	KAMA ABCDEDCB 5 BRIGHT
	loop
  }
}

actor ScreamingKamikazeSoul
{
	Radius 8
	Height 8
	Scale 0.9
	RenderStyle Add
	Alpha 1.0
	+NOCLIP
	+NOGRAVITY
	States
	{
		Spawn:
		KAMA F 0
		KAMA F 8 BRIGHT A_PlaySound("KamikazeExpel")
		KAMA F 1 BRIGHT A_FadeOut(0.04)
		goto Spawn+2
	}
}

actor PopCornMachine 17771
{
	Radius 16
	Height 8
	Speed 0
	Mass 9999999
	+SPAWNCEILING
	+NOGRAVITY
	+CORPSE
	+NOINTERACTION
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A -1
		loop
	Popping:
		TNT1 A 0
		TNT1 A 0 A_PlaySound("Popcorn")
		TNT1 AAAAAAAAAA 4 A_SpawnItemEX("Popcorn", Random(-2,2), Random(-2,2), 0, Random(-2,2), Random(-2,2), Random(-2, 0), 0, 0, 0)
		TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAA 2 A_SpawnItemEX("Popcorn", Random(-2,2), Random(-1,1), 0, Random(-2,2), Random(-2,2), Random(-2, 0), 0, 0, 0)
		TNT1 A -1
		Loop
	}
}

actor KamikazeExplode
{
	Projectile
	radius 1
	height 1
	speed 0
	obituary "%k blew up in %o's face. Bet he didn't see that one coming!"
	+HEXENBOUNCE
	states
	{
	Death:
	Spawn:
		TNT1 A 0
		TNT1 A 0 bright A_PlaySound("MassiveExplosion")
		TNT1 A 0 bright A_Explode(384, 256, 1)
		TNT1 A 0 bright A_SpawnItemEx("SledgeHammerExplosionLarge", 0, 0, 0, 0, 0, 0, 0, 128, 0)
		TNT1 AAAAAA 0 bright A_SpawnItemEx("SledgeHammerExplosionSmall", Random(-48, 48), Random(-48, 48), Random(-48, 48), 0, 0, 0, 0, 128, 0)
		TNT1 AAAAAA 0 bright A_SpawnItemEx("SledgeHammerExplosionSmall", Random(-48, 48), Random(-48, 48), Random(-48, 48), 0, 0, 0, 0, 128, 0)
		TNT1 A 1
		stop
	}
}

ACTOR CasullClip : Ammo
{
	Inventory.MaxAmount 7 // size of the clip
	Ammo.BackpackAmount 0
	Ammo.BackpackMaxAmount 6 //MUST be the same as Inventory.MaxAmmount
	Inventory.Icon "MAGICON1"
	+IGNORESKILL
}

actor SilverBulletPuff2 : SilverBulletPuff
{
	obituary "%o was torn apart by %k's .454 Casull Rounds"
}

actor 454Casull : ClericWeapon 18362
{
  decal BulletChip
  obituary "%o was torn apart by %k's .454 Casull Rounds"
  Inventory.PickupSound "misc/w_pkup"
  Inventory.PickupMessage "Pickup a .454 Casull, Alucard's Signature Weapon!"
  attacksound "CasullFire"
  weapon.selectionorder 500
  weapon.kickback 190
  Weapon.AmmoType1 "CasullClip"
  Weapon.AmmoType2 "MechAmmo"
  Weapon.AmmoGive2 24
  Weapon.AmmoUse1 1
  +WEAPON.AMMO_OPTIONAL
  scale 0.2
  states
  {
  Spawn:
   CASP A -1
   loop
  Ready:
	CASL A 0 A_WeaponReady
	goto ReloadCheck
	CASL A 1 A_WeaponReady
	goto Ready+1
  Deselect:
	CASL A 1 A_Lower
	loop
  Select:
	CASL A 1 A_Raise
	loop
  Fire:
	CASL B 0 A_JumpIfNoAmmo("ReloadCheck")
	CASL B 0 A_GunFlash
	CASL B 0 radius_quake(6, 2, 0, 1, 0)
	CASL B 2 BRIGHT A_FireBullets (2, 2, 1, 38, "SilverBulletPuff2")
	CASL B 0 BRIGHT A_FireCustomMissile("BulletCasing",-45+random(-8,8),0,1,9)
	CASL CDEFGHI 2
	CASL J 0 A_ReFire
	CASL JKL 2
	goto Ready+1
  ReloadCheck:
	CASR A 0 A_JumpIfInventory("CasullClip",7,2)
	CASR A 0 A_JumpIfInventory("MechAmmo",1,"ReloadStart")
	CASR A 0
	goto Ready+1

  ReloadStart:
	CASR A 0 A_PlaySoundEx("9mmClipOut", "Auto", 0)
	CASR ABCDEFGHIJKLMNOP 2
	CASR Q 2 A_PlaySoundEx("9mmClipIn", "Auto", 0)
	goto ReloadAmmo

  ReloadAmmo:
	NULL A 0 A_TakeInventory("MechAmmo",1)
	NULL A 0 A_GiveInventory("CasullClip",1)
	NULL A 0 A_JumpIfInventory("CasullClip",7,"ReloadDone")
	NULL A 0 A_JumpIfInventory("MechAmmo",1,"ReloadAmmo")
	goto ReloadDone

  ReloadDone:
	CASR RST 1
	CASR UVWXYZ 2
	goto Ready+1
  AltFire:
	CASL A 0
	goto ReloadCheck
  Flash:
	TNT1 A 2 A_Light1
	TNT1 A 1 A_Light0
	stop
  }
}

actor HangingSpaceMarine : CommanderKeen Replaces CommanderKeen
{
	dropitem "Noisy_Cricket", 5
	dropitem "454Casull", 15
	dropitem "CricketAmmo", 10
	dropitem "CricketAmmo", 10
	-ISMONSTER
	states
	{
		Death:
			KEEN AB 3
			KEEN C	3 A_Scream
			KEEN DEFGH	3
			KEEN I	4 A_NoBlocking
			KEEN J	4
			KEEN K	4 A_KeenDie
			KEEN L	 -1
			Stop
	}
}

actor BFG10kShot
{
	Game Doom
	SpawnID 217
	Radius 11
	Height 8
	Speed 20
	Damage 160
	DamageType BFG10k
	+NOBLOCKMAP
	+NOGRAVITY
	+ACTIVATEIMPACT
	+ACTIVATEPCROSS
	+NOTELEPORT
	+PUFFONACTORS
	+PUFFGETSOWNER
	+FORCERADIUSDMG
	+FORCEXYBILLBOARD
	Renderstyle Add
	Alpha 0.75
	SeeSound "weapons/bfg10kx"
	AttackSound "weapons/bfg10kx"
	Obituary "%o was blasted by %k's BFG10K."
	States
	{
	Spawn:
		BFE1 A 0 bright
		BFE1 AAAAAAAAAAA 0 A_SpawnItemEx("BFGBlastFog2", 0, 0, 0, random(-3, 3), random(-3, 3), random(-3, 3), 0, 128, 0)
		BFE1 A 3 bright A_Detonate
		BFE1 BCDEF 3 bright A_SpawnItemEx("BFGBlastFog2", 0, 0, 0, random(-3, 3), random(-3, 3), random(-3, 3), 0, 128, 0)
		Stop
	}
}

ACTOR BFG10K : Weapon 5013
{
	Game Doom
	SpawnID 165
	Radius 20
	Height 20
	Weapon.Selectionorder 2800
	Weapon.AmmoUse 5
	Weapon.AmmoGive 40
	Weapon.Kickback 100
	Weapon.Ammotype "CellAmmo"
	AttackSound "BFG10kShot"
	Inventory.Pickupmessage "You got the BFG10000!  Hell, yes!"
	+WEAPON.NOAUTOFIRE
	+WEAPON.NOLMS
	States
	{
	Spawn:
		BFG2 A -1
		stop
	Ready:
		BG2G A 0 A_PlaySound ("weapons/bfg10kidle")
		BG2G AAA 1 A_WeaponReady
		BG2G BBB 1 A_WeaponReady
		BG2G CCC 1 A_WeaponReady
		BG2G DDD 1 A_WeaponReady
		loop
	Deselect:
		BG2G E 1 A_Lower
		loop
	Select:
		BG2G E 1 A_Raise
		loop
	Fire:
		BG2G E 20 A_PlaySound ("weapons/bfg10kf")
		BG2G F 4
		BG2G G 1
		BG2G H 1
		BG2G I 1
		BG2G J 1
		goto Hold
	Hold:
		BG2G K 2 A_GunFlash
		BG2G L 0 Radius_Quake(5,3,0,1,0)
		BG2G L 2 A_FireBullets(0,0,1,0,"BFG10kShot")
		BG2G M 2
		BG2G N 0 A_ReFire
		BG2G O 35 A_PlaySound ("weapons/bfg10kcool")
		goto Ready
	Flash:
		TNT1 A 2 bright A_Light1
		TNT1 A 3 bright
		Goto LightDone
		stop
	}
}

actor FlareSpark : RedEmber
{
 RenderStyle Add
 Gravity 0.3
 Alpha 1.0
 Scale 0.05
 -NOGRAVITY
 States
 {
  Spawn:
   SEMB A 1 BRIGHT A_FadeOut(0.1)
   loop
 }
}

actor FlareSpark2 : FlareSpark
{
 States
 {
  Spawn:
   REMB A 1 BRIGHT A_FadeOut(0.1)
   loop
 }
}

actor FlareSmoke : Duke64GrenadeSmoke
{
	Scale 0.3
}

actor Flare
{
	Projectile
	Radius 4
	Height 4
	Speed 50
	Damage 1
	SeeSound "FlareThrow"
	Obituary "%o was burned by %k's flare"
	DamageType "Fire"
	-NOGRAVITY
	-SOLID
	+DONTSPLASH
	+FORCEXYBILLBOARD
	+NODAMAGETHRUST
	+DONTREFLECT
	Gravity 0.6
	Scale 0.1
	States
	{
		Spawn:
			YEMB A 0 BRIGHT
			YEMB A 0 BRIGHT A_PlaySoundEx("FlareBurn", "auto", 1, -1)
			YEMB A 0 BRIGHT ThrustThingZ(0, 4, 0, 1)
			YEMB A 0 BRIGHT A_SpawnItemEx("FlareSmoke", random(-8,8), random(-8,8), random(0,8), 0, 0, Random(1, 3), 0, 128, 128)
			YEMB A 0 BRIGHT A_SpawnItemEx("SilverEmber", random(-4,4), random(-4,4), random(-4,4), 0, 0, 1, 0, 128, 200)
			YEMB A 0 BRIGHT A_SpawnItemEx("FlareSpark2", 0, 0, 0, random(-2,2), random(-2,2), random(-2,2), 0, 128, 224)
			YEMB AAA 0 BRIGHT A_SpawnItemEx("FlareSpark", 0, 0, 0, random(-2,2), random(-2,2), random(-2,2), 0, 128, 0)
			YEMB A 1 BRIGHT
			YEMB A 0 BRIGHT A_JumpIfInTargetInventory("FlareCheck", 90, "FizzleOut")
			YEMB A 0 BRIGHT A_Jump(64, "Damage")
			goto Spawn+3
		Damage:
			YEMB A 0 A_Explode(4,32)
			YEMB A 0
			goto Spawn+3
		FizzleOut:
			TNT1 AAAAAAAAAA 0 BRIGHT A_SpawnItemEx("FlareSpark", 0, 0, 0, random(-2,2), random(-2,2), random(-2,2), 0, 128, 0)
			TNT1 AAAAAA 0 BRIGHT A_SpawnItemEx("SilverEmber", random(-4,4), random(-4,4), random(-4,4), 0, 0, 1, 0, 128, 100)
			TNT1 AAAAAAAAAA 0 BRIGHT A_SpawnItemEx("FlareSmoke", random(-8,8), random(-8,8), random(-8,8), Random(-3, 3), Random(-3, 3), Random(-3, 3), 0, 128, 32)
			stop
		Death:
			YEMB A 0 BRIGHT A_NoGravity
			YEMB A 0 BRIGHT
			goto Spawn+3
		XDeath:
			YEMB A 0 BRIGHT A_Gravity
			YEMB A 0 BRIGHT
			goto Spawn+3
	}
}

actor ElementalCasing : SSGCasing
{
}

//Ruin's first weapon attempt
//coded by Ruin

Actor ElementalSSG : Weapon 12346
{
  spawnid 33
  inventory.pickupmessage "You got the \cgElem\chent\cfal SSG! \ccWreak some Havok!"
  obituary "%o was Torched by %k's Blaze SSG."
  radius 20
  height 16
  attacksound "weapons/shottyfire"
  weapon.kickback 300
  Weapon.AmmoType "SpreadAmmo"
  weapon.ammouse 2
  weapon.ammogive 8
  States
  {
  Ready:
	 SHT4 A 0 A_JumpIfInventory("TailsClassCheck", 1, "ICEReady")
	 SHT4 A 0 A_JumpIfInventory("LinkClassCheck", 1, "BlitzReady")
	 SHT4 A 1 A_WeaponReady
	 LOOP
  ICEReady:
	 SHT5 A 1 A_WeaponReady
	 LOOP
  BlitzReady:
	 SHT6 A 1 A_WeaponReady
	 LOOP
  Deselect:
	 SHT4 A 0 A_JumpIfInventory("TailsClassCheck", 1, "ICEDeselect")
	 SHT4 A 0 A_JumpIfInventory("LinkClassCheck", 1, "BlitzDeselect")
	 SHT4 A 1 A_lower
	 LOOP
  ICEDeselect:
	 SHT5 A 1 A_lower
	 LOOP
  BlitzDeselect:
	 SHT6 A 1 A_lower
	 LOOP
  Select:
	  SHT4 A 0 A_JumpIfInventory("TailsClassCheck", 1, "ICESelect")
	  SHT4 A 0 A_JumpIfInventory("LinkClassCheck", 1, "BlitzSelect")
	  SHT4 A 1 A_Raise
	  LOOP
  ICESelect:
	  SHT5 A 1 A_Raise
	  LOOP
  BlitzSelect:
	  SHT6 A 1 A_Raise
	  LOOP
  Fire:
    SHT4 A 0 A_JumpIfInventory("TailsClassCheck", 1, "ICEFire")
	SHT4 A 0 A_JumpIfInventory("LinkClassCheck", 1, "BlitzFire")
	SHT4 A 3
	SHT4 A 0 radius_quake(4, 3, 0, 1, 0)
	SHT4 A 0 A_FireBullets (7, 5, 7, 15, "BlazePuff")
	SHT4 A 2 A_GunFlash
	SHT4 B 1 A_Recoil(7)
	SHT4 CDEF 1
	SHT4 A 4
	SHT4 GH 2
	SHT4 I 3 A_CheckReload
	SHT4 J 3
	SHT4 K 3 A_PlaySoundEx("weapons/shotopen", "auto", 0)
	SHT4 LL 0 A_FireCustomMissile("ElementalCasing", Random(-14,8),0,2,0)
	SHT4 L 3
	SHT4 M 3
	SHT4 N 3
	SHT4 O 3 A_PlaySoundEx("weapons/shotload", "auto", 0)
	SHT4 P 3
	SHT4 Q 3
	SHT4 R 3
	SHT4 S 0 A_PlaySoundEx("weapons/shotclose", "auto", 0)
	SHT4 S 7
	SHT4 A 7 A_ReFire
	goto Ready
  ICEFire:
	SHT5 A 3
	SHT5 A 0 radius_quake(4, 3, 0, 1, 0)
	SHT5 A 0 A_FireBullets (7, 5, 7, 15, "FrostPuff")
	SHT5 A 2 A_GunFlash
	SHT5 B 1 A_Recoil(7)
	SHT5 CDEF 1
	SHT5 A 4
	SHT5 GH 2
	SHT5 I 3 A_CheckReload
	SHT5 J 3
	SHT5 K 3 A_PlaySoundEx("weapons/shotopen", "auto", 0)
	SHT5 LL 0 A_FireCustomMissile("ElementalCasing", Random(-14,8),0,2,0)
	SHT5 L 3
	SHT5 M 3
	SHT5 N 3
	SHT5 O 3 A_PlaySoundEx("weapons/shotload", "auto", 0)
	SHT5 P 3
	SHT5 Q 3
	SHT5 R 3
	SHT5 S 0 A_PlaySoundEx("weapons/shotclose", "auto", 0)
	SHT5 S 7
	SHT5 A 7 A_ReFire
	goto Ready
  BlitzFire:
	SHT6 A 3
	SHT6 A 0 Radius_Quake(1, 2, 0, 1, 0)
	SHT6 A 0 A_FireBullets (7, 5, 7, 15, "BlitzShock")
	SHT6 A 7 A_GunFlash
	SHT6 B 3 A_Recoil(7)
	SHT6 C 3 A_CheckReload
	SHT6 D 3
	TNT1 A 7 A_PlayWeaponSound ("weapons/shotopen")
	TNT1 A 7
	TNT1 A 7 A_PlayWeaponSound ("weapons/shotload")
	TNT1 A 6
	TNT1 A 0 A_PlayWeaponSound ("weapons/shotclose")
	SHT6 DCB 3
	SHT6 A 3
	SHT6 A 3 A_ReFire
	SHT6 A 5 A_ReFire
	goto ready
  Flash:
	SHT4 A 0 A_JumpIfInventory("TailsClassCheck", 1, "ICEFlash")
	SHT4 A 0 A_JumpIfInventory("LinkClassCheck", 1, "BlitzFlash")
	SHT4 T 2 bright A_Light1
	SHT4 U 1 bright A_Light2
	SHT4 U 0 bright A_Light0
	stop
  ICEFlash:
	SHT5 T 2 bright A_Light1
	SHT5 U 1 bright A_Light2
	SHT5 U 0 bright A_Light0
	stop
  BlitzFlash:
	SHT6 E 0 bright A_Light1
	SHT6 F 3 bright A_Light2
	SHT6 F 0 bright A_Light0
	stop
  Spawn:
	   SGN4 A -1
	   stop
   }
}

actor ElectricArcBall
{
	Radius 8
	Height 16
	+NOINTERACTION
	+NOGRAVITY
	+NOBLOCKMAP
	States
	{
		Spawn:
			TNT1 A 1 A_SpawnItemEx("ElectricArc", 0, 0, 0, 0, 0, 0, random(-360, 360), SXF_CLIENTSIDE, 0)
			loop
	}
}

actor Fooby
{
	Projectile
	Radius 10
	Height 20
	Speed 30
	Scale 0.32
	States
	{
		Spawn:
			FOOB A 0
			FOOB A 0 A_PlaySoundEx("Fooby2", "auto", 0, 0.99)
			FOOB AB 2
			goto Spawn+2
		Death:
			TNT1 A 1 A_PlaySoundEx("Fooby3", "auto", 0, 0.99)
			stop
	}
}

actor PlaneFire : RocketFire
{
	Scale 0.9
}

actor PlaneGuy : Fooby
{
	Scale 0.25
	States
	{
		Spawn:
			TDCK A 1
			loop
		Death:
			TNT1 A 0 A_PlaySoundEx("TechPlasmaSuperBoom", "auto", 0, 2)
			TNT1 A 0 A_Explode(9999, 128)
			TNT1 A 0 ACS_Execute(7, 0)
			TNT1 AAAAAAAAAAAAAAAAA 0 A_SpawnItemEx("PlaneFire", 0, 0, 0, random(-16, 16), random(-16, 16), random(-16, 16), random(-360, 360), SXF_CLIENTSIDE, 0)
			TNT1 AAAAA 1 A_SpawnItemEx("PlaneFire", 0, 0, 0, random(-10, 10), random(-10, 10), random(-10, 10), random(-360, 360), SXF_CLIENTSIDE, 0)
			stop
	}
}