//Ruin's first weapon attempt
//coded by Ruin

Actor ElementalSSG : Weapon 12346
{
	spawnid 33
	inventory.pickupmessage "You got the \cgElem\chent\cfal SSG! \ccWreak some Havok!"
	obituary "%o was Torched by %k's Blaze SSG."
	radius 20
	height 16
	attacksound "weapons/shottyfire"
	weapon.kickback 300
	Weapon.AmmoType "SpreadAmmo"
	weapon.ammouse 2
	weapon.ammogive 8
	States
	{
		Ready:
			SHT4 A 0 A_JumpIfInventory("TailsClassCheck", 1, "ICEReady")
			SHT4 A 0 A_JumpIfInventory("LinkClassCheck", 1, "BlitzReady")
			SHT4 A 1 A_WeaponReady
			LOOP
		ICEReady:
			SHT5 A 1 A_WeaponReady
			LOOP
		BlitzReady:
			SHT6 A 1 A_WeaponReady
			LOOP
		Deselect:
			SHT4 A 0 A_JumpIfInventory("TailsClassCheck", 1, "ICEDeselect")
			SHT4 A 0 A_JumpIfInventory("LinkClassCheck", 1, "BlitzDeselect")
			SHT4 A 1 A_lower
			LOOP
		ICEDeselect:
			SHT5 A 1 A_lower
			LOOP
		BlitzDeselect:
			SHT6 A 1 A_lower
			LOOP
		Select:
			SHT4 A 0 A_JumpIfInventory("TailsClassCheck", 1, "ICESelect")
			SHT4 A 0 A_JumpIfInventory("LinkClassCheck", 1, "BlitzSelect")
			SHT4 A 1 A_Raise
			LOOP
		ICESelect:
			SHT5 A 1 A_Raise
			LOOP
		BlitzSelect:
			SHT6 A 1 A_Raise
			LOOP
		Fire:
			SHT4 A 0 A_JumpIfInventory("TailsClassCheck", 1, "ICEFire")
			SHT4 A 0 A_JumpIfInventory("LinkClassCheck", 1, "BlitzFire")
			SHT4 A 2
			SHT4 A 0 radius_quake(4, 3, 0, 1, 0)
			SHT4 A 0 A_PlayWeaponSound("weapons/sshotf")
			SHT4 A 0 A_FireBullets (8, 5, 7, 12, "BlazePuff")
			SHT4 A 0 A_Recoil(8)
			SHT4 A 2 A_GunFlash
			SHT4 B 0 A_SetPitch(pitch-4)
			SHT4 BCDEF 2 A_SetPitch(pitch+0.8)
			SHT4 AA 1 A_CheckReload
			SHT4 A 3
			SH4R ABCDE 2
			SH4R F 2 A_PlaySoundEx("weapons/shotopen", "auto", 0)
			SH4R GG 0 A_FireCustomMissile("ElementalCasing", Random(-14,8),0,2,0)
			SH4R GHI 2
			SH4R J 2
			SH4R K 2 A_PlaySoundEx("weapons/shotload", "auto", 0)
			SH4R LMNO 2
			SH4R P 0 A_PlaySoundEx("weapons/shotclose", "auto", 0)
			SH4R PQRS 2
			SHT4 A 7 A_ReFire
			goto Ready
		ICEFire:
			SHT5 A 0 A_JumpIfInventory("TailsClassCheck", 1, "ICEFire")
			SHT5 A 0 A_JumpIfInventory("LinkClassCheck", 1, "BlitzFire")
			SHT5 A 2
			SHT5 A 0 radius_quake(4, 3, 0, 1, 0)
			SHT5 A 0 A_PlayWeaponSound("weapons/sshotf")
			SHT5 A 0 A_FireBullets (8, 5, 7, 12, "FrostPuff")
			SHT5 A 0 A_Recoil(8)
			SHT5 A 2 A_GunFlash
			SHT5 B 0 A_SetPitch(pitch-4)
			SHT5 BCDEF 2 A_SetPitch(pitch+0.8)
			SHT5 AA 1 A_CheckReload
			SHT5 A 3
			SH5R ABCDE 2
			SH5R F 2 A_PlaySoundEx("weapons/shotopen", "auto", 0)
			SH5R GG 0 A_FireCustomMissile("ElementalCasing", Random(-14,8),0,2,0)
			SH5R GHI 2
			SH5R J 2
			SH5R K 2 A_PlaySoundEx("weapons/shotload", "auto", 0)
			SH5R LMNO 2
			SH5R P 0 A_PlaySoundEx("weapons/shotclose", "auto", 0)
			SH5R PQRS 2
			SHT5 A 7 A_ReFire
			goto Ready
		BlitzFire:
			SHT6 A 3
			SHT6 A 0 Radius_Quake(1, 2, 0, 1, 0)
			SHT6 A 0 A_FireBullets (8, 5, 7, 15, "BlitzShock")
			SHT6 A 7 A_GunFlash
			SHT6 B 3 A_Recoil(7)
			SHT6 C 3 A_CheckReload
			SHT6 D 3
			TNT1 A 7 A_PlayWeaponSound ("weapons/shotopen")
			TNT1 A 7
			TNT1 A 7 A_PlayWeaponSound ("weapons/shotload")
			TNT1 A 6
			TNT1 A 0 A_PlayWeaponSound ("weapons/shotclose")
			SHT6 DCB 3
			SHT6 A 3
			SHT6 A 3 A_ReFire
			SHT6 A 5 A_ReFire
			goto ready
		Flash:
			SH4F A 0 A_JumpIfInventory("TailsClassCheck", 1, "ICEFlash")
			SH4F A 0 A_JumpIfInventory("LinkClassCheck", 1, "BlitzFlash")
			SH4F A 2 bright A_Light1
			SH4F B 1 bright A_Light2
			SH4F B 0 bright A_Light0
			stop
		ICEFlash:
			SH5F A 2 bright A_Light1
			SH5F B 1 bright A_Light2
			SH5F B 0 bright A_Light0
			stop
		BlitzFlash:
			SHT6 E 0 bright A_Light1
			SHT6 F 3 bright A_Light2
			SHT6 F 0 bright A_Light0
			stop
		Spawn:
			SGN4 A -1
			stop
	}
}